<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Plots | Reporting with Data in R</title>
  <meta name="description" content="Chapter 7 Plots | Reporting with Data in R is a series of lessons and instructions used in courses in the School of Journalism and Media, Moody College of Communication at the University of Texas at Austin. It is taught by Christian McDonald, assistant professor of practice." />
  <meta name="generator" content="bookdown 0.23 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Plots | Reporting with Data in R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Chapter 7 Plots | Reporting with Data in R is a series of lessons and instructions used in courses in the School of Journalism and Media, Moody College of Communication at the University of Texas at Austin. It is taught by Christian McDonald, assistant professor of practice." />
  <meta name="github-repo" content="utdata/rwdir" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Plots | Reporting with Data in R" />
  
  <meta name="twitter:description" content="Chapter 7 Plots | Reporting with Data in R is a series of lessons and instructions used in courses in the School of Journalism and Media, Moody College of Communication at the University of Texas at Austin. It is taught by Christian McDonald, assistant professor of practice." />
  

<meta name="author" content="Christian McDonald" />


<meta name="date" content="2021-09-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="sums-analyze.html"/>
<link rel="next" href="how-to-tackle-a-new-dataset.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.19/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<style type="text/css">
  p.caption {
    color: #777;
    margin-top: 10px;
  }
  p code, pre, pre code, li code {
    background-color: #DCDCDC !important;
  }
</style>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Reporting with Data in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this book</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-my-philosphy"><i class="fa fa-check"></i>About my philosphy</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#tips-on-my-writing-style"><i class="fa fa-check"></i>Tips on my writing style</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#things-to-do"><i class="fa fa-check"></i>Things to do</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#notes-some-important"><i class="fa fa-check"></i>Notes, some important</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#copy-code-blocks"><i class="fa fa-check"></i>Copy code blocks</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-the-author"><i class="fa fa-check"></i>About the author</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#other-resources"><i class="fa fa-check"></i>Other resources</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="install.html"><a href="install.html"><i class="fa fa-check"></i><b>1</b> Install Party</a>
<ul>
<li class="chapter" data-level="1.1" data-path="install.html"><a href="install.html#mac-vs-pc"><i class="fa fa-check"></i><b>1.1</b> Mac vs PC</a></li>
<li class="chapter" data-level="1.2" data-path="install.html"><a href="install.html#installing-r"><i class="fa fa-check"></i><b>1.2</b> Installing R</a></li>
<li class="chapter" data-level="1.3" data-path="install.html"><a href="install.html#installing-rstudio"><i class="fa fa-check"></i><b>1.3</b> Installing RStudio</a></li>
<li class="chapter" data-level="1.4" data-path="install.html"><a href="install.html#class-project-folder"><i class="fa fa-check"></i><b>1.4</b> Class project folder</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#rstudio-tour"><i class="fa fa-check"></i><b>2.1</b> RStudio tour</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#updating-preferences"><i class="fa fa-check"></i><b>2.2</b> Updating preferences</a></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#starting-a-new-project"><i class="fa fa-check"></i><b>2.3</b> Starting a new Project</a></li>
<li class="chapter" data-level="2.4" data-path="intro.html"><a href="intro.html#using-r-notebooks"><i class="fa fa-check"></i><b>2.4</b> Using R Notebooks</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="intro.html"><a href="intro.html#create-your-first-notebook"><i class="fa fa-check"></i><b>2.4.1</b> Create your first notebook</a></li>
<li class="chapter" data-level="2.4.2" data-path="intro.html"><a href="intro.html#save-the-.rmd-file"><i class="fa fa-check"></i><b>2.4.2</b> Save the .Rmd file</a></li>
<li class="chapter" data-level="2.4.3" data-path="intro.html"><a href="intro.html#run-the-notebook"><i class="fa fa-check"></i><b>2.4.3</b> Run the notebook</a></li>
<li class="chapter" data-level="2.4.4" data-path="intro.html"><a href="intro.html#a-note-about-rmarkdown"><i class="fa fa-check"></i><b>2.4.4</b> A note about RMarkdown</a></li>
<li class="chapter" data-level="2.4.5" data-path="intro.html"><a href="intro.html#adding-new-code-chunks"><i class="fa fa-check"></i><b>2.4.5</b> Adding new code chunks</a></li>
<li class="chapter" data-level="2.4.6" data-path="intro.html"><a href="intro.html#practice-adding-code-chunks"><i class="fa fa-check"></i><b>2.4.6</b> Practice adding code chunks</a></li>
<li class="chapter" data-level="2.4.7" data-path="intro.html"><a href="intro.html#preview-the-report"><i class="fa fa-check"></i><b>2.4.7</b> Preview the report</a></li>
<li class="chapter" data-level="2.4.8" data-path="intro.html"><a href="intro.html#the-toolbar"><i class="fa fa-check"></i><b>2.4.8</b> The toolbar</a></li>
<li class="chapter" data-level="2.4.9" data-path="intro.html"><a href="intro.html#knit-the-final-workbook"><i class="fa fa-check"></i><b>2.4.9</b> Knit the final workbook</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="intro.html"><a href="intro.html#turning-in-our-projects"><i class="fa fa-check"></i><b>2.5</b> Turning in our projects</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="counts-import.html"><a href="counts-import.html"><i class="fa fa-check"></i><b>3</b> Summarize with count - import</a>
<ul>
<li class="chapter" data-level="3.1" data-path="counts-import.html"><a href="counts-import.html#learning-goals-of-this-lesson"><i class="fa fa-check"></i><b>3.1</b> Learning goals of this lesson</a></li>
<li class="chapter" data-level="3.2" data-path="counts-import.html"><a href="counts-import.html#basic-steps-of-this-lesson"><i class="fa fa-check"></i><b>3.2</b> Basic steps of this lesson</a></li>
<li class="chapter" data-level="3.3" data-path="counts-import.html"><a href="counts-import.html#create-a-new-project"><i class="fa fa-check"></i><b>3.3</b> Create a new project</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="counts-import.html"><a href="counts-import.html#describe-the-goals-of-the-notebook"><i class="fa fa-check"></i><b>3.3.1</b> Describe the goals of the notebook</a></li>
<li class="chapter" data-level="3.3.2" data-path="counts-import.html"><a href="counts-import.html#the-r-package-environment"><i class="fa fa-check"></i><b>3.3.2</b> The R Package environment</a></li>
<li class="chapter" data-level="3.3.3" data-path="counts-import.html"><a href="counts-import.html#installing-and-using-packages"><i class="fa fa-check"></i><b>3.3.3</b> Installing and using packages</a></li>
<li class="chapter" data-level="3.3.4" data-path="counts-import.html"><a href="counts-import.html#load-the-libraries"><i class="fa fa-check"></i><b>3.3.4</b> Load the libraries</a></li>
<li class="chapter" data-level="3.3.5" data-path="counts-import.html"><a href="counts-import.html#create-a-directory-for-your-data"><i class="fa fa-check"></i><b>3.3.5</b> Create a directory for your data</a></li>
<li class="chapter" data-level="3.3.6" data-path="counts-import.html"><a href="counts-import.html#lets-get-our-data"><i class="fa fa-check"></i><b>3.3.6</b> Let’s get our data</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="counts-import.html"><a href="counts-import.html#about-data-sources"><i class="fa fa-check"></i><b>3.4</b> About data sources</a></li>
<li class="chapter" data-level="3.5" data-path="counts-import.html"><a href="counts-import.html#our-project-data"><i class="fa fa-check"></i><b>3.5</b> Our project data</a></li>
<li class="chapter" data-level="3.6" data-path="counts-import.html"><a href="counts-import.html#data-dictionary"><i class="fa fa-check"></i><b>3.6</b> Data dictionary</a></li>
<li class="chapter" data-level="3.7" data-path="counts-import.html"><a href="counts-import.html#import-the-data"><i class="fa fa-check"></i><b>3.7</b> Import the data</a></li>
<li class="chapter" data-level="3.8" data-path="counts-import.html"><a href="counts-import.html#assign-our-import-to-a-tibble"><i class="fa fa-check"></i><b>3.8</b> Assign our import to a tibble</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="counts-import.html"><a href="counts-import.html#print-a-peek-to-the-screen"><i class="fa fa-check"></i><b>3.8.1</b> Print a peek to the screen</a></li>
<li class="chapter" data-level="3.8.2" data-path="counts-import.html"><a href="counts-import.html#glimpse-the-data"><i class="fa fa-check"></i><b>3.8.2</b> Glimpse the data</a></li>
<li class="chapter" data-level="3.8.3" data-path="counts-import.html"><a href="counts-import.html#about-the-pipe"><i class="fa fa-check"></i><b>3.8.3</b> About the pipe %&gt;%</a></li>
<li class="chapter" data-level="3.8.4" data-path="counts-import.html"><a href="counts-import.html#what-is-clean-data"><i class="fa fa-check"></i><b>3.8.4</b> What is clean data</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="counts-import.html"><a href="counts-import.html#cleaning-column-names"><i class="fa fa-check"></i><b>3.9</b> Cleaning column names</a></li>
<li class="chapter" data-level="3.10" data-path="counts-import.html"><a href="counts-import.html#fixing-the-date"><i class="fa fa-check"></i><b>3.10</b> Fixing the date</a>
<ul>
<li class="chapter" data-level="3.10.1" data-path="counts-import.html"><a href="counts-import.html#working-with-mutate"><i class="fa fa-check"></i><b>3.10.1</b> Working with mutate()</a></li>
</ul></li>
<li class="chapter" data-level="3.11" data-path="counts-import.html"><a href="counts-import.html#arrange-the-data"><i class="fa fa-check"></i><b>3.11</b> Arrange the data</a></li>
<li class="chapter" data-level="3.12" data-path="counts-import.html"><a href="counts-import.html#selecting-columns"><i class="fa fa-check"></i><b>3.12</b> Selecting columns</a></li>
<li class="chapter" data-level="3.13" data-path="counts-import.html"><a href="counts-import.html#exporting-data"><i class="fa fa-check"></i><b>3.13</b> Exporting data</a>
<ul>
<li class="chapter" data-level="3.13.1" data-path="counts-import.html"><a href="counts-import.html#single-notebook-philosophy"><i class="fa fa-check"></i><b>3.13.1</b> Single-notebook philosophy</a></li>
<li class="chapter" data-level="3.13.2" data-path="counts-import.html"><a href="counts-import.html#exporting-as-rds"><i class="fa fa-check"></i><b>3.13.2</b> Exporting as rds</a></li>
</ul></li>
<li class="chapter" data-level="3.14" data-path="counts-import.html"><a href="counts-import.html#naming-chunks"><i class="fa fa-check"></i><b>3.14</b> Naming chunks</a></li>
<li class="chapter" data-level="3.15" data-path="counts-import.html"><a href="counts-import.html#knit-your-page"><i class="fa fa-check"></i><b>3.15</b> Knit your page</a></li>
<li class="chapter" data-level="3.16" data-path="counts-import.html"><a href="counts-import.html#review-of-what-weve-learned-so-far"><i class="fa fa-check"></i><b>3.16</b> Review of what we’ve learned so far</a></li>
<li class="chapter" data-level="3.17" data-path="counts-import.html"><a href="counts-import.html#whats-next"><i class="fa fa-check"></i><b>3.17</b> What’s next</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="count-analysis.html"><a href="count-analysis.html"><i class="fa fa-check"></i><b>4</b> Summarize with count - analysis</a>
<ul>
<li class="chapter" data-level="4.1" data-path="count-analysis.html"><a href="count-analysis.html#goals-of-this-lesson"><i class="fa fa-check"></i><b>4.1</b> Goals of this lesson</a></li>
<li class="chapter" data-level="4.2" data-path="count-analysis.html"><a href="count-analysis.html#the-questions-well-answer"><i class="fa fa-check"></i><b>4.2</b> The questions we’ll answer</a></li>
<li class="chapter" data-level="4.3" data-path="count-analysis.html"><a href="count-analysis.html#setting-up-an-analysis-notebook"><i class="fa fa-check"></i><b>4.3</b> Setting up an analysis notebook</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="count-analysis.html"><a href="count-analysis.html#import-the-data-on-your-own"><i class="fa fa-check"></i><b>4.3.1</b> Import the data on your own</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="count-analysis.html"><a href="count-analysis.html#introducing-dplyr"><i class="fa fa-check"></i><b>4.4</b> Introducing dplyr</a></li>
<li class="chapter" data-level="4.5" data-path="count-analysis.html"><a href="count-analysis.html#most-appearances"><i class="fa fa-check"></i><b>4.5</b> Most appearances</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="count-analysis.html"><a href="count-analysis.html#group-aggregate"><i class="fa fa-check"></i><b>4.5.1</b> Group &amp; Aggregate</a></li>
<li class="chapter" data-level="4.5.2" data-path="count-analysis.html"><a href="count-analysis.html#summarize"><i class="fa fa-check"></i><b>4.5.2</b> Summarize</a></li>
<li class="chapter" data-level="4.5.3" data-path="count-analysis.html"><a href="count-analysis.html#group-by"><i class="fa fa-check"></i><b>4.5.3</b> Group by</a></li>
<li class="chapter" data-level="4.5.4" data-path="count-analysis.html"><a href="count-analysis.html#arrange-the-results"><i class="fa fa-check"></i><b>4.5.4</b> Arrange the results</a></li>
<li class="chapter" data-level="4.5.5" data-path="count-analysis.html"><a href="count-analysis.html#get-the-top-of-the-list"><i class="fa fa-check"></i><b>4.5.5</b> Get the top of the list</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="count-analysis.html"><a href="count-analysis.html#performersong-with-most-appearances"><i class="fa fa-check"></i><b>4.6</b> Performer/song with most appearances</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="count-analysis.html"><a href="count-analysis.html#introducing-filter"><i class="fa fa-check"></i><b>4.6.1</b> Introducing filter()</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="count-analysis.html"><a href="count-analysis.html#songperformer-with-most-weeks-at-no.-1"><i class="fa fa-check"></i><b>4.7</b> Song/Performer with most weeks at No. 1</a></li>
<li class="chapter" data-level="4.8" data-path="count-analysis.html"><a href="count-analysis.html#performer-with-most-songs-to-reach-no.-1"><i class="fa fa-check"></i><b>4.8</b> Performer with most songs to reach No. 1</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="count-analysis.html"><a href="count-analysis.html#using-distinct"><i class="fa fa-check"></i><b>4.8.1</b> Using distinct()</a></li>
<li class="chapter" data-level="4.8.2" data-path="count-analysis.html"><a href="count-analysis.html#summarize-the-performers"><i class="fa fa-check"></i><b>4.8.2</b> Summarize the performers</a></li>
<li class="chapter" data-level="4.8.3" data-path="count-analysis.html"><a href="count-analysis.html#filter-for-a-good-cutoff"><i class="fa fa-check"></i><b>4.8.3</b> Filter for a good cutoff</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="count-analysis.html"><a href="count-analysis.html#no.-1-hits-in-last-five-years"><i class="fa fa-check"></i><b>4.9</b> No. 1 hits in last five years</a></li>
<li class="chapter" data-level="4.10" data-path="count-analysis.html"><a href="count-analysis.html#top-10-hits-overall"><i class="fa fa-check"></i><b>4.10</b> Top 10 hits overall</a>
<ul>
<li class="chapter" data-level="4.10.1" data-path="count-analysis.html"><a href="count-analysis.html#a-shortcut-count"><i class="fa fa-check"></i><b>4.10.1</b> A shortcut: count()</a></li>
<li class="chapter" data-level="4.10.2" data-path="count-analysis.html"><a href="count-analysis.html#complex-filters"><i class="fa fa-check"></i><b>4.10.2</b> Complex filters</a></li>
</ul></li>
<li class="chapter" data-level="4.11" data-path="count-analysis.html"><a href="count-analysis.html#review-of-what-weve-learned"><i class="fa fa-check"></i><b>4.11</b> Review of what we’ve learned</a></li>
<li class="chapter" data-level="4.12" data-path="count-analysis.html"><a href="count-analysis.html#turn-in-your-project"><i class="fa fa-check"></i><b>4.12</b> Turn in your project</a></li>
<li class="chapter" data-level="4.13" data-path="count-analysis.html"><a href="count-analysis.html#soundtrack-for-this-assignment"><i class="fa fa-check"></i><b>4.13</b> Soundtrack for this assignment</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="sums-import.html"><a href="sums-import.html"><i class="fa fa-check"></i><b>5</b> Summarize with math - import</a>
<ul>
<li class="chapter" data-level="5.1" data-path="sums-import.html"><a href="sums-import.html#about-the-story-military-surplus-transfers"><i class="fa fa-check"></i><b>5.1</b> About the story: Military surplus transfers</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="sums-import.html"><a href="sums-import.html#the-leso-program"><i class="fa fa-check"></i><b>5.1.1</b> The LESO program</a></li>
<li class="chapter" data-level="5.1.2" data-path="sums-import.html"><a href="sums-import.html#about-the-data"><i class="fa fa-check"></i><b>5.1.2</b> About the data</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="sums-import.html"><a href="sums-import.html#the-questions-we-will-answer"><i class="fa fa-check"></i><b>5.2</b> The questions we will answer</a></li>
<li class="chapter" data-level="5.3" data-path="sums-import.html"><a href="sums-import.html#create-your-project"><i class="fa fa-check"></i><b>5.3</b> Create your project</a></li>
<li class="chapter" data-level="5.4" data-path="sums-import.html"><a href="sums-import.html#importcleaning-notebook"><i class="fa fa-check"></i><b>5.4</b> Import/cleaning notebook</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="sums-import.html"><a href="sums-import.html#add-the-goals-of-the-notebook"><i class="fa fa-check"></i><b>5.4.1</b> Add the goals of the notebook</a></li>
<li class="chapter" data-level="5.4.2" data-path="sums-import.html"><a href="sums-import.html#add-a-setup-section"><i class="fa fa-check"></i><b>5.4.2</b> Add a setup section</a></li>
<li class="chapter" data-level="5.4.3" data-path="sums-import.html"><a href="sums-import.html#download-the-data"><i class="fa fa-check"></i><b>5.4.3</b> Download the data</a></li>
<li class="chapter" data-level="5.4.4" data-path="sums-import.html"><a href="sums-import.html#import-the-data-1"><i class="fa fa-check"></i><b>5.4.4</b> Import the data</a></li>
<li class="chapter" data-level="5.4.5" data-path="sums-import.html"><a href="sums-import.html#glimpse-the-data-1"><i class="fa fa-check"></i><b>5.4.5</b> Glimpse the data</a></li>
<li class="chapter" data-level="5.4.6" data-path="sums-import.html"><a href="sums-import.html#remove-unnecessary-columns"><i class="fa fa-check"></i><b>5.4.6</b> Remove unnecessary columns</a></li>
<li class="chapter" data-level="5.4.7" data-path="sums-import.html"><a href="sums-import.html#create-a-total_value-column"><i class="fa fa-check"></i><b>5.4.7</b> Create a total_value column</a></li>
<li class="chapter" data-level="5.4.8" data-path="sums-import.html"><a href="sums-import.html#filtering-our-data"><i class="fa fa-check"></i><b>5.4.8</b> Filtering our data</a></li>
<li class="chapter" data-level="5.4.9" data-path="sums-import.html"><a href="sums-import.html#export-cleaned-data"><i class="fa fa-check"></i><b>5.4.9</b> Export cleaned data</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="sums-import.html"><a href="sums-import.html#things-we-learned-in-this-lesson"><i class="fa fa-check"></i><b>5.5</b> Things we learned in this lesson</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="sums-analyze.html"><a href="sums-analyze.html"><i class="fa fa-check"></i><b>6</b> Summarize with math - analysis</a>
<ul>
<li class="chapter" data-level="6.1" data-path="sums-analyze.html"><a href="sums-analyze.html#learning-goals-of-this-lesson-1"><i class="fa fa-check"></i><b>6.1</b> Learning goals of this lesson</a></li>
<li class="chapter" data-level="6.2" data-path="sums-analyze.html"><a href="sums-analyze.html#questions-to-answer"><i class="fa fa-check"></i><b>6.2</b> Questions to answer</a></li>
<li class="chapter" data-level="6.3" data-path="sums-analyze.html"><a href="sums-analyze.html#set-up-the-analysis-notebook"><i class="fa fa-check"></i><b>6.3</b> Set up the analysis notebook</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="sums-analyze.html"><a href="sums-analyze.html#load-the-data-into-a-tibble"><i class="fa fa-check"></i><b>6.3.1</b> Load the data into a tibble</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="sums-analyze.html"><a href="sums-analyze.html#how-to-tackle-summaries"><i class="fa fa-check"></i><b>6.4</b> How to tackle summaries</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="sums-analyze.html"><a href="sums-analyze.html#summaries-with-math"><i class="fa fa-check"></i><b>6.4.1</b> Summaries with math</a></li>
<li class="chapter" data-level="6.4.2" data-path="sums-analyze.html"><a href="sums-analyze.html#add-the-total_value"><i class="fa fa-check"></i><b>6.4.2</b> Add the total_value</a></li>
<li class="chapter" data-level="6.4.3" data-path="sums-analyze.html"><a href="sums-analyze.html#arrange-the-results-1"><i class="fa fa-check"></i><b>6.4.3</b> Arrange the results</a></li>
<li class="chapter" data-level="6.4.4" data-path="sums-analyze.html"><a href="sums-analyze.html#consider-the-results"><i class="fa fa-check"></i><b>6.4.4</b> Consider the results</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="sums-analyze.html"><a href="sums-analyze.html#looking-a-local-agencies"><i class="fa fa-check"></i><b>6.5</b> Looking a local agencies</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="sums-analyze.html"><a href="sums-analyze.html#filtering-within-a-vector"><i class="fa fa-check"></i><b>6.5.1</b> Filtering within a vector</a></li>
<li class="chapter" data-level="6.5.2" data-path="sums-analyze.html"><a href="sums-analyze.html#use-the-vector-to-build-this-filter"><i class="fa fa-check"></i><b>6.5.2</b> Use the vector to build this filter</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="sums-analyze.html"><a href="sums-analyze.html#item-quantities-totals-for-local-agencies"><i class="fa fa-check"></i><b>6.6</b> Item quantities, totals for local agencies</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="sums-analyze.html"><a href="sums-analyze.html#build-the-lists-for-other-agencies"><i class="fa fa-check"></i><b>6.6.1</b> Build the lists for other agencies</a></li>
<li class="chapter" data-level="6.6.2" data-path="sums-analyze.html"><a href="sums-analyze.html#google-some-interesting-items"><i class="fa fa-check"></i><b>6.6.2</b> Google some interesting items</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="sums-analyze.html"><a href="sums-analyze.html#write-a-data-drop"><i class="fa fa-check"></i><b>6.7</b> Write a data drop</a></li>
<li class="chapter" data-level="6.8" data-path="sums-analyze.html"><a href="sums-analyze.html#what-we-learned-in-this-chapter"><i class="fa fa-check"></i><b>6.8</b> What we learned in this chapter</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="plots.html"><a href="plots.html"><i class="fa fa-check"></i><b>7</b> Plots</a>
<ul>
<li class="chapter" data-level="7.1" data-path="plots.html"><a href="plots.html#updates-needed"><i class="fa fa-check"></i><b>7.1</b> UPDATES NEEDED</a></li>
<li class="chapter" data-level="7.2" data-path="plots.html"><a href="plots.html#goals-for-this-section"><i class="fa fa-check"></i><b>7.2</b> Goals for this section</a></li>
<li class="chapter" data-level="7.3" data-path="plots.html"><a href="plots.html#introduction-ggplot"><i class="fa fa-check"></i><b>7.3</b> Introduction ggplot</a></li>
<li class="chapter" data-level="7.4" data-path="plots.html"><a href="plots.html#the-basic-ggplot-template"><i class="fa fa-check"></i><b>7.4</b> The basic ggplot template</a></li>
<li class="chapter" data-level="7.5" data-path="plots.html"><a href="plots.html#lets-plot"><i class="fa fa-check"></i><b>7.5</b> Let’s plot!</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="plots.html"><a href="plots.html#set-up-our-notebook"><i class="fa fa-check"></i><b>7.5.1</b> Set up our Notebook</a></li>
<li class="chapter" data-level="7.5.2" data-path="plots.html"><a href="plots.html#scatterplot"><i class="fa fa-check"></i><b>7.5.2</b> Scatterplot</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="plots.html"><a href="plots.html#plotting-our-wells-data"><i class="fa fa-check"></i><b>7.6</b> Plotting our wells data</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="plots.html"><a href="plots.html#total-wells-per-county"><i class="fa fa-check"></i><b>7.6.1</b> Total wells per county</a></li>
<li class="chapter" data-level="7.6.2" data-path="plots.html"><a href="plots.html#add-a-layer-of-text-labels"><i class="fa fa-check"></i><b>7.6.2</b> Add a layer of text labels</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="plots.html"><a href="plots.html#wells-per-county-over-time"><i class="fa fa-check"></i><b>7.7</b> Wells per county over time</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="plots.html"><a href="plots.html#work-up-the-data-frame"><i class="fa fa-check"></i><b>7.7.1</b> Work up the data frame</a></li>
<li class="chapter" data-level="7.7.2" data-path="plots.html"><a href="plots.html#draw-the-plot"><i class="fa fa-check"></i><b>7.7.2</b> Draw the plot</a></li>
<li class="chapter" data-level="7.7.3" data-path="plots.html"><a href="plots.html#your-turn-add-layers"><i class="fa fa-check"></i><b>7.7.3</b> Your turn: Add layers</a></li>
<li class="chapter" data-level="7.7.4" data-path="plots.html"><a href="plots.html#dates-as-numbers-and-the-problems-they-cause"><i class="fa fa-check"></i><b>7.7.4</b> Dates as numbers and the problems they cause</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="plots.html"><a href="plots.html#your-turn-build-a-line-chart"><i class="fa fa-check"></i><b>7.8</b> Your turn: Build a line chart</a></li>
<li class="chapter" data-level="7.9" data-path="plots.html"><a href="plots.html#review-of-ggplot"><i class="fa fa-check"></i><b>7.9</b> Review of ggplot</a></li>
<li class="chapter" data-level="7.10" data-path="plots.html"><a href="plots.html#plotly-for-more-interactive-graphics"><i class="fa fa-check"></i><b>7.10</b> Plotly for more interactive graphics</a>
<ul>
<li class="chapter" data-level="7.10.1" data-path="plots.html"><a href="plots.html#ggplotly"><i class="fa fa-check"></i><b>7.10.1</b> ggplotly</a></li>
<li class="chapter" data-level="7.10.2" data-path="plots.html"><a href="plots.html#more-with-plot_ly-function"><i class="fa fa-check"></i><b>7.10.2</b> More with <code>plot_ly()</code> function</a></li>
<li class="chapter" data-level="7.10.3" data-path="plots.html"><a href="plots.html#plotlys-freemium-model"><i class="fa fa-check"></i><b>7.10.3</b> Plotly’s freemium model</a></li>
</ul></li>
<li class="chapter" data-level="7.11" data-path="plots.html"><a href="plots.html#resources"><i class="fa fa-check"></i><b>7.11</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html"><i class="fa fa-check"></i><b>8</b> How to tackle a new dataset</a>
<ul>
<li class="chapter" data-level="8.1" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#start-by-listing-questions"><i class="fa fa-check"></i><b>8.1</b> Start by listing questions</a></li>
<li class="chapter" data-level="8.2" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#understand-your-data"><i class="fa fa-check"></i><b>8.2</b> Understand your data</a></li>
<li class="chapter" data-level="8.3" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#counting-and-aggregation"><i class="fa fa-check"></i><b>8.3</b> Counting and aggregation</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#counting-rows-based-on-a-column"><i class="fa fa-check"></i><b>8.3.1</b> Counting rows based on a column</a></li>
<li class="chapter" data-level="8.3.2" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#sum-mean-and-other-aggregations"><i class="fa fa-check"></i><b>8.3.2</b> Sum, mean and other aggregations</a></li>
<li class="chapter" data-level="8.3.3" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#creating-columns-to-show-difference"><i class="fa fa-check"></i><b>8.3.3</b> Creating columns to show difference</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#cleaning-up-categorical-data"><i class="fa fa-check"></i><b>8.4</b> Cleaning up categorical data</a></li>
<li class="chapter" data-level="8.5" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#time-as-a-variable"><i class="fa fa-check"></i><b>8.5</b> Time as a variable</a></li>
<li class="chapter" data-level="8.6" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#explore-the-distributions-in-your-data"><i class="fa fa-check"></i><b>8.6</b> Explore the distributions in your data</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#more-on-histograms"><i class="fa fa-check"></i><b>8.6.1</b> More on histograms</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="verbs.html"><a href="verbs.html"><i class="fa fa-check"></i><b>9</b> Verbs</a>
<ul>
<li class="chapter" data-level="9.1" data-path="verbs.html"><a href="verbs.html#importexport"><i class="fa fa-check"></i><b>9.1</b> Import/Export</a></li>
<li class="chapter" data-level="9.2" data-path="verbs.html"><a href="verbs.html#data-manipulation"><i class="fa fa-check"></i><b>9.2</b> Data manipulation</a></li>
<li class="chapter" data-level="9.3" data-path="verbs.html"><a href="verbs.html#aggregation"><i class="fa fa-check"></i><b>9.3</b> Aggregation</a></li>
<li class="chapter" data-level="9.4" data-path="verbs.html"><a href="verbs.html#math"><i class="fa fa-check"></i><b>9.4</b> Math</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="chart-examples.html"><a href="chart-examples.html"><i class="fa fa-check"></i><b>10</b> Chart examples</a>
<ul>
<li class="chapter" data-level="10.1" data-path="chart-examples.html"><a href="chart-examples.html#bar-charts"><i class="fa fa-check"></i><b>10.1</b> Bar charts</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="chart-examples.html"><a href="chart-examples.html#explanaton"><i class="fa fa-check"></i><b>10.1.1</b> Explanaton</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="chart-examples.html"><a href="chart-examples.html#column-chart"><i class="fa fa-check"></i><b>10.2</b> Column chart</a></li>
<li class="chapter" data-level="10.3" data-path="chart-examples.html"><a href="chart-examples.html#a-line-chart"><i class="fa fa-check"></i><b>10.3</b> A line chart</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="chart-examples.html"><a href="chart-examples.html#explanation"><i class="fa fa-check"></i><b>10.3.1</b> Explanation</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="chart-examples.html"><a href="chart-examples.html#scatterplot-1"><i class="fa fa-check"></i><b>10.4</b> Scatterplot</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="chart-examples.html"><a href="chart-examples.html#explanation-1"><i class="fa fa-check"></i><b>10.4.1</b> Explanation</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="chart-examples.html"><a href="chart-examples.html#histogram"><i class="fa fa-check"></i><b>10.5</b> Histogram</a></li>
<li class="chapter" data-level="10.6" data-path="chart-examples.html"><a href="chart-examples.html#titles-labels-and-other-cleanup"><i class="fa fa-check"></i><b>10.6</b> Titles, labels and other cleanup</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="chart-examples.html"><a href="chart-examples.html#title-and-axis-labels"><i class="fa fa-check"></i><b>10.6.1</b> Title and axis labels</a></li>
<li class="chapter" data-level="10.6.2" data-path="chart-examples.html"><a href="chart-examples.html#flip-the-graphic"><i class="fa fa-check"></i><b>10.6.2</b> Flip the graphic</a></li>
<li class="chapter" data-level="10.6.3" data-path="chart-examples.html"><a href="chart-examples.html#fix-exponential-numbers-on-an-axis"><i class="fa fa-check"></i><b>10.6.3</b> Fix exponential numbers on an axis</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="chart-examples.html"><a href="chart-examples.html#interactivity-with-plotly"><i class="fa fa-check"></i><b>10.7</b> Interactivity with plotly</a></li>
<li class="chapter" data-level="10.8" data-path="chart-examples.html"><a href="chart-examples.html#resources-1"><i class="fa fa-check"></i><b>10.8</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="publishing-your-findings.html"><a href="publishing-your-findings.html"><i class="fa fa-check"></i><b>11</b> Publishing your findings</a>
<ul>
<li class="chapter" data-level="11.1" data-path="publishing-your-findings.html"><a href="publishing-your-findings.html#examples"><i class="fa fa-check"></i><b>11.1</b> Examples</a></li>
<li class="chapter" data-level="11.2" data-path="publishing-your-findings.html"><a href="publishing-your-findings.html#how-to-publish-your-projects"><i class="fa fa-check"></i><b>11.2</b> How to publish your projects</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="publishing-your-findings.html"><a href="publishing-your-findings.html#using-github-pages"><i class="fa fa-check"></i><b>11.2.1</b> Using Github Pages</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="publishing-your-findings.html"><a href="publishing-your-findings.html#making-branded-graphics"><i class="fa fa-check"></i><b>11.3</b> Making branded graphics</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Reporting with Data in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="plots" class="section level1" number="7">
<h1><span class="header-section-number">Chapter 7</span> Plots</h1>
<div id="updates-needed" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> UPDATES NEEDED</h2>
<ul>
<li>Keep mph for explaning idea</li>
<li>Build quick geom_col with princess. Have them do with ice cream</li>
<li>Use hihger ed tidy tuesday data for a tour of ggplot (might be a chapter of it’s own)</li>
<li>Use skittles with tidy chaper (definitely a chapter of its own)</li>
</ul>
<blockquote>
<p>PREVIOUS DRAFT</p>
</blockquote>
</div>
<div id="goals-for-this-section" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Goals for this section</h2>
<ul>
<li>An introduction to the Grammar of Graphics</li>
<li>We’ll make charts!</li>
</ul>
</div>
<div id="introduction-ggplot" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> Introduction ggplot</h2>
<p><a href="https://ggplot2.tidyverse.org/">ggplot2</a> is the data visualization library within Hadley Wickham’s <a href="https://www.tidyverse.org/">tidyverse</a>. It uses a concept called the <a href="https://byrneslab.net/classes/biol607/readings/wickham_layered-grammar.pdf">Grammar of Graphics</a>, the idea that you can build every graph from the same components: a data set, a coordinate system, and geoms – the visual marks that represent data points. With a hat tip to <a href="http://www.mattwaite.com/">Matt Waite</a>, the main concepts are:</p>
<p>In making the chart:</p>
<ul>
<li><strong>data</strong>: which data you are pulling from for the chart.</li>
<li><strong>aesthetics</strong>: the specific data from the data which we are going to plot. What is on x axis, what is on y axis.</li>
<li><strong>geometries</strong>: the shape the data is going to take. lines, columns, points.</li>
<li><strong>scales</strong>: any transformations we might make on the data.</li>
<li><strong>layers</strong>: how we might lay multiple geometries over top of each other to reveal new information.</li>
<li><strong>facets</strong>: which means how we might graph many elements of the same data set in the same space</li>
</ul>
<p>The challenge to understand here is for every graphic, we start with the data, and then describe how to layer plots or pieces on top of that data.</p>
</div>
<div id="the-basic-ggplot-template" class="section level2" number="7.4">
<h2><span class="header-section-number">7.4</span> The basic ggplot template</h2>
<blockquote>
<p>I hate going over the long version. maybe just do it.</p>
</blockquote>
<p>The template for a basic plot is this. (The <code>&lt;&gt;</code> denote that we are inserting values there.)</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="plots.html#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> <span class="sc">&lt;</span>DATA<span class="sc">&gt;</span>, <span class="fu">aes</span>(<span class="at">mapping =</span> <span class="sc">&lt;</span>MAPPINGS<span class="sc">&gt;</span>)) <span class="sc">+</span></span>
<span id="cb124-2"><a href="plots.html#cb124-2" aria-hidden="true" tabindex="-1"></a>  <span class="er">&lt;</span>GEOM<span class="sc">&gt;</span>(<span class="sc">&lt;</span>ADDITONAL_MAPPINGS<span class="sc">&gt;</span>)</span></code></pre></div>
<ul>
<li><strong><code>ggplot()</code></strong> is our function. We feed into it the data we wish to plot.</li>
<li><strong><code>aes()</code></strong> stands for “aesthetics,” and it describes the column of data we want to plot, and how, like which column is on the <strong>x axis</strong> and which is on the <strong>y axis</strong>. These are called <strong>mappings</strong>, which we show in our template with <strong><code>&lt;MAPPINGS&gt;</code></strong>. They typically look like this: <code>aes(x = col_name_x, y = col_name_y)</code>. Now matter what type of chart we are building (bar chart, scatterplot, etc) we have to tell it which columns to show on the chart.</li>
<li>The <strong><code>+</code></strong> is the equivalent of <code>%&gt;%</code> in our tidyverse data. It means we are adding a layer, and it should always be at the end of the line, not at the beginning of the next.</li>
<li><strong><code>&lt;GEOM_FUNCTION&gt;</code></strong> is the type of chart or addition we are adding. They all start with the term <strong>geom_</strong> like <strong><code>geom_bar</code></strong>, which is what we will build with this example. It will take the mappings we supplied and plot them on the type of <strong>geom_</strong> we choose.</li>
<li><strong><code>&lt;ADDITIONAL MAPPINGS&gt;</code></strong> if a geom_ requires it, we can specify additional columns/axis mapping combinations to that <strong>geom_</strong>. We don’t always have or need them.</li>
</ul>
<p>There are some ways to simplify this, and some ways to complicate it. Let’s simplify first:</p>
<ul>
<li>It is implied that the first thing fed to <code>ggplot</code> is the data, so you don’t have to write out <code>data =</code> unless there is ambiguity.</li>
<li>The <code>aes()</code> values are also implied as mappings, so you don’t have to write out <code>mapping =</code> unless there is ambiguity.</li>
</ul>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="plots.html#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="sc">&lt;</span>DATA<span class="sc">&gt;</span>, <span class="fu">aes</span>(<span class="sc">&lt;</span>MAPPINGS<span class="sc">&gt;</span>) <span class="sc">+</span></span>
<span id="cb125-2"><a href="plots.html#cb125-2" aria-hidden="true" tabindex="-1"></a>  <span class="er">&lt;</span>GEOM<span class="sc">&gt;</span></span>
<span id="cb125-3"><a href="plots.html#cb125-3" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>One of the ways we make things complicated, is we layer different geometries. We might start with a scatterplot, and then add a reference line on top of it, which is a new geometry. Each <strong>geom_</strong> can specify their own mappings.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="plots.html#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="sc">&lt;</span>DATA<span class="sc">&gt;</span>, <span class="fu">aes</span>(<span class="sc">&lt;</span>MAPPINGS<span class="sc">&gt;</span>)) <span class="sc">+</span></span>
<span id="cb126-2"><a href="plots.html#cb126-2" aria-hidden="true" tabindex="-1"></a>  <span class="er">&lt;</span>GEOM_FUNCTION<span class="sc">&gt;</span>(<span class="fu">aes</span>(<span class="sc">&lt;</span>SPECIFIC_MAPPINGS<span class="sc">&gt;</span>)) <span class="sc">+</span></span>
<span id="cb126-3"><a href="plots.html#cb126-3" aria-hidden="true" tabindex="-1"></a>  <span class="er">&lt;</span>GEOM_FUNCTION<span class="sc">&gt;</span>(<span class="fu">aes</span>(<span class="sc">&lt;</span>SPECIFIC_MAPPINGS<span class="sc">&gt;</span>))</span></code></pre></div>
</div>
<div id="lets-plot" class="section level2" number="7.5">
<h2><span class="header-section-number">7.5</span> Let’s plot!</h2>
<div id="set-up-our-notebook" class="section level3" number="7.5.1">
<h3><span class="header-section-number">7.5.1</span> Set up our Notebook</h3>
<ul>
<li>Create a new RNotebook. Title it “Wells visualizations” and name the file <code>04-charts.Rmd</code>.</li>
<li>Load the following libraries: tidyverse, lubridate.</li>
</ul>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="plots.html#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</code></pre>
<pre><code>## ✓ ggplot2 3.3.5     ✓ purrr   0.3.4
## ✓ tibble  3.1.4     ✓ dplyr   1.0.7
## ✓ tidyr   1.1.3     ✓ stringr 1.4.0
## ✓ readr   2.0.1     ✓ forcats 0.5.1</code></pre>
<pre><code>## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="plots.html#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;lubridate&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     date, intersect, setdiff, union</code></pre>
</div>
<div id="scatterplot" class="section level3" number="7.5.2">
<h3><span class="header-section-number">7.5.2</span> Scatterplot</h3>
<p>One of the better ways to see this in action for the first time is build a scatterplot showing the relationship between two numbers. Unfortunately, our wells data does not have two such values, so we’ll explore this using a data set that is already built into ggplot2, <strong>mpg</strong>.</p>
<p>Take a look at the <strong>mpg</strong> by calling it like a data frame.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="plots.html#cb134-1" aria-hidden="true" tabindex="-1"></a>mpg</span></code></pre></div>
<p>It looks something like this, which shows the first and last couple of rows:</p>
<table>
<thead>
<tr class="header">
<th>manufacturer</th>
<th>model</th>
<th>displ</th>
<th>year</th>
<th>cyl</th>
<th>trans</th>
<th>drv</th>
<th>cty</th>
<th>hwy</th>
<th>fl</th>
<th>class</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>audi</td>
<td>a4</td>
<td>1.8</td>
<td>1999</td>
<td>4</td>
<td>auto(l5)</td>
<td>f</td>
<td>18</td>
<td>29</td>
<td>p</td>
<td>compact</td>
</tr>
<tr class="even">
<td>audi</td>
<td>a4</td>
<td>1.8</td>
<td>1999</td>
<td>4</td>
<td>manual(m5)</td>
<td>f</td>
<td>21</td>
<td>29</td>
<td>p</td>
<td>compact</td>
</tr>
<tr class="odd">
<td>audi</td>
<td>a4</td>
<td>2</td>
<td>2008</td>
<td>4</td>
<td>manual(m6)</td>
<td>f</td>
<td>20</td>
<td>31</td>
<td>p</td>
<td>compact</td>
</tr>
<tr class="even">
<td>audi</td>
<td>a4</td>
<td>2</td>
<td>2008</td>
<td>4</td>
<td>auto(av)</td>
<td>f</td>
<td>21</td>
<td>30</td>
<td>p</td>
<td>compact</td>
</tr>
<tr class="odd">
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>.</td>
<td>…</td>
<td>.</td>
<td>..</td>
<td>..</td>
<td>.</td>
<td>…</td>
</tr>
<tr class="even">
<td>volkswagen</td>
<td>passat</td>
<td>2</td>
<td>2008</td>
<td>4</td>
<td>manual(m6)</td>
<td>f</td>
<td>21</td>
<td>29</td>
<td>p</td>
<td>midsize</td>
</tr>
<tr class="odd">
<td>volkswagen</td>
<td>passat</td>
<td>2.8</td>
<td>1999</td>
<td>6</td>
<td>auto(l5)</td>
<td>f</td>
<td>16</td>
<td>26</td>
<td>p</td>
<td>midsize</td>
</tr>
<tr class="even">
<td>volkswagen</td>
<td>passat</td>
<td>2.8</td>
<td>1999</td>
<td>6</td>
<td>manual(m5)</td>
<td>f</td>
<td>18</td>
<td>26</td>
<td>p</td>
<td>midsize</td>
</tr>
<tr class="odd">
<td>volkswagen</td>
<td>passat</td>
<td>3.6</td>
<td>2008</td>
<td>6</td>
<td>auto(s6)</td>
<td>f</td>
<td>17</td>
<td>26</td>
<td>p</td>
<td>midsize</td>
</tr>
</tbody>
</table>
<p>The data is a subset of fuel economy data from 1999 and 2008 for 38 popular cars. Don’t get too hung up on the data, it is just for examples.</p>
<p>The size of an engine is shown in the column <code>displ</code>. The Audi A4 has a 1.8 liter engine. The column <code>hwy</code> is the fuel rating for highways. Well also us the <code>class</code> column, which categorizes the type of vehicle.</p>
<p>What kind of relationship might you expect between the size of the engine and highway mileage?</p>
<p>Let’s use our plot to show this. If our basic template is like this:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="plots.html#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="sc">&lt;</span>DATA<span class="sc">&gt;</span>, <span class="fu">aes</span>(<span class="sc">&lt;</span>MAPPINGS<span class="sc">&gt;</span>) <span class="sc">+</span></span>
<span id="cb135-2"><a href="plots.html#cb135-2" aria-hidden="true" tabindex="-1"></a>  <span class="er">&lt;</span>GEOM<span class="sc">&gt;</span></span></code></pre></div>
<p>Now, let’s put our data in here. Our goal here is to show how the <strong>hwy</strong> number (y axis) changes as the <strong>displ</strong> number gets bigger (x axis.)</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="plots.html#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb136-2"><a href="plots.html#cb136-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="07-plots_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>We can see there is a relationships of sort here, but ggplot has some additional geometries to help us see this, including <a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html"><code>geom_smooth()</code></a>. Since we have already the mappings in the main <code>ggplot()</code> call, all we have to do is add the new geom.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="plots.html#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb137-2"><a href="plots.html#cb137-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb137-3"><a href="plots.html#cb137-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="co"># new plot. don&#39;t forget the + on previous line</span></span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="07-plots_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Let’s add one more visual cue (or aesthetic) to this graphic by coloring the dots based on the <code>class</code> of the vehicle. Since we want this aesthetic to apply only to the <code>geom_point()</code>, we have to add the <code>aes()</code> value there.</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="plots.html#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb139-2"><a href="plots.html#cb139-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> class)) <span class="sc">+</span> <span class="co"># added color aesthetic</span></span>
<span id="cb139-3"><a href="plots.html#cb139-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="07-plots_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Looking at that graphic, what values might you want to learn more about?</p>
</div>
</div>
<div id="plotting-our-wells-data" class="section level2" number="7.6">
<h2><span class="header-section-number">7.6</span> Plotting our wells data</h2>
<p>For bar charts and line charts, we can return to our wells data, so let’s import what we had from our last notebook.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="plots.html#cb141-1" aria-hidden="true" tabindex="-1"></a>wells <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data-out/wells_03.rds&quot;</span>)</span></code></pre></div>
<div id="total-wells-per-county" class="section level3" number="7.6.1">
<h3><span class="header-section-number">7.6.1</span> Total wells per county</h3>
<div id="shape-our-data" class="section level4" number="7.6.1.1">
<h4><span class="header-section-number">7.6.1.1</span> Shape our data</h4>
<p>If we are plotting wells per county, we need to first build a data frame that counts the number of wells for each county. We can use the same <code>count()</code> function that we used when we cleaned our data.</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="plots.html#cb142-1" aria-hidden="true" tabindex="-1"></a>wells_by_county <span class="ot">&lt;-</span> wells <span class="sc">%&gt;%</span> </span>
<span id="cb142-2"><a href="plots.html#cb142-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(county) <span class="sc">%&gt;%</span> </span>
<span id="cb142-3"><a href="plots.html#cb142-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">wells_count =</span> n)</span>
<span id="cb142-4"><a href="plots.html#cb142-4" aria-hidden="true" tabindex="-1"></a>wells_by_county</span></code></pre></div>
<p>Let’s break this down:</p>
<ul>
<li>The first line creates the new data frame <code>wells_by_county</code>, starting with our <code>wells</code> data frame.</li>
<li>We apply the <code>count()</code> function on the “county” column. This makes our basic pivot table.</li>
<li>On the third line, we rename the “n” column that was created by <code>count()</code>, so it is more descriptive, calling it <code>wells_count</code>.</li>
<li>So now we have a data frame with two columns: <strong>county</strong> and <strong>wells_count</strong>. We print it on the fourth line so we can inspect it.</li>
</ul>
</div>
<div id="plot-our-wells-by-county" class="section level4" number="7.6.1.2">
<h4><span class="header-section-number">7.6.1.2</span> Plot our wells by county</h4>
<p>Here is the verbose plot for our counties.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="plots.html#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> wells_by_county) <span class="sc">+</span></span>
<span id="cb143-2"><a href="plots.html#cb143-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> county, <span class="at">y =</span> wells_count), <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>)</span></code></pre></div>
<ul>
<li>On the first line we tell <code>ggplot()</code> that we are using the we <code>wells_by_county</code> data.</li>
<li>On the next, we apply the <code>geom_bar()</code> function to make a bar chart. It needs two things:
<ul>
<li>The mapping, which are the aesthetics. We well it to plot <strong>county</strong> on the x (horizontal) axis, and <strong>wells_count</strong> on the y (vertical) axis.</li>
<li>Because <strong>county</strong> is a category instead of a number, we have to use the <code>stat = "identity"</code> value to describe that we are using values within county to separate the bars. This is a special thing for bar charts. One of those things that drive you nuts.</li>
</ul></li>
</ul>
<div class="figure">
<img src="images/visualize-county-plot.png" alt="" />
<p class="caption">Basic county plot</p>
</div>
<p>Our less verbose way to do this looks like this:</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="plots.html#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(wells_by_county, <span class="fu">aes</span>(<span class="at">x=</span>county, <span class="at">y=</span>wells_count)) <span class="sc">+</span></span>
<span id="cb144-2"><a href="plots.html#cb144-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="add-a-layer-of-text-labels" class="section level3" number="7.6.2">
<h3><span class="header-section-number">7.6.2</span> Add a layer of text labels</h3>
<p>For each new thing that we add to our graphic, we add it with <code>+</code>. In this case, we want to add number labels to show the wells_count for that county.</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="plots.html#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> wells_by_county, <span class="fu">aes</span>(<span class="at">x =</span> county, <span class="at">y =</span> wells_count)) <span class="sc">+</span></span>
<span id="cb145-2"><a href="plots.html#cb145-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb145-3"><a href="plots.html#cb145-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label=</span>wells_count), <span class="at">vjust=</span><span class="sc">-</span><span class="fl">0.25</span>) <span class="co"># adds the numbers on bars</span></span></code></pre></div>
<div class="figure">
<img src="images/visualize-county-plot-labels.png" alt="" />
<p class="caption">Basic county plot</p>
</div>
<p>In this case, we are just adding another layer, the <code>geom_text()</code>. It requires some additional aesthetics, like what <code>label=</code> we want to use. The <code>vjust=</code> moves the numbers up a little. Change the number and see what happens.</p>
<p>The last layer we want to add here is a Title layer. The function for labels is called <code>labs()</code> and it takes an argument of <code>title = ""</code> You can also change your <code>x</code> and <code>y</code> axis names, etc.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="plots.html#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> wells_by_county, <span class="fu">aes</span>(<span class="at">x =</span> county, <span class="at">y =</span> wells_count)) <span class="sc">+</span></span>
<span id="cb146-2"><a href="plots.html#cb146-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb146-3"><a href="plots.html#cb146-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label=</span>wells_count), <span class="at">vjust=</span><span class="sc">-</span><span class="fl">0.25</span>)</span>
<span id="cb146-4"><a href="plots.html#cb146-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Number of wells drilled by county&quot;</span>) <span class="co"># adds the title</span></span></code></pre></div>
<div class="figure">
<img src="images/visualize-county-by-year-done.png" alt="" />
<p class="caption">Wells by county with title</p>
</div>
<p>Congratulations! You made your first <code>ggplot()</code> chart. Not particularly revealing, but it does show that Travis County has WAY more wells than the other counties.</p>
<p>Let’s see how those trends play out over time.</p>
</div>
</div>
<div id="wells-per-county-over-time" class="section level2" number="7.7">
<h2><span class="header-section-number">7.7</span> Wells per county over time</h2>
<p>Our next chart will be a line chart to show how the number of wells drilled has changed over time within each county.</p>
<p>Again, it will help us to think about what we are after and then build our data frame to match. In this case, we want to plot the “number of wells” for each county, by year. That means we need a data frame that has columns for county, year and the number of wells. To get that, we have to use group and summarize.</p>
<p>Sometimes it helps to write out the steps of everything before you to do it.</p>
<ul>
<li>Start with the <code>wells</code> data frame.</li>
<li>Filter to 2003 or later, because that’s when the <a href="http://www.twdb.texas.gov/groundwater/data/drillersdb.asp">system came online</a>.</li>
<li>Group by the <code>county</code> and <code>year_drilled</code> fields.</li>
<li>Summarize to create a count of the number of <code>wells_drilled</code>.</li>
<li>Set all of the above to a new data frame, <code>wells_county_year</code>.</li>
<li>Start a plot with the new data.</li>
<li>Set x (horizontal) to be year_drilled and y (vertical) to be wells_drilled, and color to be the county.</li>
</ul>
<div id="work-up-the-data-frame" class="section level3" number="7.7.1">
<h3><span class="header-section-number">7.7.1</span> Work up the data frame</h3>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="plots.html#cb147-1" aria-hidden="true" tabindex="-1"></a>wells <span class="sc">%&gt;%</span> </span>
<span id="cb147-2"><a href="plots.html#cb147-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year_drilled <span class="sc">&gt;=</span> <span class="dv">2003</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb147-3"><a href="plots.html#cb147-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(county, year_drilled) <span class="sc">%&gt;%</span> </span>
<span id="cb147-4"><a href="plots.html#cb147-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb147-5"><a href="plots.html#cb147-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">wells_drilled =</span> <span class="fu">n</span>()</span>
<span id="cb147-6"><a href="plots.html#cb147-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p>This gives you a table similar to this:</p>
<table>
<thead>
<tr class="header">
<th align="left">county</th>
<th align="left">year_drilled</th>
<th align="right">wells_drilled</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Bastrop</td>
<td align="left">2003</td>
<td align="right">110</td>
</tr>
<tr class="even">
<td align="left">Bastrop</td>
<td align="left">2004</td>
<td align="right">99</td>
</tr>
<tr class="odd">
<td align="left">Bastrop</td>
<td align="left">2005</td>
<td align="right">97</td>
</tr>
<tr class="even">
<td align="left">…</td>
<td align="left">…</td>
<td align="right">…</td>
</tr>
<tr class="odd">
<td align="left">Caldwell</td>
<td align="left">2003</td>
<td align="right">40</td>
</tr>
<tr class="even">
<td align="left">Caldwell</td>
<td align="left">2004</td>
<td align="right">32</td>
</tr>
<tr class="odd">
<td align="left">Caldwell</td>
<td align="left">2005</td>
<td align="right">40</td>
</tr>
</tbody>
</table>
<p>We call this <em>long</em> data, because each row contains a single observation, instead of <em>wide</em> data, which would have a column for each observation.</p>
<p>Once you are have the data formatted, set it to fill a new data frame called <code>wells_county_year</code>.</p>
</div>
<div id="draw-the-plot" class="section level3" number="7.7.2">
<h3><span class="header-section-number">7.7.2</span> Draw the plot</h3>
<p>Remember the formula for a basic plot:</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="plots.html#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="sc">&lt;</span>DATA<span class="sc">&gt;</span>, <span class="fu">aes</span>(<span class="sc">&lt;</span>MAPPINGS<span class="sc">&gt;</span>)) <span class="sc">+</span></span>
<span id="cb148-2"><a href="plots.html#cb148-2" aria-hidden="true" tabindex="-1"></a>  <span class="er">&lt;</span>GEOM_FUNCTION<span class="sc">&gt;</span></span></code></pre></div>
<p>and if all our mappings are the same, they can go into the ggplot function.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="plots.html#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(wells_county_year, <span class="fu">aes</span>(<span class="at">x=</span>year_drilled, <span class="at">y=</span>wells_drilled)) <span class="sc">+</span></span>
<span id="cb149-2"><a href="plots.html#cb149-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color=</span>county)) <span class="sc">+</span></span>
<span id="cb149-3"><a href="plots.html#cb149-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Wells by county and year&quot;</span>, <span class="at">x =</span> <span class="st">&quot;Year&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Number of wells&quot;</span>)</span></code></pre></div>
<div class="figure">
<img src="images/visualize-county-year-line.png" alt="" />
<p class="caption">Wells drilled by county by year</p>
</div>
<p>How easy would it be to add points for every year to make each data point stand out?</p>
</div>
<div id="your-turn-add-layers" class="section level3" number="7.7.3">
<h3><span class="header-section-number">7.7.3</span> Your turn: Add layers</h3>
<ul>
<li>Add a new layer <code>geom_point()</code> and see what happens</li>
<li>Add a labels layer to add a title, like we did in the bar chart above.</li>
</ul>
</div>
<div id="dates-as-numbers-and-the-problems-they-cause" class="section level3" number="7.7.4">
<h3><span class="header-section-number">7.7.4</span> Dates as numbers and the problems they cause</h3>
<p>There was one point during my work on this graphic when my x axis did not fall evenly on years, and I figured it was because the <code>year_drilled</code> field was a number and not a date. It’s possible to fix that by including the <code>library(lubridate)</code> and then mutating the year_drilled column like this:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="plots.html#cb150-1" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb150-2"><a href="plots.html#cb150-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">year_drilled =</span> <span class="fu">ymd</span>(year_drilled, <span class="at">truncated=</span>2L)</span>
<span id="cb150-3"><a href="plots.html#cb150-3" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span></code></pre></div>
</div>
</div>
<div id="your-turn-build-a-line-chart" class="section level2" number="7.8">
<h2><span class="header-section-number">7.8</span> Your turn: Build a line chart</h2>
<p>Now, I’d like you to build a line chart that shows how the different kinds of wells drilled has changed over time. Here’s a major hint: It’s very much like the line chart you just built, but with different columns. You’ll need so start at creating a data frame with the correct data.</p>
</div>
<div id="review-of-ggplot" class="section level2" number="7.9">
<h2><span class="header-section-number">7.9</span> Review of ggplot</h2>
<p>Exploring with graphics are one of the more powerful features of working with R. It takes a bit to get used to the Grammar of Graphics and ggplot2 and it will be frustrating at first. But be assured it can do about anything once you learn how, and being able to fold in these charts with your thoughts and analysis in a repeatable way will make you a better data journalist.</p>
<p>By design, every chart in ggplot starts with the same three things: data, a geometric coordinate system, and a mapping of the aesthetics, including the x and y values.</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="plots.html#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> <span class="sc">&lt;</span>DATA<span class="sc">&gt;</span>, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="sc">&lt;</span>MAPPINGS<span class="sc">&gt;</span>)) <span class="sc">+</span></span>
<span id="cb151-2"><a href="plots.html#cb151-2" aria-hidden="true" tabindex="-1"></a>  <span class="er">&lt;</span>GEOM_FUNCTION<span class="sc">&gt;</span></span></code></pre></div>
<p>If your graphic is simple, there may be less verbose ways to write it as ggplot will assume your are passing it data first, and that <code>aes()</code> functions are for mapping.</p>
</div>
<div id="plotly-for-more-interactive-graphics" class="section level2" number="7.10">
<h2><span class="header-section-number">7.10</span> Plotly for more interactive graphics</h2>
<p>At the risk of adding yet a little more complexity I want to introduce you to <a href="https://plot.ly/r/">Plotly</a>. I see two ways you might find Plotly interesting:</p>
<div id="ggplotly" class="section level3" number="7.10.1">
<h3><span class="header-section-number">7.10.1</span> ggplotly</h3>
<p><a href="https://plot.ly/ggplot2/">ggplotly</a> allows you to port your ggplot graphic into Plotly so they have interactive tooltips. The tutorial examples are also not bad for a general ggplot reference.</p>
<p>After installing and loading the Plotly library, giving your chart hover tips is as easy as assigning your plot to an object (<code>p</code> in the example below), and then calling that with the <code>ggplotly()</code> function:</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="plots.html#cb152-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x=</span>displ, <span class="at">y=</span>hwy)) <span class="sc">+</span></span>
<span id="cb152-2"><a href="plots.html#cb152-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb152-3"><a href="plots.html#cb152-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()</span>
<span id="cb152-4"><a href="plots.html#cb152-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p)</span></code></pre></div>
<div class="figure">
<img src="images/visualize-ggplotly-example.png" alt="" />
<p class="caption">ggplotly example</p>
</div>
<p>The black label above appears when you hover on the graphic.</p>
</div>
<div id="more-with-plot_ly-function" class="section level3" number="7.10.2">
<h3><span class="header-section-number">7.10.2</span> More with <code>plot_ly()</code> function</h3>
<p>You can gain a little more control over your Plotly graphic if you build them using the <code>plot_ly()</code> function instead of <code>ggplot()</code>, but you have to learn a new syntax. It’s still based on the Grammar of Graphics, so it’s not hard … just different.</p>
<p>For example, for our “Wells by County and Year” graphic we did earlier looks like this:</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="plots.html#cb153-1" aria-hidden="true" tabindex="-1"></a>wells_county_year <span class="sc">%&gt;%</span> <span class="fu">plot_ly</span>(<span class="at">x =</span> <span class="sc">~</span>year_drilled, <span class="at">y =</span> <span class="sc">~</span>wells_drilled, <span class="at">name =</span> <span class="sc">~</span>county,</span>
<span id="cb153-2"><a href="plots.html#cb153-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">&quot;scatter&quot;</span>, <span class="at">mode =</span> <span class="st">&quot;lines+markers&quot;</span>)</span></code></pre></div>
<p>And it ends up looking like this:</p>
<div class="figure">
<img src="images/visualize-plotly-example.png" alt="" />
<p class="caption">Plotly example</p>
</div>
</div>
<div id="plotlys-freemium-model" class="section level3" number="7.10.3">
<h3><span class="header-section-number">7.10.3</span> Plotly’s freemium model</h3>
<p>It appears that you can use these open source libraries without charge from Plotly. They do also have a hosting service to allow you to embed charts in other websites, which can get into a pay tier of their service.</p>
</div>
</div>
<div id="resources" class="section level2" number="7.11">
<h2><span class="header-section-number">7.11</span> Resources</h2>
<ul>
<li><a href="http://ggplot2.tidyverse.org/reference/index.html">The ggplot2 documentation</a> and <a href="https://github.com/rstudio/cheatsheets/blob/master/data-visualization-2.1.pdf">ggplot2 cheatsheets</a>.</li>
<li><a href="https://r4ds.had.co.nz/data-visualisation.html">R for Data Science, Chap 3.</a> Hadley Wickam dives right into plots in his book.</li>
<li><a href="https://r-graphics.org/index.html">R Graphics Cookbook</a> has lots of example plots. Good to harvest code and see how to do things.</li>
<li><a href="https://www.r-graph-gallery.com/">The R Graph Gallery</a> another place to see examples.</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="sums-analyze.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="how-to-tackle-a-new-dataset.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/07-plots.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>

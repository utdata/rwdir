<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Summarize with math - import | Reporting with Data in R</title>
  <meta name="description" content="Chapter 5 Summarize with math - import | Reporting with Data in R is a series of lessons and instructions used in courses in the School of Journalism and Media, Moody College of Communication at the University of Texas at Austin. The course is taught by Christian McDonald and Jo Lukito." />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Summarize with math - import | Reporting with Data in R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Chapter 5 Summarize with math - import | Reporting with Data in R is a series of lessons and instructions used in courses in the School of Journalism and Media, Moody College of Communication at the University of Texas at Austin. The course is taught by Christian McDonald and Jo Lukito." />
  <meta name="github-repo" content="utdata/rwdir" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Summarize with math - import | Reporting with Data in R" />
  
  <meta name="twitter:description" content="Chapter 5 Summarize with math - import | Reporting with Data in R is a series of lessons and instructions used in courses in the School of Journalism and Media, Moody College of Communication at the University of Texas at Austin. The course is taught by Christian McDonald and Jo Lukito." />
  

<meta name="author" content="Christian McDonald and Josephine Lukito" />


<meta name="date" content="2022-06-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="count-analysis.html"/>
<link rel="next" href="sums-analyze.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.23/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<style type="text/css">
  p.caption {
    color: #777;
    margin-top: 10px;
  }
  p code, pre, pre code, li code {
    background-color: #DCDCDC !important;
  }
  detail {
    margin-bottom: 30px;
  }
</style>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Reporting with Data in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this book</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#a-word-from-prof.-mcdonald"><i class="fa fa-check"></i>A word from Prof. McDonald</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#tips-on-the-book-style"><i class="fa fa-check"></i>Tips on the book style</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#things-to-do"><i class="fa fa-check"></i>Things to do</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#notes-some-important"><i class="fa fa-check"></i>Notes, some important</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#copy-code-blocks"><i class="fa fa-check"></i>Copy code blocks</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-the-authors"><i class="fa fa-check"></i>About the authors</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#christian-mcdonald"><i class="fa fa-check"></i>Christian McDonald</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#jo-lukito"><i class="fa fa-check"></i>Jo Lukito</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#versions"><i class="fa fa-check"></i>Versions</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#other-resources"><i class="fa fa-check"></i>Other resources</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="install.html"><a href="install.html"><i class="fa fa-check"></i><b>1</b> Install Party</a>
<ul>
<li class="chapter" data-level="1.1" data-path="install.html"><a href="install.html#mac-vs-pc"><i class="fa fa-check"></i><b>1.1</b> Mac vs PC</a></li>
<li class="chapter" data-level="1.2" data-path="install.html"><a href="install.html#installing-r"><i class="fa fa-check"></i><b>1.2</b> Installing R</a></li>
<li class="chapter" data-level="1.3" data-path="install.html"><a href="install.html#installing-rstudio"><i class="fa fa-check"></i><b>1.3</b> Installing RStudio</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="install.html"><a href="install.html#getting-git-errors-on-macs"><i class="fa fa-check"></i><b>1.3.1</b> Getting “Git” errors on Macs</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="install.html"><a href="install.html#class-project-folder"><i class="fa fa-check"></i><b>1.4</b> Class project folder</a></li>
<li class="chapter" data-level="1.5" data-path="install.html"><a href="install.html#rstudio-cloud"><i class="fa fa-check"></i><b>1.5</b> RStudio Cloud</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#rstudio-tour"><i class="fa fa-check"></i><b>2.1</b> RStudio tour</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#updating-preferences"><i class="fa fa-check"></i><b>2.2</b> Updating preferences</a></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#starting-a-new-project"><i class="fa fa-check"></i><b>2.3</b> Starting a new Project</a></li>
<li class="chapter" data-level="2.4" data-path="intro.html"><a href="intro.html#using-r-notebooks"><i class="fa fa-check"></i><b>2.4</b> Using R Notebooks</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="intro.html"><a href="intro.html#create-your-first-notebook"><i class="fa fa-check"></i><b>2.4.1</b> Create your first notebook</a></li>
<li class="chapter" data-level="2.4.2" data-path="intro.html"><a href="intro.html#save-the-.rmd-file"><i class="fa fa-check"></i><b>2.4.2</b> Save the .Rmd file</a></li>
<li class="chapter" data-level="2.4.3" data-path="intro.html"><a href="intro.html#run-the-notebook"><i class="fa fa-check"></i><b>2.4.3</b> Run the notebook</a></li>
<li class="chapter" data-level="2.4.4" data-path="intro.html"><a href="intro.html#a-note-about-rmarkdown"><i class="fa fa-check"></i><b>2.4.4</b> A note about RMarkdown</a></li>
<li class="chapter" data-level="2.4.5" data-path="intro.html"><a href="intro.html#adding-new-code-chunks"><i class="fa fa-check"></i><b>2.4.5</b> Adding new code chunks</a></li>
<li class="chapter" data-level="2.4.6" data-path="intro.html"><a href="intro.html#practice-adding-code-chunks"><i class="fa fa-check"></i><b>2.4.6</b> Practice adding code chunks</a></li>
<li class="chapter" data-level="2.4.7" data-path="intro.html"><a href="intro.html#preview-the-report"><i class="fa fa-check"></i><b>2.4.7</b> Preview the report</a></li>
<li class="chapter" data-level="2.4.8" data-path="intro.html"><a href="intro.html#the-toolbar"><i class="fa fa-check"></i><b>2.4.8</b> The toolbar</a></li>
<li class="chapter" data-level="2.4.9" data-path="intro.html"><a href="intro.html#knit-the-final-workbook"><i class="fa fa-check"></i><b>2.4.9</b> Knit the final workbook</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="intro.html"><a href="intro.html#turning-in-our-projects"><i class="fa fa-check"></i><b>2.5</b> Turning in our projects</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="counts-import.html"><a href="counts-import.html"><i class="fa fa-check"></i><b>3</b> Summarize with count - import</a>
<ul>
<li class="chapter" data-level="3.1" data-path="counts-import.html"><a href="counts-import.html#learning-goals-of-this-lesson"><i class="fa fa-check"></i><b>3.1</b> Learning goals of this lesson</a></li>
<li class="chapter" data-level="3.2" data-path="counts-import.html"><a href="counts-import.html#basic-steps-of-this-lesson"><i class="fa fa-check"></i><b>3.2</b> Basic steps of this lesson</a></li>
<li class="chapter" data-level="3.3" data-path="counts-import.html"><a href="counts-import.html#create-a-new-project"><i class="fa fa-check"></i><b>3.3</b> Create a new project</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="counts-import.html"><a href="counts-import.html#describe-the-goals-of-the-notebook"><i class="fa fa-check"></i><b>3.3.1</b> Describe the goals of the notebook</a></li>
<li class="chapter" data-level="3.3.2" data-path="counts-import.html"><a href="counts-import.html#the-r-package-environment"><i class="fa fa-check"></i><b>3.3.2</b> The R Package environment</a></li>
<li class="chapter" data-level="3.3.3" data-path="counts-import.html"><a href="counts-import.html#installing-and-using-packages"><i class="fa fa-check"></i><b>3.3.3</b> Installing and using packages</a></li>
<li class="chapter" data-level="3.3.4" data-path="counts-import.html"><a href="counts-import.html#load-the-libraries"><i class="fa fa-check"></i><b>3.3.4</b> Load the libraries</a></li>
<li class="chapter" data-level="3.3.5" data-path="counts-import.html"><a href="counts-import.html#create-a-directory-for-your-data"><i class="fa fa-check"></i><b>3.3.5</b> Create a directory for your data</a></li>
<li class="chapter" data-level="3.3.6" data-path="counts-import.html"><a href="counts-import.html#about-data-sources"><i class="fa fa-check"></i><b>3.3.6</b> About data sources</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="counts-import.html"><a href="counts-import.html#the-billboard-hot-100"><i class="fa fa-check"></i><b>3.4</b> The Billboard Hot 100</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="counts-import.html"><a href="counts-import.html#data-dictionary"><i class="fa fa-check"></i><b>3.4.1</b> Data dictionary</a></li>
<li class="chapter" data-level="3.4.2" data-path="counts-import.html"><a href="counts-import.html#lets-download-our-data"><i class="fa fa-check"></i><b>3.4.2</b> Let’s download our data</a></li>
<li class="chapter" data-level="3.4.3" data-path="counts-import.html"><a href="counts-import.html#consider-commenting-the-download"><i class="fa fa-check"></i><b>3.4.3</b> Consider commenting the download</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="counts-import.html"><a href="counts-import.html#import-the-data"><i class="fa fa-check"></i><b>3.5</b> Import the data</a></li>
<li class="chapter" data-level="3.6" data-path="counts-import.html"><a href="counts-import.html#assign-our-import-to-an-r-object"><i class="fa fa-check"></i><b>3.6</b> Assign our import to an R object</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="counts-import.html"><a href="counts-import.html#print-a-peek-to-your-r-notebook"><i class="fa fa-check"></i><b>3.6.1</b> Print a peek to your R Notebook</a></li>
<li class="chapter" data-level="3.6.2" data-path="counts-import.html"><a href="counts-import.html#glimpse-the-data"><i class="fa fa-check"></i><b>3.6.2</b> Glimpse the data</a></li>
<li class="chapter" data-level="3.6.3" data-path="counts-import.html"><a href="counts-import.html#about-the-pipe"><i class="fa fa-check"></i><b>3.6.3</b> About the pipe |&gt;</a></li>
<li class="chapter" data-level="" data-path="counts-import.html"><a href="counts-import.html#a-rabbit-dives-into-a-pipe"><i class="fa fa-check"></i>A rabbit dives into a pipe</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="counts-import.html"><a href="counts-import.html#cleaning-data"><i class="fa fa-check"></i><b>3.7</b> Cleaning data</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="counts-import.html"><a href="counts-import.html#cleaning-column-names"><i class="fa fa-check"></i><b>3.7.1</b> Cleaning column names</a></li>
<li class="chapter" data-level="3.7.2" data-path="counts-import.html"><a href="counts-import.html#fixing-the-date"><i class="fa fa-check"></i><b>3.7.2</b> Fixing the date</a></li>
<li class="chapter" data-level="3.7.3" data-path="counts-import.html"><a href="counts-import.html#working-with-mutate"><i class="fa fa-check"></i><b>3.7.3</b> Working with mutate()</a></li>
<li class="chapter" data-level="3.7.4" data-path="counts-import.html"><a href="counts-import.html#check-the-result"><i class="fa fa-check"></i><b>3.7.4</b> Check the result!</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="counts-import.html"><a href="counts-import.html#arrange-the-data"><i class="fa fa-check"></i><b>3.8</b> Arrange the data</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="counts-import.html"><a href="counts-import.html#getting-summary-stats"><i class="fa fa-check"></i><b>3.8.1</b> Getting summary stats</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="counts-import.html"><a href="counts-import.html#selecting-columns"><i class="fa fa-check"></i><b>3.9</b> Selecting columns</a></li>
<li class="chapter" data-level="3.10" data-path="counts-import.html"><a href="counts-import.html#exporting-data"><i class="fa fa-check"></i><b>3.10</b> Exporting data</a>
<ul>
<li class="chapter" data-level="3.10.1" data-path="counts-import.html"><a href="counts-import.html#single-notebook-philosophy"><i class="fa fa-check"></i><b>3.10.1</b> Single-notebook philosophy</a></li>
<li class="chapter" data-level="3.10.2" data-path="counts-import.html"><a href="counts-import.html#exporting-as-rds"><i class="fa fa-check"></i><b>3.10.2</b> Exporting as rds</a></li>
</ul></li>
<li class="chapter" data-level="3.11" data-path="counts-import.html"><a href="counts-import.html#naming-chunks"><i class="fa fa-check"></i><b>3.11</b> Naming chunks</a></li>
<li class="chapter" data-level="3.12" data-path="counts-import.html"><a href="counts-import.html#knit-your-page"><i class="fa fa-check"></i><b>3.12</b> Knit your page</a></li>
<li class="chapter" data-level="3.13" data-path="counts-import.html"><a href="counts-import.html#review-of-what-weve-learned-so-far"><i class="fa fa-check"></i><b>3.13</b> Review of what we’ve learned so far</a></li>
<li class="chapter" data-level="3.14" data-path="counts-import.html"><a href="counts-import.html#whats-next"><i class="fa fa-check"></i><b>3.14</b> What’s next</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="count-analysis.html"><a href="count-analysis.html"><i class="fa fa-check"></i><b>4</b> Summarize with count - analysis</a>
<ul>
<li class="chapter" data-level="4.1" data-path="count-analysis.html"><a href="count-analysis.html#goals-of-this-lesson"><i class="fa fa-check"></i><b>4.1</b> Goals of this lesson</a></li>
<li class="chapter" data-level="4.2" data-path="count-analysis.html"><a href="count-analysis.html#the-questions-well-answer"><i class="fa fa-check"></i><b>4.2</b> The questions we’ll answer</a></li>
<li class="chapter" data-level="4.3" data-path="count-analysis.html"><a href="count-analysis.html#setting-up-an-analysis-notebook"><i class="fa fa-check"></i><b>4.3</b> Setting up an analysis notebook</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="count-analysis.html"><a href="count-analysis.html#import-the-cleaned-data"><i class="fa fa-check"></i><b>4.3.1</b> Import the cleaned data</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="count-analysis.html"><a href="count-analysis.html#introducing-dplyr"><i class="fa fa-check"></i><b>4.4</b> Introducing dplyr</a></li>
<li class="chapter" data-level="4.5" data-path="count-analysis.html"><a href="count-analysis.html#most-appearances"><i class="fa fa-check"></i><b>4.5</b> Most appearances</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="count-analysis.html"><a href="count-analysis.html#group-aggregate"><i class="fa fa-check"></i><b>4.5.1</b> Group &amp; Aggregate</a></li>
<li class="chapter" data-level="4.5.2" data-path="count-analysis.html"><a href="count-analysis.html#summarize"><i class="fa fa-check"></i><b>4.5.2</b> Summarize</a></li>
<li class="chapter" data-level="4.5.3" data-path="count-analysis.html"><a href="count-analysis.html#group-by"><i class="fa fa-check"></i><b>4.5.3</b> Group by</a></li>
<li class="chapter" data-level="4.5.4" data-path="count-analysis.html"><a href="count-analysis.html#arrange-the-results"><i class="fa fa-check"></i><b>4.5.4</b> Arrange the results</a></li>
<li class="chapter" data-level="4.5.5" data-path="count-analysis.html"><a href="count-analysis.html#get-the-top-of-the-list"><i class="fa fa-check"></i><b>4.5.5</b> Get the top of the list</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="count-analysis.html"><a href="count-analysis.html#songperformer-with-most-appearances"><i class="fa fa-check"></i><b>4.6</b> Song/performer with most appearances</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="count-analysis.html"><a href="count-analysis.html#introducing-filter"><i class="fa fa-check"></i><b>4.6.1</b> Introducing filter()</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="count-analysis.html"><a href="count-analysis.html#songperformer-with-most-weeks-at-no.-1"><i class="fa fa-check"></i><b>4.7</b> Song/Performer with most weeks at No. 1</a></li>
<li class="chapter" data-level="4.8" data-path="count-analysis.html"><a href="count-analysis.html#performer-with-most-songs-to-reach-no.-1"><i class="fa fa-check"></i><b>4.8</b> Performer with most songs to reach No. 1</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="count-analysis.html"><a href="count-analysis.html#using-distinct"><i class="fa fa-check"></i><b>4.8.1</b> Using distinct()</a></li>
<li class="chapter" data-level="4.8.2" data-path="count-analysis.html"><a href="count-analysis.html#summarize-the-performers"><i class="fa fa-check"></i><b>4.8.2</b> Summarize the performers</a></li>
<li class="chapter" data-level="4.8.3" data-path="count-analysis.html"><a href="count-analysis.html#filter-for-a-good-cutoff"><i class="fa fa-check"></i><b>4.8.3</b> Filter for a good cutoff</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="count-analysis.html"><a href="count-analysis.html#no.-1-hits-in-last-five-years"><i class="fa fa-check"></i><b>4.9</b> No. 1 hits in last five years</a></li>
<li class="chapter" data-level="4.10" data-path="count-analysis.html"><a href="count-analysis.html#top-10-hits-overall-on-your-own"><i class="fa fa-check"></i><b>4.10</b> Top 10 hits overall (on your own)</a></li>
<li class="chapter" data-level="4.11" data-path="count-analysis.html"><a href="count-analysis.html#a-shortcut-count"><i class="fa fa-check"></i><b>4.11</b> A shortcut: count()</a></li>
<li class="chapter" data-level="4.12" data-path="count-analysis.html"><a href="count-analysis.html#complex-filters"><i class="fa fa-check"></i><b>4.12</b> Complex filters</a>
<ul>
<li class="chapter" data-level="4.12.1" data-path="count-analysis.html"><a href="count-analysis.html#multiple-truths"><i class="fa fa-check"></i><b>4.12.1</b> Multiple truths</a></li>
<li class="chapter" data-level="4.12.2" data-path="count-analysis.html"><a href="count-analysis.html#either-is-true"><i class="fa fa-check"></i><b>4.12.2</b> Either is true</a></li>
<li class="chapter" data-level="4.12.3" data-path="count-analysis.html"><a href="count-analysis.html#mixing-criteria"><i class="fa fa-check"></i><b>4.12.3</b> Mixing criteria</a></li>
<li class="chapter" data-level="4.12.4" data-path="count-analysis.html"><a href="count-analysis.html#search-within-a-string"><i class="fa fa-check"></i><b>4.12.4</b> Search within a string</a></li>
</ul></li>
<li class="chapter" data-level="4.13" data-path="count-analysis.html"><a href="count-analysis.html#on-your-own"><i class="fa fa-check"></i><b>4.13</b> On your own</a></li>
<li class="chapter" data-level="4.14" data-path="count-analysis.html"><a href="count-analysis.html#review-of-what-weve-learned"><i class="fa fa-check"></i><b>4.14</b> Review of what we’ve learned</a></li>
<li class="chapter" data-level="4.15" data-path="count-analysis.html"><a href="count-analysis.html#turn-in-your-project"><i class="fa fa-check"></i><b>4.15</b> Turn in your project</a></li>
<li class="chapter" data-level="4.16" data-path="count-analysis.html"><a href="count-analysis.html#soundtrack-for-this-assignment"><i class="fa fa-check"></i><b>4.16</b> Soundtrack for this assignment</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="sums-import.html"><a href="sums-import.html"><i class="fa fa-check"></i><b>5</b> Summarize with math - import</a>
<ul>
<li class="chapter" data-level="5.1" data-path="sums-import.html"><a href="sums-import.html#about-the-story-military-surplus-transfers"><i class="fa fa-check"></i><b>5.1</b> About the story: Military surplus transfers</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="sums-import.html"><a href="sums-import.html#the-1033-program"><i class="fa fa-check"></i><b>5.1.1</b> The 1033 program</a></li>
<li class="chapter" data-level="5.1.2" data-path="sums-import.html"><a href="sums-import.html#about-the-data"><i class="fa fa-check"></i><b>5.1.2</b> About the data</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="sums-import.html"><a href="sums-import.html#the-questions-we-will-answer"><i class="fa fa-check"></i><b>5.2</b> The questions we will answer</a></li>
<li class="chapter" data-level="5.3" data-path="sums-import.html"><a href="sums-import.html#getting-started-create-your-project"><i class="fa fa-check"></i><b>5.3</b> Getting started: Create your project</a></li>
<li class="chapter" data-level="5.4" data-path="sums-import.html"><a href="sums-import.html#importcleaning-notebook"><i class="fa fa-check"></i><b>5.4</b> Import/cleaning notebook</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="sums-import.html"><a href="sums-import.html#the-goals-of-the-notebook"><i class="fa fa-check"></i><b>5.4.1</b> The goals of the notebook</a></li>
<li class="chapter" data-level="5.4.2" data-path="sums-import.html"><a href="sums-import.html#add-a-setup-section"><i class="fa fa-check"></i><b>5.4.2</b> Add a setup section</a></li>
<li class="chapter" data-level="5.4.3" data-path="sums-import.html"><a href="sums-import.html#download-the-data"><i class="fa fa-check"></i><b>5.4.3</b> Download the data</a></li>
<li class="chapter" data-level="5.4.4" data-path="sums-import.html"><a href="sums-import.html#import-the-data-1"><i class="fa fa-check"></i><b>5.4.4</b> Import the data</a></li>
<li class="chapter" data-level="5.4.5" data-path="sums-import.html"><a href="sums-import.html#glimpse-the-data-1"><i class="fa fa-check"></i><b>5.4.5</b> Glimpse the data</a></li>
<li class="chapter" data-level="5.4.6" data-path="sums-import.html"><a href="sums-import.html#remove-unnecessary-columns"><i class="fa fa-check"></i><b>5.4.6</b> Remove unnecessary columns</a></li>
<li class="chapter" data-level="5.4.7" data-path="sums-import.html"><a href="sums-import.html#create-a-total_value-column"><i class="fa fa-check"></i><b>5.4.7</b> Create a total_value column</a></li>
<li class="chapter" data-level="5.4.8" data-path="sums-import.html"><a href="sums-import.html#controlled-vs.-non-controlled"><i class="fa fa-check"></i><b>5.4.8</b> Controlled vs. non-controlled</a></li>
<li class="chapter" data-level="5.4.9" data-path="sums-import.html"><a href="sums-import.html#categorization-logic-with-case_when"><i class="fa fa-check"></i><b>5.4.9</b> Categorization logic with case_when()</a></li>
<li class="chapter" data-level="5.4.10" data-path="sums-import.html"><a href="sums-import.html#filtering-our-data"><i class="fa fa-check"></i><b>5.4.10</b> Filtering our data</a></li>
<li class="chapter" data-level="5.4.11" data-path="sums-import.html"><a href="sums-import.html#export-cleaned-data"><i class="fa fa-check"></i><b>5.4.11</b> Export cleaned data</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="sums-import.html"><a href="sums-import.html#things-we-learned-in-this-lesson"><i class="fa fa-check"></i><b>5.5</b> Things we learned in this lesson</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="sums-analyze.html"><a href="sums-analyze.html"><i class="fa fa-check"></i><b>6</b> Summarize with math - analysis</a>
<ul>
<li class="chapter" data-level="6.1" data-path="sums-analyze.html"><a href="sums-analyze.html#learning-goals-of-this-lesson-1"><i class="fa fa-check"></i><b>6.1</b> Learning goals of this lesson</a></li>
<li class="chapter" data-level="6.2" data-path="sums-analyze.html"><a href="sums-analyze.html#questions-to-answer"><i class="fa fa-check"></i><b>6.2</b> Questions to answer</a></li>
<li class="chapter" data-level="6.3" data-path="sums-analyze.html"><a href="sums-analyze.html#set-up-the-analysis-notebook"><i class="fa fa-check"></i><b>6.3</b> Set up the analysis notebook</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="sums-analyze.html"><a href="sums-analyze.html#load-the-data-into-a-tibble"><i class="fa fa-check"></i><b>6.3.1</b> Load the data into a tibble</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="sums-analyze.html"><a href="sums-analyze.html#how-to-tackle-summaries"><i class="fa fa-check"></i><b>6.4</b> How to tackle summaries</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="sums-analyze.html"><a href="sums-analyze.html#summaries-with-math"><i class="fa fa-check"></i><b>6.4.1</b> Summaries with math</a></li>
<li class="chapter" data-level="6.4.2" data-path="sums-analyze.html"><a href="sums-analyze.html#add-the-total_value"><i class="fa fa-check"></i><b>6.4.2</b> Add the total_value</a></li>
<li class="chapter" data-level="6.4.3" data-path="sums-analyze.html"><a href="sums-analyze.html#arrange-the-results-1"><i class="fa fa-check"></i><b>6.4.3</b> Arrange the results</a></li>
<li class="chapter" data-level="6.4.4" data-path="sums-analyze.html"><a href="sums-analyze.html#consider-the-results"><i class="fa fa-check"></i><b>6.4.4</b> Consider the results</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="sums-analyze.html"><a href="sums-analyze.html#looking-a-local-agencies"><i class="fa fa-check"></i><b>6.5</b> Looking a local agencies</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="sums-analyze.html"><a href="sums-analyze.html#filtering-within-a-vector"><i class="fa fa-check"></i><b>6.5.1</b> Filtering within a vector</a></li>
<li class="chapter" data-level="6.5.2" data-path="sums-analyze.html"><a href="sums-analyze.html#use-the-vector-to-build-this-filter"><i class="fa fa-check"></i><b>6.5.2</b> Use the vector to build this filter</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="sums-analyze.html"><a href="sums-analyze.html#item-quantities-totals-for-local-agencies"><i class="fa fa-check"></i><b>6.6</b> Item quantities, totals for local agencies</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="sums-analyze.html"><a href="sums-analyze.html#build-the-lists-for-other-agencies"><i class="fa fa-check"></i><b>6.6.1</b> Build the lists for other agencies</a></li>
<li class="chapter" data-level="6.6.2" data-path="sums-analyze.html"><a href="sums-analyze.html#google-some-interesting-items"><i class="fa fa-check"></i><b>6.6.2</b> Google some interesting items</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="sums-analyze.html"><a href="sums-analyze.html#write-a-data-drop"><i class="fa fa-check"></i><b>6.7</b> Write a data drop</a></li>
<li class="chapter" data-level="6.8" data-path="sums-analyze.html"><a href="sums-analyze.html#what-we-learned-in-this-chapter"><i class="fa fa-check"></i><b>6.8</b> What we learned in this chapter</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="ggplot-intro.html"><a href="ggplot-intro.html"><i class="fa fa-check"></i><b>7</b> Data Viz - Intro to ggplot</a>
<ul>
<li class="chapter" data-level="7.1" data-path="ggplot-intro.html"><a href="ggplot-intro.html#goals-for-this-section"><i class="fa fa-check"></i><b>7.1</b> Goals for this section</a></li>
<li class="chapter" data-level="7.2" data-path="ggplot-intro.html"><a href="ggplot-intro.html#introduction-to-ggplot"><i class="fa fa-check"></i><b>7.2</b> Introduction to ggplot</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="ggplot-intro.html"><a href="ggplot-intro.html#what-i-likedislike-about-ggplot"><i class="fa fa-check"></i><b>7.2.1</b> What I like/dislike about ggplot</a></li>
<li class="chapter" data-level="7.2.2" data-path="ggplot-intro.html"><a href="ggplot-intro.html#the-grammar-of-graphics"><i class="fa fa-check"></i><b>7.2.2</b> The Grammar of Graphics</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="ggplot-intro.html"><a href="ggplot-intro.html#start-a-new-project"><i class="fa fa-check"></i><b>7.3</b> Start a new project</a></li>
<li class="chapter" data-level="7.4" data-path="ggplot-intro.html"><a href="ggplot-intro.html#the-layers-of-ggplot"><i class="fa fa-check"></i><b>7.4</b> The layers of ggplot</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="ggplot-intro.html"><a href="ggplot-intro.html#build-the-base-layer"><i class="fa fa-check"></i><b>7.4.1</b> Build the base layer</a></li>
<li class="chapter" data-level="7.4.2" data-path="ggplot-intro.html"><a href="ggplot-intro.html#layers-can-we-add-to-our-plots"><i class="fa fa-check"></i><b>7.4.2</b> Layers can we add to our plots</a></li>
<li class="chapter" data-level="7.4.3" data-path="ggplot-intro.html"><a href="ggplot-intro.html#add-geom_point"><i class="fa fa-check"></i><b>7.4.3</b> Add geom_point</a></li>
<li class="chapter" data-level="7.4.4" data-path="ggplot-intro.html"><a href="ggplot-intro.html#adding-other-mappings"><i class="fa fa-check"></i><b>7.4.4</b> Adding other mappings</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="ggplot-intro.html"><a href="ggplot-intro.html#lets-build-a-bar-chart"><i class="fa fa-check"></i><b>7.5</b> Let’s build a bar chart</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="ggplot-intro.html"><a href="ggplot-intro.html#prepare-the-data"><i class="fa fa-check"></i><b>7.5.1</b> Prepare the data</a></li>
<li class="chapter" data-level="7.5.2" data-path="ggplot-intro.html"><a href="ggplot-intro.html#build-our-plot-with-geom_col"><i class="fa fa-check"></i><b>7.5.2</b> Build our plot with geom_col</a></li>
<li class="chapter" data-level="7.5.3" data-path="ggplot-intro.html"><a href="ggplot-intro.html#add-the-geom_col-layer"><i class="fa fa-check"></i><b>7.5.3</b> Add the geom_col layer</a></li>
<li class="chapter" data-level="7.5.4" data-path="ggplot-intro.html"><a href="ggplot-intro.html#flip-the-axes"><i class="fa fa-check"></i><b>7.5.4</b> Flip the axes</a></li>
<li class="chapter" data-level="7.5.5" data-path="ggplot-intro.html"><a href="ggplot-intro.html#reorder-the-bars"><i class="fa fa-check"></i><b>7.5.5</b> Reorder the bars</a></li>
<li class="chapter" data-level="7.5.6" data-path="ggplot-intro.html"><a href="ggplot-intro.html#adding-a-geom_text-layer"><i class="fa fa-check"></i><b>7.5.6</b> Adding a geom_text layer</a></li>
<li class="chapter" data-level="7.5.7" data-path="ggplot-intro.html"><a href="ggplot-intro.html#add-some-titles-and-more-labels"><i class="fa fa-check"></i><b>7.5.7</b> Add some titles and more labels</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="ggplot-intro.html"><a href="ggplot-intro.html#on-your-own-ice-cream"><i class="fa fa-check"></i><b>7.6</b> On your own: Ice cream!</a></li>
<li class="chapter" data-level="7.7" data-path="ggplot-intro.html"><a href="ggplot-intro.html#what-weve-learned"><i class="fa fa-check"></i><b>7.7</b> What we’ve learned</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="ggplot-more.html"><a href="ggplot-more.html"><i class="fa fa-check"></i><b>8</b> Deeper into ggplot</a>
<ul>
<li class="chapter" data-level="8.1" data-path="ggplot-more.html"><a href="ggplot-more.html#references"><i class="fa fa-check"></i><b>8.1</b> References</a></li>
<li class="chapter" data-level="8.2" data-path="ggplot-more.html"><a href="ggplot-more.html#learning-goals-for-this-chapter"><i class="fa fa-check"></i><b>8.2</b> Learning goals for this chapter</a></li>
<li class="chapter" data-level="8.3" data-path="ggplot-more.html"><a href="ggplot-more.html#set-up-your-notebook"><i class="fa fa-check"></i><b>8.3</b> Set up your notebook</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="ggplot-more.html"><a href="ggplot-more.html#lets-get-the-data"><i class="fa fa-check"></i><b>8.3.1</b> Let’s get the data</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="ggplot-more.html"><a href="ggplot-more.html#wrangle-the-data"><i class="fa fa-check"></i><b>8.4</b> Wrangle the data</a></li>
<li class="chapter" data-level="8.5" data-path="ggplot-more.html"><a href="ggplot-more.html#make-a-line-chart-of-the-texas-data"><i class="fa fa-check"></i><b>8.5</b> Make a line chart of the Texas data</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="ggplot-more.html"><a href="ggplot-more.html#plot-the-chart"><i class="fa fa-check"></i><b>8.5.1</b> Plot the chart</a></li>
<li class="chapter" data-level="8.5.2" data-path="ggplot-more.html"><a href="ggplot-more.html#cleaning-up"><i class="fa fa-check"></i><b>8.5.2</b> Cleaning Up</a></li>
<li class="chapter" data-level="8.5.3" data-path="ggplot-more.html"><a href="ggplot-more.html#saving-plots-as-an-object"><i class="fa fa-check"></i><b>8.5.3</b> Saving plots as an object</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="ggplot-more.html"><a href="ggplot-more.html#themes"><i class="fa fa-check"></i><b>8.6</b> Themes</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="ggplot-more.html"><a href="ggplot-more.html#more-with-ggthemes"><i class="fa fa-check"></i><b>8.6.1</b> More with ggthemes</a></li>
<li class="chapter" data-level="8.6.2" data-path="ggplot-more.html"><a href="ggplot-more.html#there-is-more-to-themes"><i class="fa fa-check"></i><b>8.6.2</b> There is more to themes</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="ggplot-more.html"><a href="ggplot-more.html#adding-more-information"><i class="fa fa-check"></i><b>8.7</b> Adding more information</a>
<ul>
<li class="chapter" data-level="8.7.1" data-path="ggplot-more.html"><a href="ggplot-more.html#prepare-the-data-1"><i class="fa fa-check"></i><b>8.7.1</b> Prepare the data</a></li>
<li class="chapter" data-level="8.7.2" data-path="ggplot-more.html"><a href="ggplot-more.html#plot-multiple-line-chart"><i class="fa fa-check"></i><b>8.7.2</b> Plot multiple line chart</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="ggplot-more.html"><a href="ggplot-more.html#on-your-own-line-chart"><i class="fa fa-check"></i><b>8.8</b> On your own: Line chart</a></li>
<li class="chapter" data-level="8.9" data-path="ggplot-more.html"><a href="ggplot-more.html#tour-of-some-other-adjustments"><i class="fa fa-check"></i><b>8.9</b> Tour of some other adjustments</a>
<ul>
<li class="chapter" data-level="8.9.1" data-path="ggplot-more.html"><a href="ggplot-more.html#line-width"><i class="fa fa-check"></i><b>8.9.1</b> Line width</a></li>
<li class="chapter" data-level="8.9.2" data-path="ggplot-more.html"><a href="ggplot-more.html#line-type"><i class="fa fa-check"></i><b>8.9.2</b> Line type</a></li>
<li class="chapter" data-level="8.9.3" data-path="ggplot-more.html"><a href="ggplot-more.html#adjust-axis"><i class="fa fa-check"></i><b>8.9.3</b> Adjust axis</a></li>
</ul></li>
<li class="chapter" data-level="8.10" data-path="ggplot-more.html"><a href="ggplot-more.html#facets"><i class="fa fa-check"></i><b>8.10</b> Facets</a>
<ul>
<li class="chapter" data-level="8.10.1" data-path="ggplot-more.html"><a href="ggplot-more.html#facet-wrap"><i class="fa fa-check"></i><b>8.10.1</b> Facet wrap</a></li>
<li class="chapter" data-level="8.10.2" data-path="ggplot-more.html"><a href="ggplot-more.html#facet-grids"><i class="fa fa-check"></i><b>8.10.2</b> Facet grids</a></li>
</ul></li>
<li class="chapter" data-level="8.11" data-path="ggplot-more.html"><a href="ggplot-more.html#on-your-own-facet-wrap"><i class="fa fa-check"></i><b>8.11</b> On your own: Facet wrap</a></li>
<li class="chapter" data-level="8.12" data-path="ggplot-more.html"><a href="ggplot-more.html#saving-plots"><i class="fa fa-check"></i><b>8.12</b> Saving plots</a></li>
<li class="chapter" data-level="8.13" data-path="ggplot-more.html"><a href="ggplot-more.html#interactive-plots"><i class="fa fa-check"></i><b>8.13</b> Interactive plots</a></li>
<li class="chapter" data-level="8.14" data-path="ggplot-more.html"><a href="ggplot-more.html#what-we-learned"><i class="fa fa-check"></i><b>8.14</b> What we learned</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="tidy-data.html"><a href="tidy-data.html"><i class="fa fa-check"></i><b>9</b> Tidy data</a>
<ul>
<li class="chapter" data-level="9.1" data-path="tidy-data.html"><a href="tidy-data.html#goals-for-this-section-1"><i class="fa fa-check"></i><b>9.1</b> Goals for this section</a></li>
<li class="chapter" data-level="9.2" data-path="tidy-data.html"><a href="tidy-data.html#the-questions-well-answer-1"><i class="fa fa-check"></i><b>9.2</b> The questions we’ll answer</a></li>
<li class="chapter" data-level="9.3" data-path="tidy-data.html"><a href="tidy-data.html#what-is-tidy-data"><i class="fa fa-check"></i><b>9.3</b> What is tidy data</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="tidy-data.html"><a href="tidy-data.html#wide-vs-long-data"><i class="fa fa-check"></i><b>9.3.1</b> Wide vs long data</a></li>
<li class="chapter" data-level="9.3.2" data-path="tidy-data.html"><a href="tidy-data.html#why-we-might-want-different-shaped-data"><i class="fa fa-check"></i><b>9.3.2</b> Why we might want different shaped data</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="tidy-data.html"><a href="tidy-data.html#prepare-our-candy-project"><i class="fa fa-check"></i><b>9.4</b> Prepare our candy project</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="tidy-data.html"><a href="tidy-data.html#get-the-data"><i class="fa fa-check"></i><b>9.4.1</b> Get the data</a></li>
<li class="chapter" data-level="9.4.2" data-path="tidy-data.html"><a href="tidy-data.html#drop-unneeded-columns"><i class="fa fa-check"></i><b>9.4.2</b> Drop unneeded columns</a></li>
<li class="chapter" data-level="9.4.3" data-path="tidy-data.html"><a href="tidy-data.html#peek-at-the-wide-table"><i class="fa fa-check"></i><b>9.4.3</b> Peek at the wide table</a></li>
<li class="chapter" data-level="9.4.4" data-path="tidy-data.html"><a href="tidy-data.html#where-are-we-going-with-this-data"><i class="fa fa-check"></i><b>9.4.4</b> Where are we going with this data</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="tidy-data.html"><a href="tidy-data.html#the-tidyr-verbs"><i class="fa fa-check"></i><b>9.5</b> The tidyr verbs</a></li>
<li class="chapter" data-level="9.6" data-path="tidy-data.html"><a href="tidy-data.html#pivot-longer"><i class="fa fa-check"></i><b>9.6</b> Pivot longer</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="tidy-data.html"><a href="tidy-data.html#pivot-our-candy-data-longer"><i class="fa fa-check"></i><b>9.6.1</b> Pivot our candy data longer</a></li>
<li class="chapter" data-level="9.6.2" data-path="tidy-data.html"><a href="tidy-data.html#get-average-candies-per-color"><i class="fa fa-check"></i><b>9.6.2</b> Get average candies per color</a></li>
<li class="chapter" data-level="9.6.3" data-path="tidy-data.html"><a href="tidy-data.html#round-the-averages"><i class="fa fa-check"></i><b>9.6.3</b> Round the averages</a></li>
<li class="chapter" data-level="9.6.4" data-path="tidy-data.html"><a href="tidy-data.html#on-your-own-plot-the-averages"><i class="fa fa-check"></i><b>9.6.4</b> On your own: Plot the averages</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="tidy-data.html"><a href="tidy-data.html#introducing-datawrapper"><i class="fa fa-check"></i><b>9.7</b> Introducing Datawrapper</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="tidy-data.html"><a href="tidy-data.html#review-how-to-make-a-bar-chart"><i class="fa fa-check"></i><b>9.7.1</b> Review how to make a bar chart</a></li>
<li class="chapter" data-level="9.7.2" data-path="tidy-data.html"><a href="tidy-data.html#start-a-chart"><i class="fa fa-check"></i><b>9.7.2</b> Start a chart</a></li>
<li class="chapter" data-level="9.7.3" data-path="tidy-data.html"><a href="tidy-data.html#get-your-candies-data"><i class="fa fa-check"></i><b>9.7.3</b> Get your candies data</a></li>
<li class="chapter" data-level="9.7.4" data-path="tidy-data.html"><a href="tidy-data.html#build-the-datawrapper-graphic"><i class="fa fa-check"></i><b>9.7.4</b> Build the datawrapper graphic</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="tidy-data.html"><a href="tidy-data.html#pivot-wider"><i class="fa fa-check"></i><b>9.8</b> Pivot wider</a>
<ul>
<li class="chapter" data-level="9.8.1" data-path="tidy-data.html"><a href="tidy-data.html#pivot-wider-on-your-own"><i class="fa fa-check"></i><b>9.8.1</b> Pivot wider on your own</a></li>
</ul></li>
<li class="chapter" data-level="9.9" data-path="tidy-data.html"><a href="tidy-data.html#bonus-questions"><i class="fa fa-check"></i><b>9.9</b> Bonus questions</a>
<ul>
<li class="chapter" data-level="9.9.1" data-path="tidy-data.html"><a href="tidy-data.html#mostleast-candies"><i class="fa fa-check"></i><b>9.9.1</b> Most/least candies</a></li>
<li class="chapter" data-level="9.9.2" data-path="tidy-data.html"><a href="tidy-data.html#average-total-candies-in-a-bag"><i class="fa fa-check"></i><b>9.9.2</b> Average total candies in a bag</a></li>
</ul></li>
<li class="chapter" data-level="9.10" data-path="tidy-data.html"><a href="tidy-data.html#turn-in-your-work"><i class="fa fa-check"></i><b>9.10</b> Turn in your work</a></li>
<li class="chapter" data-level="9.11" data-path="tidy-data.html"><a href="tidy-data.html#what-we-learned-1"><i class="fa fa-check"></i><b>9.11</b> What we learned</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="bind-join.html"><a href="bind-join.html"><i class="fa fa-check"></i><b>10</b> Bind and join</a>
<ul>
<li class="chapter" data-level="10.1" data-path="bind-join.html"><a href="bind-join.html#goals-of-the-chapter"><i class="fa fa-check"></i><b>10.1</b> Goals of the chapter</a></li>
<li class="chapter" data-level="10.2" data-path="bind-join.html"><a href="bind-join.html#the-story-an-update-to-denied"><i class="fa fa-check"></i><b>10.2</b> The story: An update to Denied</a></li>
<li class="chapter" data-level="10.3" data-path="bind-join.html"><a href="bind-join.html#about-the-data-1"><i class="fa fa-check"></i><b>10.3</b> About the data</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="bind-join.html"><a href="bind-join.html#set-up-your-project"><i class="fa fa-check"></i><b>10.3.1</b> Set up your project</a></li>
<li class="chapter" data-level="10.3.2" data-path="bind-join.html"><a href="bind-join.html#open-read-and-run"><i class="fa fa-check"></i><b>10.3.2</b> Open, read and run</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="bind-join.html"><a href="bind-join.html#merging-data-together"><i class="fa fa-check"></i><b>10.4</b> Merging data together</a></li>
<li class="chapter" data-level="10.5" data-path="bind-join.html"><a href="bind-join.html#about-joins"><i class="fa fa-check"></i><b>10.5</b> About joins</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="bind-join.html"><a href="bind-join.html#joining-our-reference-table"><i class="fa fa-check"></i><b>10.5.1</b> Joining our reference table</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="bind-join.html"><a href="bind-join.html#some-cleanup-filter-and-select"><i class="fa fa-check"></i><b>10.6</b> Some cleanup: filter and select</a></li>
<li class="chapter" data-level="10.7" data-path="bind-join.html"><a href="bind-join.html#create-an-audit-benchmark-column"><i class="fa fa-check"></i><b>10.7</b> Create an audit benchmark column</a></li>
<li class="chapter" data-level="10.8" data-path="bind-join.html"><a href="bind-join.html#export-the-data"><i class="fa fa-check"></i><b>10.8</b> Export the data</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="answers.html"><a href="answers.html"><i class="fa fa-check"></i><b>11</b> Plotting for answers</a>
<ul>
<li class="chapter" data-level="11.1" data-path="answers.html"><a href="answers.html#goals-of-this-chapter"><i class="fa fa-check"></i><b>11.1</b> Goals of this chapter</a></li>
<li class="chapter" data-level="11.2" data-path="answers.html"><a href="answers.html#project-setup"><i class="fa fa-check"></i><b>11.2</b> Project setup</a></li>
<li class="chapter" data-level="11.3" data-path="answers.html"><a href="answers.html#import-cleaned-data"><i class="fa fa-check"></i><b>11.3</b> Import cleaned data</a></li>
<li class="chapter" data-level="11.4" data-path="answers.html"><a href="answers.html#make-a-searchable-table"><i class="fa fa-check"></i><b>11.4</b> Make a searchable table</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="answers.html"><a href="answers.html#pivot-wider-1"><i class="fa fa-check"></i><b>11.4.1</b> Pivot wider</a></li>
<li class="chapter" data-level="11.4.2" data-path="answers.html"><a href="answers.html#make-a-datatable"><i class="fa fa-check"></i><b>11.4.2</b> Make a datatable</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="answers.html"><a href="answers.html#choosing-a-chart-to-display-data"><i class="fa fa-check"></i><b>11.5</b> Choosing a chart to display data</a></li>
<li class="chapter" data-level="11.6" data-path="answers.html"><a href="answers.html#plot-yearly-student-percentage"><i class="fa fa-check"></i><b>11.6</b> Plot yearly student percentage</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="answers.html"><a href="answers.html#build-the-statewide-percentage-by-year-data"><i class="fa fa-check"></i><b>11.6.1</b> Build the statewide percentage by year data</a></li>
<li class="chapter" data-level="11.6.2" data-path="answers.html"><a href="answers.html#build-the-statewide-percentage-chart"><i class="fa fa-check"></i><b>11.6.2</b> Build the statewide percentage chart</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="answers.html"><a href="answers.html#districts-by-benchmark-and-year"><i class="fa fa-check"></i><b>11.7</b> Districts by benchmark and year</a>
<ul>
<li class="chapter" data-level="11.7.1" data-path="answers.html"><a href="answers.html#build-the-audit-flag-data"><i class="fa fa-check"></i><b>11.7.1</b> Build the audit flag data</a></li>
<li class="chapter" data-level="11.7.2" data-path="answers.html"><a href="answers.html#build-the-audit-flag-chart"><i class="fa fa-check"></i><b>11.7.2</b> Build the audit flag chart</a></li>
<li class="chapter" data-level="11.7.3" data-path="answers.html"><a href="answers.html#which-chart-is-best"><i class="fa fa-check"></i><b>11.7.3</b> Which chart is best?</a></li>
</ul></li>
<li class="chapter" data-level="11.8" data-path="answers.html"><a href="answers.html#local-districts"><i class="fa fa-check"></i><b>11.8</b> Local districts</a></li>
<li class="chapter" data-level="11.9" data-path="answers.html"><a href="answers.html#the-assignments"><i class="fa fa-check"></i><b>11.9</b> The assignments</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>12</b> R Functions</a>
<ul>
<li class="chapter" data-level="12.1" data-path="functions.html"><a href="functions.html#importexport"><i class="fa fa-check"></i><b>12.1</b> Import/Export</a></li>
<li class="chapter" data-level="12.2" data-path="functions.html"><a href="functions.html#data-manipulation"><i class="fa fa-check"></i><b>12.2</b> Data manipulation</a></li>
<li class="chapter" data-level="12.3" data-path="functions.html"><a href="functions.html#aggregation"><i class="fa fa-check"></i><b>12.3</b> Aggregation</a></li>
<li class="chapter" data-level="12.4" data-path="functions.html"><a href="functions.html#math"><i class="fa fa-check"></i><b>12.4</b> Math</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="troubleshooting.html"><a href="troubleshooting.html"><i class="fa fa-check"></i><b>13</b> Troubleshooting</a>
<ul>
<li class="chapter" data-level="13.1" data-path="troubleshooting.html"><a href="troubleshooting.html#when-things-break"><i class="fa fa-check"></i><b>13.1</b> When things break</a></li>
<li class="chapter" data-level="13.2" data-path="troubleshooting.html"><a href="troubleshooting.html#checking-how-things-work"><i class="fa fa-check"></i><b>13.2</b> Checking how things work</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="troubleshooting.html"><a href="troubleshooting.html#help-docs"><i class="fa fa-check"></i><b>13.2.1</b> Help docs</a></li>
<li class="chapter" data-level="13.2.2" data-path="troubleshooting.html"><a href="troubleshooting.html#good-googling"><i class="fa fa-check"></i><b>13.2.2</b> Good Googling</a></li>
<li class="chapter" data-level="13.2.3" data-path="troubleshooting.html"><a href="troubleshooting.html#tidyverse-docs-and-cheatsheets"><i class="fa fa-check"></i><b>13.2.3</b> Tidyverse docs and cheatsheets</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="troubleshooting.html"><a href="troubleshooting.html#r-frequently-asked-questions"><i class="fa fa-check"></i><b>13.3</b> R Frequently asked Questions</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="troubleshooting.html"><a href="troubleshooting.html#functions-objects-and-variables"><i class="fa fa-check"></i><b>13.3.1</b> Functions, objects and variables</a></li>
<li class="chapter" data-level="13.3.2" data-path="troubleshooting.html"><a href="troubleshooting.html#some-r-code-basics"><i class="fa fa-check"></i><b>13.3.2</b> Some R code basics</a></li>
<li class="chapter" data-level="13.3.3" data-path="troubleshooting.html"><a href="troubleshooting.html#common-mistakes"><i class="fa fa-check"></i><b>13.3.3</b> Common Mistakes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="explore.html"><a href="explore.html"><i class="fa fa-check"></i><b>14</b> How to interview a new dataset</a>
<ul>
<li class="chapter" data-level="14.1" data-path="explore.html"><a href="explore.html#start-by-listing-questions"><i class="fa fa-check"></i><b>14.1</b> Start by listing questions</a></li>
<li class="chapter" data-level="14.2" data-path="explore.html"><a href="explore.html#understand-your-data"><i class="fa fa-check"></i><b>14.2</b> Understand your data</a></li>
<li class="chapter" data-level="14.3" data-path="explore.html"><a href="explore.html#pay-attention-to-the-shape-of-your-data"><i class="fa fa-check"></i><b>14.3</b> Pay attention to the shape of your data</a></li>
<li class="chapter" data-level="14.4" data-path="explore.html"><a href="explore.html#counting-and-aggregation"><i class="fa fa-check"></i><b>14.4</b> Counting and aggregation</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="explore.html"><a href="explore.html#counting-rows-based-on-a-column"><i class="fa fa-check"></i><b>14.4.1</b> Counting rows based on a column</a></li>
<li class="chapter" data-level="14.4.2" data-path="explore.html"><a href="explore.html#sum-mean-and-other-aggregations"><i class="fa fa-check"></i><b>14.4.2</b> Sum, mean and other aggregations</a></li>
<li class="chapter" data-level="14.4.3" data-path="explore.html"><a href="explore.html#creating-columns-to-show-difference"><i class="fa fa-check"></i><b>14.4.3</b> Creating columns to show difference</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="explore.html"><a href="explore.html#cleaning-up-categorical-data"><i class="fa fa-check"></i><b>14.5</b> Cleaning up categorical data</a></li>
<li class="chapter" data-level="14.6" data-path="explore.html"><a href="explore.html#time-as-a-variable"><i class="fa fa-check"></i><b>14.6</b> Time as a variable</a></li>
<li class="chapter" data-level="14.7" data-path="explore.html"><a href="explore.html#explore-the-distributions-in-your-data"><i class="fa fa-check"></i><b>14.7</b> Explore the distributions in your data</a>
<ul>
<li class="chapter" data-level="14.7.1" data-path="explore.html"><a href="explore.html#more-on-histograms"><i class="fa fa-check"></i><b>14.7.1</b> More on histograms</a></li>
</ul></li>
<li class="chapter" data-level="14.8" data-path="explore.html"><a href="explore.html#same-ideas-using-spreadsheets"><i class="fa fa-check"></i><b>14.8</b> Same ideas using spreadsheets</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="charts.html"><a href="charts.html"><i class="fa fa-check"></i><b>15</b> Chart production tips</a>
<ul>
<li class="chapter" data-level="15.1" data-path="charts.html"><a href="charts.html#titles-descriptions-and-annotations"><i class="fa fa-check"></i><b>15.1</b> Titles, descriptions and annotations</a></li>
<li class="chapter" data-level="15.2" data-path="charts.html"><a href="charts.html#other-considerations"><i class="fa fa-check"></i><b>15.2</b> Other considerations</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Reporting with Data in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="sums-import" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Chapter 5</span> Summarize with math - import<a href="sums-import.html#sums-import" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<blockquote>
<p>v1 draft</p>
</blockquote>
<p>This chapter is by Prof. McDonald, who uses macOS.</p>
<p><strong>Note: The data you end up using might be updated, so your numbers may be slightly different.</strong></p>
<p>With our Billboard assignment, we went through some common data wrangling processes — importing data, cleaning it and querying it for answers. All of our answers involved using <code>group_by</code>, <code>summmarize</code> and <code>arrange</code> (which I dub GSA) and we summarized with <code>n()</code> to count the number of rows in our group.</p>
<p>For this data story we need the summary trio GSA again but we want to do different kinds of math within our summarize functions, mainly <code>sum()</code>.</p>
<div id="about-the-story-military-surplus-transfers" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> About the story: Military surplus transfers<a href="sums-import.html#about-the-story-military-surplus-transfers" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>After the 2014 death of Michael Brown and the unrest that followed, there was widespread criticism of Ferguson, Mo. police officers for their use of military-grade weapons and vehicles. There was also heightened scrutiny to a federal program that transfers unused military equipment to local law enforcement. Many news outlets, <a href="https://www.npr.org/2014/09/02/342494225/mraps-and-bayonets-what-we-know-about-the-pentagons-1033-program">including NPR</a> and <a href="https://www.buzzfeednews.com/article/jimdalrympleii/war-zone-in-ferguson-how-billions-in-military-weapons-ended">Buzzfeed News</a>, did stories based on data from the “1033 program” handled through the <a href="https://www.dla.mil/DispositionServices/Offers/Reutilization/LawEnforcement/PublicInformation/">Law Enforcement Support Office</a>. Buzzfeed News also did a <a href="https://www.buzzfeednews.com/article/johntemplon/police-departments-military-gear-1033-program">followup report</a> in 2020 where reporter John Templon published his <a href="https://github.com/BuzzFeedNews/2020-06-leso-1033-transfers-since-ferguson">data analysis</a>, which he did using Python.</p>
<p>You will analyze the same dataset to see how local police agencies have used the program and write a short data drop about transfers to those agencies.</p>
<div id="the-1033-program" class="section level3 hasAnchor" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> The 1033 program<a href="sums-import.html#the-1033-program" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To work through this story we need to understand how this transfer program works. You can <a href="https://www.dla.mil/DispositionServices/Offers/Reutilization/LawEnforcement/ProgramFAQs/">read all about it here</a>, but here is the gist:</p>
<p>In 1997, Congress approved the “1033 program” that allows the U.S. military to give “surplus” equipment that they no longer need to law enforcement agencies like city police forces. The program is run by the <a href="https://www.dla.mil/DispositionServices/Offers/Reutilization/LawEnforcement/PublicInformation/">Law Enforcement Support Office</a>, which is part of the Defense Logistics Agency (which handles the global defense supply chain for all the branches of the military) within the Department of Defense. (The <strong>program</strong> is run by the <strong>office</strong> inside the <strong>agency</strong> that is part of the <strong>department</strong>.)</p>
<p>All kinds of equipment moves between the military and these agencies, from boots and water bottles to assault rifles and cargo planes. The local agency only pays for shipping the equipment, but that isn’t listed in the data. What is in the data is the “value” of the equipment in dollars, but we can’t say the agency paid for it, because they didn’t.</p>
<p>Property falls into two categories: controlled and non-controlled. <strong>Controlled</strong> property always remains on the LESO “property book” because it still belongs and is accountable to the Department of Defense. A record of the transfer stays in the data.</p>
<p>But most of the transfers are for <strong>non-controlled</strong> property that can be sold even to the general public, like boots and blankets. Those items are removed from the data after one year, unless it is deemed a special circumstance.</p>
<p>The agency releases data quarterly, but it is really a “snapshot in time” and not a complete history. Those non-controlled items transferred more than a year prior are missing.</p>
<p>The data we’ll use here was from <strong>March 31, 2022</strong> and I’ve done some initial work on the original data that is beyond the scope of this class, so we’ll use my copy of the data. <strong>I will supply a link to the combined data below.</strong></p>
</div>
<div id="about-the-data" class="section level3 hasAnchor" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> About the data<a href="sums-import.html#about-the-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There is no data dictionary or record layout included with the data but I have corresponded with the Defense Logistics Agency to get a decent understanding of what is included.</p>
<ul>
<li><strong>sheet</strong>: Which sheet the data came from. This is an artifact from the data merging script.</li>
<li><strong>state</strong>: A two-letter designation for the state of the agency.</li>
<li><strong>agency_name</strong>: This is the agency that got the equipment.</li>
<li><strong>nsn</strong>: A special number that identifies the item in a government database.</li>
<li><strong>item_name</strong>: The item transferred. Googling the names can sometimes yield more info on specific items.</li>
<li><strong>quantity</strong>: The number of the “units” the agency received.</li>
<li><strong>ui</strong>: Unit of measurement (item, kit, etc.)</li>
<li><strong>acquisition_value</strong>: a cost <em>per unit</em> for the item.</li>
<li><strong>demil_code</strong>: Categories (as single letter key values) that indicate how the item should be disposed of. <a href="https://www.dla.mil/Working-With-DLA/Federal-and-International-Cataloging/DEMIL-Coding/DEMILCodes/">Full details here</a></li>
<li><strong>demil_ic</strong>: Also part of the disposal categorization.</li>
<li><strong>ship_date</strong>: The date the item(s) were sent to the agency.</li>
<li><strong>station_type</strong>: What kind of law enforcement agency made the request.</li>
</ul>
<p>Here is a glimpse of a sample of the data:</p>
<pre><code>## Rows: 10
## Columns: 12
## $ sheet             &lt;dbl&gt; 17, 42, 5, 45, 36, 33, 5, 22, 3, 22
## $ state             &lt;chr&gt; &quot;KY&quot;, &quot;SC&quot;, &quot;CA&quot;, &quot;TX&quot;, &quot;OH&quot;, &quot;NC&quot;, &quot;CA&quot;, &quot;MI&quot;, &quot;AZ&quot;…
## $ agency_name       &lt;chr&gt; &quot;MEADE COUNTY SHERIFF DEPT&quot;, &quot;PROSPERITY POLICE DEPT…
## $ nsn               &lt;chr&gt; &quot;6115-01-435-1567&quot;, &quot;1005-00-589-1271&quot;, &quot;7520-01-519…
## $ item_name         &lt;chr&gt; &quot;GENERATOR SET,DIESEL ENGINE&quot;, &quot;RIFLE,7.62 MILLIMETE…
## $ quantity          &lt;dbl&gt; 5, 1, 32, 1, 1, 1, 1, 1, 1, 1
## $ ui                &lt;chr&gt; &quot;Each&quot;, &quot;Each&quot;, &quot;Dozen&quot;, &quot;Each&quot;, &quot;Each&quot;, &quot;Each&quot;, &quot;Ea…
## $ acquisition_value &lt;dbl&gt; 4623.09, 138.00, 16.91, 749.00, 749.00, 138.00, 499.…
## $ demil_code        &lt;chr&gt; &quot;A&quot;, &quot;D&quot;, &quot;A&quot;, &quot;D&quot;, &quot;D&quot;, &quot;D&quot;, &quot;D&quot;, &quot;D&quot;, &quot;D&quot;, &quot;D&quot;
## $ demil_ic          &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1
## $ ship_date         &lt;dttm&gt; 2021-03-22, 2007-08-07, 2020-10-29, 2014-11-18, 2014…
## $ station_type      &lt;chr&gt; &quot;State&quot;, &quot;State&quot;, &quot;State&quot;, &quot;State&quot;, &quot;State&quot;, &quot;State&quot;…</code></pre>
<p>And a look at just some of the more important columns:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="sums-import.html#cb90-1" aria-hidden="true" tabindex="-1"></a>leso_sample <span class="sc">|&gt;</span> </span>
<span id="cb90-2"><a href="sums-import.html#cb90-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(agency_name, item_name, quantity, acquisition_value)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 4
##    agency_name                      item_name          quantity acquisition_val…
##    &lt;chr&gt;                            &lt;chr&gt;                 &lt;dbl&gt;            &lt;dbl&gt;
##  1 MEADE COUNTY SHERIFF DEPT        GENERATOR SET,DIE…        5           4623. 
##  2 PROSPERITY POLICE DEPT           RIFLE,7.62 MILLIM…        1            138  
##  3 KERN COUNTY SHERIFF OFFICE       MARKER,TUBE TYPE         32             16.9
##  4 LEAGUE CITY POLICE DEPT          RIFLE,5.56 MILLIM…        1            749  
##  5 TRUMBULL COUNTY SHERIFF&#39;S OFFICE RIFLE,5.56 MILLIM…        1            749  
##  6 VALDESE POLICE DEPT              RIFLE,7.62 MILLIM…        1            138  
##  7 SACRAMENTO POLICE DEPT           RIFLE,5.56 MILLIM…        1            499  
##  8 BERRIEN COUNTY SHERIFF&#39;S OFFICE  RIFLE,5.56 MILLIM…        1            499  
##  9 LA PAZ COUNTY SHERIFF OFFICE     RIFLE,5.56 MILLIM…        1            499  
## 10 MUSKEGON HEIGHTS POLICE DEPT     RIFLE,5.56 MILLIM…        1            749</code></pre>
<p>Each row of data is a transfer of a particular type of item from the U.S. Department of Defense to a local law enforcement agency. The row includes the name of the item, the quantity, and the value ($) of a single unit.</p>
<p>What the data doesn’t have is the <strong>total value</strong> of the items in the shipment. If there are 5 generators as noted in the first row above and the cost of each one is $4623.09, we have to multiply the <code>quantity</code> times the <code>acquisition_value</code> to get the total value of that equipment.</p>
<p>The data also doesn’t have any variable indicating if an item is controlled or non-controlled, but I’ve corresponded with the Defense Logistics Agency to gain a pretty good understanding of how to isolate them based on the <strong>demil</strong>itarization codes.</p>
<p>These are things I learned about by talking to the agency and reading through documentation. This kind of reporting and understanding ABOUT your data is vital to avoid mistakes.</p>
</div>
</div>
<div id="the-questions-we-will-answer" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> The questions we will answer<a href="sums-import.html#the-questions-we-will-answer" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>First, we’ll consider only <strong>Texas</strong> data from <strong>Jan. 1, 2010</strong> to present. You answer the following:</p>
<ul>
<li><em>How many total things did each agency get and how much was it all worth?</em> Like how many things did Austin Police get and what was it worth?</li>
<li><em>What specific things did each agency get and how much were they worth?</em> Like how many rifles were sent to Austin Police and what were they worth?</li>
<li><em>How has the volume of controlled transfers (the shooting kinds of stuff) changed over time?</em> Is this program being used more/less by agencies more recently?</li>
</ul>
<p>We’ll look more closely at those results for some local agencies. You’ll research some of the more interesting items the agencies received (i.e. Google the names) so you can write about them in a data drop.</p>
</div>
<div id="getting-started-create-your-project" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Getting started: Create your project<a href="sums-import.html#getting-started-create-your-project" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We will build the same project structure that we did with the Billboard project. In fact, all our class projects will have this structure. Since we’ve done this before, some of the directions are less detailed.</p>
<ol style="list-style-type: decimal">
<li>With RStudio open, make sure you don’t have a project open. Go to File &gt; Close project.</li>
<li>Use the create project button (or File &gt; New project) to create a new project in a “New Directory”. Name the directory “yourname-military-surplus”.</li>
<li>Create two folders: <code>data-raw</code> and <code>data-processed</code>.</li>
</ol>
</div>
<div id="importcleaning-notebook" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Import/cleaning notebook<a href="sums-import.html#importcleaning-notebook" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Again, like Billboard, we’ll create a notebook specifically for downloading, cleaning and prepping our data.</p>
<ol style="list-style-type: decimal">
<li>Create your RNotebook.</li>
<li>Rename the title “Military Surplus import/clean”.</li>
<li>Remove the rest of the boilerplate template.</li>
<li>Save the file and name it <code>01-import.Rmd</code>.</li>
</ol>
<div id="the-goals-of-the-notebook" class="section level3 hasAnchor" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> The goals of the notebook<a href="sums-import.html#the-goals-of-the-notebook" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As noted before, I separate cleaning into a separate notebook so that each subsequent analysis notebook can take advantage of that work. It’s the DRY principal in programming: Don’t Repeat Yourself. Often I will be in an analysis notebook realizing that it would be helpful to add a cleaning step to my import notebook, and I will.
Because I’ve worked with and researched this data, I’m aware of cleaning steps that a newcomer exploring the might not be aware of at this point. But here we will take advantage of my experience and so all this work up front even though you haven’t seen the “need” for them yet.</p>
<p>That’s a long-winded opening to say let’s add our notebook goals so you know what’s going on here.</p>
<ol style="list-style-type: decimal">
<li>In Markdown, add a headline noting these are notebook goals.</li>
<li>Add the goals below:</li>
</ol>
<pre class="text"><code>- Download the data
- Import the data
- Check datatypes
- Create a total_value variable
- Create a control_type variable
- Filter to Texas agencies
- Filter the date range (since Jan. 1 2010)
- Export the cleaned data</code></pre>
</div>
<div id="add-a-setup-section" class="section level3 hasAnchor" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> Add a setup section<a href="sums-import.html#add-a-setup-section" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This is the section in the notebook where we add our libraries and such. Again, every notebook has this section, though the packages may vary on need.</p>
<ol style="list-style-type: decimal">
<li>Add a headline and text about what we are doing: Our project setup.</li>
<li>Add a code chunk to load the libraries. You should only need <code>tidyverse</code> for this notebook because the data already has clean names (no need for janitor) and the dates will import correctly (no need for lubridate for this notebook, but will will use it for our analysis).</li>
</ol>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="sums-import.html#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
</div>
<div id="download-the-data" class="section level3 hasAnchor" number="5.4.3">
<h3><span class="header-section-number">5.4.3</span> Download the data<a href="sums-import.html#download-the-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li>A new section means a new headline and description. Add it. It is good practice to describe and link to the data you will be using. You can use this:</li>
</ol>
<pre class="text"><code>While the data we will use here if from Prof. McDonald, it is from the [Law Enforcement Support Office](https://www.dla.mil/DispositionServices/Offers/Reutilization/LawEnforcement/PublicInformation/). Find more information [about the program here](https://www.dla.mil/DispositionServices/Offers/Reutilization/LawEnforcement/ProgramFAQs/).</code></pre>
<ol style="list-style-type: decimal">
<li>Use the <code>download.file()</code> function to download the date into your <code>data-raw</code> folder. Remember you need two arguments:</li>
</ol>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="sums-import.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="st">&quot;url_to_data&quot;</span>, <span class="st">&quot;path_to_folder/filename.csv&quot;</span>)</span></code></pre></div>
<p>Windows users might need to add an additional argument: <code>mode = "wb"</code>.</p>
<ul>
<li>The data can be found at this url: <code>https://raw.githubusercontent.com/utdata/rwdir/main/data-raw/leso.csv</code></li>
<li>It should be saved into your <code>data-raw</code> folder with a name for the file.</li>
</ul>
<p>Once you’ve built your code chunk and run it, you should make sure the file downloaded into the correct place: in your <code>data-raw</code> folder.</p>
<details>
<summary>
Try this on your own first
</summary>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="sums-import.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># You can comment the line below once you have the data</span></span>
<span id="cb96-2"><a href="sums-import.html#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="st">&quot;https://raw.githubusercontent.com/utdata/rwdir/main/data-raw/leso.csv&quot;</span>,</span>
<span id="cb96-3"><a href="sums-import.html#cb96-3" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;data-raw/leso.csv&quot;</span>, <span class="at">mode =</span> <span class="st">&quot;wb&quot;</span>)</span></code></pre></div>
</details>
</div>
<div id="import-the-data-1" class="section level3 hasAnchor" number="5.4.4">
<h3><span class="header-section-number">5.4.4</span> Import the data<a href="sums-import.html#import-the-data-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We are again working with a CSV, or comma-separated-values text file.</p>
<ol style="list-style-type: decimal">
<li>Add a new section: Headline, text if needed, code chunk.</li>
</ol>
<p>I suggest you build the code chunk a bit at a time in this order:</p>
<ol style="list-style-type: decimal">
<li>Use <code>read_csv()</code> to read the file from our <code>data-raw</code> folder.</li>
<li>Edit that line to put the result into a tibble object using <code>&lt;-</code>. Name your new tibble <code>leso</code>.</li>
<li>Print the tibble as a table to the screen again by putting the tibble object on a new line and running it. This allows you to see it in columnar form.</li>
</ol>
<details>
<summary>
Try real hard first before clicking here for the answer. Note the book will also show the response.
</summary>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="sums-import.html#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># assigning the tibble</span></span>
<span id="cb97-2"><a href="sums-import.html#cb97-2" aria-hidden="true" tabindex="-1"></a>leso <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data-raw/leso.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Rows: 124848 Columns: 12
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr  (7): state, agency_name, nsn, item_name, ui, demil_code, station_type
## dbl  (4): sheet, quantity, acquisition_value, demil_ic
## dttm (1): ship_date
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="sums-import.html#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co"># printing the tibble</span></span>
<span id="cb99-2"><a href="sums-import.html#cb99-2" aria-hidden="true" tabindex="-1"></a>leso</span></code></pre></div>
<pre><code>## # A tibble: 124,848 × 12
##    sheet state agency_name       nsn   item_name quantity ui    acquisition_val…
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;             &lt;chr&gt; &lt;chr&gt;        &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt;
##  1     1 AL    ABBEVILLE POLICE… 2540… BALLISTI…       10 Kit             15872.
##  2     1 AL    ABBEVILLE POLICE… 1240… OPTICAL …        1 Each              246.
##  3     1 AL    ABBEVILLE POLICE… 1005… MOUNT,RI…       10 Each             1626 
##  4     1 AL    ABBEVILLE POLICE… 1240… SIGHT,RE…        9 Each              333 
##  5     1 AL    ABBEVILLE POLICE… 5855… ILLUMINA…       10 Each              926 
##  6     1 AL    ABBEVILLE POLICE… 2355… MINE RES…        1 Each           658000 
##  7     1 AL    ABBEVILLE POLICE… 2320… TRUCK,UT…        1 Each            62627 
##  8     1 AL    ABBEVILLE POLICE… 1385… UNMANNED…        1 Each            10000 
##  9     1 AL    ABBEVILLE POLICE… 6760… CAMERA R…        1 Each             1500 
## 10     1 AL    ABBEVILLE POLICE… 2320… TRUCK,UT…        1 Each            62627 
## # … with 124,838 more rows, and 4 more variables: demil_code &lt;chr&gt;,
## #   demil_ic &lt;dbl&gt;, ship_date &lt;dttm&gt;, station_type &lt;chr&gt;</code></pre>
</details>
</div>
<div id="glimpse-the-data-1" class="section level3 hasAnchor" number="5.4.5">
<h3><span class="header-section-number">5.4.5</span> Glimpse the data<a href="sums-import.html#glimpse-the-data-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li>In a new block, print the tibble but pipe it into <code>glimpse()</code> so you can see all the column names.</li>
</ol>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="sums-import.html#cb101-1" aria-hidden="true" tabindex="-1"></a>leso <span class="sc">|&gt;</span>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 124,848
## Columns: 12
## $ sheet             &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
## $ state             &lt;chr&gt; &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;…
## $ agency_name       &lt;chr&gt; &quot;ABBEVILLE POLICE DEPT&quot;, &quot;ABBEVILLE POLICE DEPT&quot;, &quot;A…
## $ nsn               &lt;chr&gt; &quot;2540-01-565-4700&quot;, &quot;1240-DS-OPT-SIGH&quot;, &quot;1005-01-587…
## $ item_name         &lt;chr&gt; &quot;BALLISTIC BLANKET KIT&quot;, &quot;OPTICAL SIGHTING AND RANGI…
## $ quantity          &lt;dbl&gt; 10, 1, 10, 9, 10, 1, 1, 1, 1, 1, 1, 1, 3, 12, 1, 5, …
## $ ui                &lt;chr&gt; &quot;Kit&quot;, &quot;Each&quot;, &quot;Each&quot;, &quot;Each&quot;, &quot;Each&quot;, &quot;Each&quot;, &quot;Each…
## $ acquisition_value &lt;dbl&gt; 15871.59, 245.88, 1626.00, 333.00, 926.00, 658000.00…
## $ demil_code        &lt;chr&gt; &quot;D&quot;, &quot;D&quot;, &quot;D&quot;, &quot;D&quot;, &quot;D&quot;, &quot;C&quot;, &quot;C&quot;, &quot;Q&quot;, &quot;D&quot;, &quot;C&quot;, &quot;C…
## $ demil_ic          &lt;dbl&gt; 1, NA, 1, 1, 1, 1, 1, 3, 7, 1, 1, NA, 1, 1, 1, 1, 1,…
## $ ship_date         &lt;dttm&gt; 2018-01-30, 2016-06-02, 2016-09-19, 2016-09-14, 201…
## $ station_type      &lt;chr&gt; &quot;State&quot;, &quot;State&quot;, &quot;State&quot;, &quot;State&quot;, &quot;State&quot;, &quot;State&quot;…</code></pre>
<div id="checking-datatypes" class="section level4 hasAnchor" number="5.4.5.1">
<h4><span class="header-section-number">5.4.5.1</span> Checking datatypes<a href="sums-import.html#checking-datatypes" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Take a look at your glimpse returns. These are the things to watch for:</p>
<ul>
<li>Are your variable names (column names) clean? All lowercase with <code>_</code> separating words?</li>
<li>Are dates saved in a date format? <code>ship_date</code> looks good at <code>&lt;dttm&gt;</code>, which means “datetime”.</li>
<li>Are your numbers really numbers? <code>acquisition_value</code> is the column we are most concerned about here, and it looks good.</li>
</ul>
<p>This data set looks good (because I pre-prepared it fo you), but you always want to check and make corrections, like we did to fix the date in the Billboard assignment.</p>
</div>
</div>
<div id="remove-unnecessary-columns" class="section level3 hasAnchor" number="5.4.6">
<h3><span class="header-section-number">5.4.6</span> Remove unnecessary columns<a href="sums-import.html#remove-unnecessary-columns" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sometimes at this point in a project, you might not know what columns you need to keep and which you could do without. The nice thing about doing this with code in a notebook is we can always go back, make corrections and run our notebook again. In this case, we will remove the <code>-sheet</code> column since we don’t need it. (It’s an artifact of the processing I’ve done on the file.)</p>
<ol style="list-style-type: decimal">
<li>Start a new section with a headline, text to explain you are removing unneeded columns.</li>
<li>Add a code chunk and the following code. I’ll explain it below.</li>
</ol>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="sums-import.html#cb103-1" aria-hidden="true" tabindex="-1"></a>leso_tight <span class="ot">&lt;-</span> leso <span class="sc">|&gt;</span> </span>
<span id="cb103-2"><a href="sums-import.html#cb103-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>sheet)</span>
<span id="cb103-3"><a href="sums-import.html#cb103-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-4"><a href="sums-import.html#cb103-4" aria-hidden="true" tabindex="-1"></a>leso_tight <span class="sc">|&gt;</span> <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 124,848
## Columns: 11
## $ state             &lt;chr&gt; &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;…
## $ agency_name       &lt;chr&gt; &quot;ABBEVILLE POLICE DEPT&quot;, &quot;ABBEVILLE POLICE DEPT&quot;, &quot;A…
## $ nsn               &lt;chr&gt; &quot;2540-01-565-4700&quot;, &quot;1240-DS-OPT-SIGH&quot;, &quot;1005-01-587…
## $ item_name         &lt;chr&gt; &quot;BALLISTIC BLANKET KIT&quot;, &quot;OPTICAL SIGHTING AND RANGI…
## $ quantity          &lt;dbl&gt; 10, 1, 10, 9, 10, 1, 1, 1, 1, 1, 1, 1, 3, 12, 1, 5, …
## $ ui                &lt;chr&gt; &quot;Kit&quot;, &quot;Each&quot;, &quot;Each&quot;, &quot;Each&quot;, &quot;Each&quot;, &quot;Each&quot;, &quot;Each…
## $ acquisition_value &lt;dbl&gt; 15871.59, 245.88, 1626.00, 333.00, 926.00, 658000.00…
## $ demil_code        &lt;chr&gt; &quot;D&quot;, &quot;D&quot;, &quot;D&quot;, &quot;D&quot;, &quot;D&quot;, &quot;C&quot;, &quot;C&quot;, &quot;Q&quot;, &quot;D&quot;, &quot;C&quot;, &quot;C…
## $ demil_ic          &lt;dbl&gt; 1, NA, 1, 1, 1, 1, 1, 3, 7, 1, 1, NA, 1, 1, 1, 1, 1,…
## $ ship_date         &lt;dttm&gt; 2018-01-30, 2016-06-02, 2016-09-19, 2016-09-14, 201…
## $ station_type      &lt;chr&gt; &quot;State&quot;, &quot;State&quot;, &quot;State&quot;, &quot;State&quot;, &quot;State&quot;, &quot;State&quot;…</code></pre>
<p>In English, we are creating a new tibble <code>leso_tight</code> and then filling it with this: <code>leso</code> and then use select to remove the colunn called <code>sheet</code>. We then glimpse the new data.</p>
<p>So now we have a tibble called <code>leso_tight</code> that we will work with in the next section.</p>
</div>
<div id="create-a-total_value-column" class="section level3 hasAnchor" number="5.4.7">
<h3><span class="header-section-number">5.4.7</span> Create a total_value column<a href="sums-import.html#create-a-total_value-column" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>During my reporting about this data I learned that the <code>acquisition_value</code> noted in the data is for a single “unit” of each item. If the shipment item was a rifle with a <code>quantity</code> of “5” and <code>acquisition_value</code> of “200”, then each rifle is worth $200, but the total shipment would be 5 times $200, or $1,000. That $1000 total value is not listed in the data, so we need to add it.</p>
<p>Let’s walk through how to do that with a different example.</p>
<p>When we used <code>mutate()</code> to convert the date in the Billboard assignment, we were reassigning values in each row of a column back into the same column.</p>
<p>In this assignment, we will use <code>mutate()</code> to create a <strong>new</strong> column with new values based on a calculation (<code>quantity</code> multiplied by the <code>acquisition_value</code>) for each row. Let’s review the concept first.</p>
<p>If you started with data like this:</p>
<table>
<thead>
<tr class="header">
<th>item</th>
<th align="right">item_count</th>
<th align="right">item_value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Bread</td>
<td align="right">2</td>
<td align="right">1.5</td>
</tr>
<tr class="even">
<td>Milk</td>
<td align="right">1</td>
<td align="right">2.75</td>
</tr>
<tr class="odd">
<td>Beer</td>
<td align="right">3</td>
<td align="right">9</td>
</tr>
</tbody>
</table>
<p>And wanted to create a total value of each item in the table, you would use <code>mutate()</code>:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="sums-import.html#cb105-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb105-2"><a href="sums-import.html#cb105-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_value =</span> item_count <span class="sc">*</span> item_value)</span></code></pre></div>
<p>And you would get a return like this, with your new <code>total_value</code> column added at the end:</p>
<table>
<thead>
<tr class="header">
<th>item</th>
<th align="right">item_count</th>
<th align="right">item_value</th>
<th align="right">total_value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Bread</td>
<td align="right">2</td>
<td align="right">1.5</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td>Milk</td>
<td align="right">1</td>
<td align="right">2.75</td>
<td align="right">2.75</td>
</tr>
<tr class="odd">
<td>Beer</td>
<td align="right">3</td>
<td align="right">9</td>
<td align="right">27</td>
</tr>
</tbody>
</table>
<p>Other math operators work as well: <code>+</code>, <code>-</code>, <code>*</code> and <code>/</code>.</p>
<p>So, now that we’ve talked about how it is done, I want you to:</p>
<ol style="list-style-type: decimal">
<li>Create a new section with headline, text and code chunk.</li>
<li>Use <code>mutate()</code> to create a new <code>total_value</code> column that multiplies <code>quantity</code> times <code>acquisition_value</code>.</li>
<li>Assign those results into a new tibble called <code>leso_total</code> so we can all be on the same page.</li>
<li>Glimpse the new tibble so you can check the results.</li>
</ol>
<details>
<summary>
Try it on your own. You can figure it out!
</summary>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="sums-import.html#cb106-1" aria-hidden="true" tabindex="-1"></a>leso_total <span class="ot">&lt;-</span> leso_tight <span class="sc">|&gt;</span> </span>
<span id="cb106-2"><a href="sums-import.html#cb106-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb106-3"><a href="sums-import.html#cb106-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_value =</span> quantity <span class="sc">*</span> acquisition_value</span>
<span id="cb106-4"><a href="sums-import.html#cb106-4" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb106-5"><a href="sums-import.html#cb106-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-6"><a href="sums-import.html#cb106-6" aria-hidden="true" tabindex="-1"></a>leso_total <span class="sc">|&gt;</span> <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 124,848
## Columns: 12
## $ state             &lt;chr&gt; &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;…
## $ agency_name       &lt;chr&gt; &quot;ABBEVILLE POLICE DEPT&quot;, &quot;ABBEVILLE POLICE DEPT&quot;, &quot;A…
## $ nsn               &lt;chr&gt; &quot;2540-01-565-4700&quot;, &quot;1240-DS-OPT-SIGH&quot;, &quot;1005-01-587…
## $ item_name         &lt;chr&gt; &quot;BALLISTIC BLANKET KIT&quot;, &quot;OPTICAL SIGHTING AND RANGI…
## $ quantity          &lt;dbl&gt; 10, 1, 10, 9, 10, 1, 1, 1, 1, 1, 1, 1, 3, 12, 1, 5, …
## $ ui                &lt;chr&gt; &quot;Kit&quot;, &quot;Each&quot;, &quot;Each&quot;, &quot;Each&quot;, &quot;Each&quot;, &quot;Each&quot;, &quot;Each…
## $ acquisition_value &lt;dbl&gt; 15871.59, 245.88, 1626.00, 333.00, 926.00, 658000.00…
## $ demil_code        &lt;chr&gt; &quot;D&quot;, &quot;D&quot;, &quot;D&quot;, &quot;D&quot;, &quot;D&quot;, &quot;C&quot;, &quot;C&quot;, &quot;Q&quot;, &quot;D&quot;, &quot;C&quot;, &quot;C…
## $ demil_ic          &lt;dbl&gt; 1, NA, 1, 1, 1, 1, 1, 3, 7, 1, 1, NA, 1, 1, 1, 1, 1,…
## $ ship_date         &lt;dttm&gt; 2018-01-30, 2016-06-02, 2016-09-19, 2016-09-14, 201…
## $ station_type      &lt;chr&gt; &quot;State&quot;, &quot;State&quot;, &quot;State&quot;, &quot;State&quot;, &quot;State&quot;, &quot;State&quot;…
## $ total_value       &lt;dbl&gt; 158715.90, 245.88, 16260.00, 2997.00, 9260.00, 65800…</code></pre>
</details>
<p><br></p>
<p><strong>Check that it worked!!</strong>. Use the glimpsed data to check the first item: For me, 10 * 15871.59 = 158715.90, which is correct!</p>
<p>Note that new columns are added at the end of the tibble. That is why I suggested you glimpse the data instead of printing the tibble so you can easily see results on one screen.</p>
</div>
<div id="controlled-vs.-non-controlled" class="section level3 hasAnchor" number="5.4.8">
<h3><span class="header-section-number">5.4.8</span> Controlled vs. non-controlled<a href="sums-import.html#controlled-vs.-non-controlled" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Again, by reading through the <a href="https://www.dla.mil/DispositionServices/Offers/Reutilization/LawEnforcement/PublicInformation/">documentation</a> about this data I learned about controlled vs non-controlled property. Basically non-controlled generic stuff like boots and blankets are removed from the data after one year, but controlled items like guns and airplanes remain on the list until they are returned to the military for disposal. It is the mainly the controlled items we are concerned with.</p>
<p>There isn’t anything the data that says it is “controlled” and really no clear indication in the documentation on how to tell what is what. So, I emailed the agency and asked them. Here was their answer, edited:</p>
<blockquote>
<p>Property with the DEMIL codes A and Q6 are considered non-controlled general property and fall off the LESO property books after one year. All other Demil codes are considered controlled items and stay on the LESO property book until returned to DLA for disposition/disposal. However, there are some exceptions. For instance, aircraft are always controlled regardless of the demil code. Also, LESO has the discretion to keep items as controlled despite the demil code. This happens with some high value items. There isn’t a standard minimum value. It also may also depend on the type of property.</p>
</blockquote>
<p>This actually took some back and forth to figure out, as I had noticed there were AIRPLANE, CARGO-TRANSPORT items in the data that were older than a year, along with some surveillance robots. That’s when they replied about the airplanes, but it turns out the robots were simply an error. DATA IS DIRTY when humans get involved; somebody coded it wrong.</p>
<p>These “DEMIL codes” they referenced are the <code>demil_code</code> and <code>demil_ic</code> columns in the data, so we can use those to mark which records are “non-controlled” (A and Q6) and then mark all the rest as “controlled”. We know of one exception – airplanes – which we need to mark controlled. We can’t do much with the “high value” items since there isn’t logic available to find them. We’ll just have to note that in our story, something like “the agency sometimes designates high value items like airplanes as controlled, but they are not categorized as such and may have been dropped from our analysis.”</p>
<p>But, we can catch most of them … we just need to work through the logic. This is not an uncommon challenge in data science, so we have some tools to do this. Our workhorse is the <code>case_when()</code> function, where we can make decisions based on values in our data.</p>
<p>I usually approach this by thinking of the logic first, then writing some code, then testing it. Sometimes my logic is faulty and I have to try again, which is why we test the results. Know this could go on for many cycles. In the interest of time and getting this done, I will just show the finished code and explain how it works.</p>
<p>Here the basic idea:</p>
<ul>
<li>We want to create a new column to denote if the item is controlled.</li>
<li>In that column we want it to be TRUE when an item is controlled, and FALSE when it is not.</li>
<li>We know that items that with “AIRPLANE” are always controlled, no matter their demil designations.</li>
<li>Otherwise we know that items that have a <code>demil_code</code> of “A”, OR a <code>demil_code</code> of “Q” AND a <code>demil_id</code> of “6”, are non-controlled.</li>
<li>Everything else is controlled.</li>
</ul>
<p>I’ve noted this logic in a specific order for a reason: It’s the order that we write the logic in the code based on how the function <code>case_when()</code> works.</p>
</div>
<div id="categorization-logic-with-case_when" class="section level3 hasAnchor" number="5.4.9">
<h3><span class="header-section-number">5.4.9</span> Categorization logic with case_when()<a href="sums-import.html#categorization-logic-with-case_when" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We will use the <code>mutate()</code> function to create a new column called <code>control_type</code>. We’ve done that before, so no problem.</p>
<p>But this time we will fill in values in the new column based on other data inside each row. <code>case_when()</code> allows us to create a test (or number of tests) and then mark the new value based on the answer. Once new data has been written the function goes to the next row, so we write the most specific rules first.</p>
<p>This process is powerful and can get complicated depending on the logic needed. This example is perhaps more complicated than I like to explain this process, but this is real data we <em>need</em> this, so here we go.</p>
<p>This is the code that does what we need and you can copy/paste the whole chunk, but be sure to read the explanation that follows it.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="sums-import.html#cb108-1" aria-hidden="true" tabindex="-1"></a>leso_control <span class="ot">&lt;-</span> leso_total <span class="sc">|&gt;</span> </span>
<span id="cb108-2"><a href="sums-import.html#cb108-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb108-3"><a href="sums-import.html#cb108-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">control_type =</span> <span class="fu">case_when</span>(</span>
<span id="cb108-4"><a href="sums-import.html#cb108-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(item_name, <span class="st">&quot;AIRPLANE&quot;</span>) <span class="sc">~</span> T,</span>
<span id="cb108-5"><a href="sums-import.html#cb108-5" aria-hidden="true" tabindex="-1"></a>      (demil_code <span class="sc">==</span> <span class="st">&quot;A&quot;</span> <span class="sc">|</span> (demil_code <span class="sc">==</span> <span class="st">&quot;Q&quot;</span> <span class="sc">&amp;</span> demil_ic <span class="sc">==</span> <span class="dv">6</span>)) <span class="sc">~</span> F,</span>
<span id="cb108-6"><a href="sums-import.html#cb108-6" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> T</span>
<span id="cb108-7"><a href="sums-import.html#cb108-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb108-8"><a href="sums-import.html#cb108-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb108-9"><a href="sums-import.html#cb108-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-10"><a href="sums-import.html#cb108-10" aria-hidden="true" tabindex="-1"></a>leso_control <span class="sc">|&gt;</span> <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 124,848
## Columns: 13
## $ state             &lt;chr&gt; &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;…
## $ agency_name       &lt;chr&gt; &quot;ABBEVILLE POLICE DEPT&quot;, &quot;ABBEVILLE POLICE DEPT&quot;, &quot;A…
## $ nsn               &lt;chr&gt; &quot;2540-01-565-4700&quot;, &quot;1240-DS-OPT-SIGH&quot;, &quot;1005-01-587…
## $ item_name         &lt;chr&gt; &quot;BALLISTIC BLANKET KIT&quot;, &quot;OPTICAL SIGHTING AND RANGI…
## $ quantity          &lt;dbl&gt; 10, 1, 10, 9, 10, 1, 1, 1, 1, 1, 1, 1, 3, 12, 1, 5, …
## $ ui                &lt;chr&gt; &quot;Kit&quot;, &quot;Each&quot;, &quot;Each&quot;, &quot;Each&quot;, &quot;Each&quot;, &quot;Each&quot;, &quot;Each…
## $ acquisition_value &lt;dbl&gt; 15871.59, 245.88, 1626.00, 333.00, 926.00, 658000.00…
## $ demil_code        &lt;chr&gt; &quot;D&quot;, &quot;D&quot;, &quot;D&quot;, &quot;D&quot;, &quot;D&quot;, &quot;C&quot;, &quot;C&quot;, &quot;Q&quot;, &quot;D&quot;, &quot;C&quot;, &quot;C…
## $ demil_ic          &lt;dbl&gt; 1, NA, 1, 1, 1, 1, 1, 3, 7, 1, 1, NA, 1, 1, 1, 1, 1,…
## $ ship_date         &lt;dttm&gt; 2018-01-30, 2016-06-02, 2016-09-19, 2016-09-14, 201…
## $ station_type      &lt;chr&gt; &quot;State&quot;, &quot;State&quot;, &quot;State&quot;, &quot;State&quot;, &quot;State&quot;, &quot;State&quot;…
## $ total_value       &lt;dbl&gt; 158715.90, 245.88, 16260.00, 2997.00, 9260.00, 65800…
## $ control_type      &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE…</code></pre>
<p>OK, let’s go through the code line-by-line.</p>
<ul>
<li>Our first line creates a new tibble and fills it with the result of the rest of our expression. We start with the <code>leso_total</code> tibble.</li>
<li>We mutate the data and start with the name of new column: <code>control_type</code>. We are filling that column with the result of the <code>case_when()</code> function for each row.</li>
<li>Within the <code>case_when()</code> we are making the determination if the item is controlled or not. The left side of the <code>~</code> is the test, and the right side of <code>~</code> is what we enter into the column. But we have more than one test:
<ul>
<li>The first test is we use the <a href="https://stringr.tidyverse.org/reference/str_detect.html"><code>str_detect()</code></a> function to look inside the <code>item_name</code> field looking for the term “AIRPLANE”. If the test finds the term, then the <code>control_type</code> field gets a value of <code>TRUE</code> and we move to the next row. If not, it moves to the next rule to see if that is a match. (We could fill this column with any text or number we want, but we are using <code>TRUE</code> and <code>FALSE</code> because that is the most basic kind of data to keep. If the item is controlled, set the value is TRUE. If not, it should be set to FALSE.)</li>
<li>Our second rule has two complex tests and we want to mark the row FALSE if either are true. (Remember, this is based on what the DLA told me: items with A or Q6 are non-controlled.) Our <code>case_when()</code> logic first looks for the value “A” in the <code>demil_code</code> field. If it is yes, then it marks the row FALSE. If no it goes to the next part: Is there a “Q” in the <code>demil_code</code> field AND a “6” in the <code>demil_ic</code> field? Both “Q” and “6” have to be there to get marked as FALSE. If both fail, then we move to the next test.</li>
<li>The last test is our catch-all. If none of the other rules apply, then mark this row as <code>TRUE</code>, which means it is controlled. So our default in the end is to mark everything TRUE if any of the other rules don’t mark it first.</li>
</ul></li>
<li>Lastly the glimpse at the data just so we can see the column was created.</li>
</ul>
<p>As I said, we skipped the process of figuring all that out line-by-line, but I’ll show some tests here to who we did what we were intending.</p>
<p>This shows airplanes are marked as controlled with <code>TRUE</code>.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="sums-import.html#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># showing the results and some columns that determined them</span></span>
<span id="cb110-2"><a href="sums-import.html#cb110-2" aria-hidden="true" tabindex="-1"></a>leso_control <span class="sc">|&gt;</span> </span>
<span id="cb110-3"><a href="sums-import.html#cb110-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(item_name, demil_code, demil_ic, control_type) <span class="sc">|&gt;</span> </span>
<span id="cb110-4"><a href="sums-import.html#cb110-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(item_name, <span class="st">&quot;AIRPLANE&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 14 × 4
##    item_name                demil_code demil_ic control_type
##    &lt;chr&gt;                    &lt;chr&gt;         &lt;dbl&gt; &lt;lgl&gt;       
##  1 AIRPLANE,CARGO-TRANSPORT Q                 6 TRUE        
##  2 AIRPLANE,CARGO-TRANSPORT Q                 6 TRUE        
##  3 FIRST AID KIT,AIRPLANE   A                 1 TRUE        
##  4 FIRST AID KIT,AIRPLANE   A                 1 TRUE        
##  5 AIRPLANE,CARGO-TRANSPORT Q                 6 TRUE        
##  6 AIRPLANE,CARGO-TRANSPORT Q                 6 TRUE        
##  7 AIRPLANE,CARGO-TRANSPORT Q                 6 TRUE        
##  8 FIRST AID KIT,AIRPLANE   A                 1 TRUE        
##  9 AIRPLANE,CARGO-TRANSPORT Q                 6 TRUE        
## 10 AIRPLANE,CARGO-TRANSPORT Q                 6 TRUE        
## 11 AIRPLANE,CARGO-TRANSPORT Q                 6 TRUE        
## 12 AIRPLANE,CARGO-TRANSPORT Q                 6 TRUE        
## 13 AIRPLANE,CARGO-TRANSPORT Q                 6 TRUE        
## 14 AIRPLANE,FLIGHT T42A     Q                 3 TRUE</code></pre>
<p>This shows how many items are marked TRUE vs FALSE for each <code>demil_code</code> and <code>demil_ic</code> combination. Don’t sweat over this code as we cover it in later chapters but here I was looking that most A records were FALSE, along with Q6.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="sums-import.html#cb112-1" aria-hidden="true" tabindex="-1"></a>leso_control <span class="sc">|&gt;</span> </span>
<span id="cb112-2"><a href="sums-import.html#cb112-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(demil_code, demil_ic, control_type, <span class="at">name =</span> <span class="st">&quot;cnt&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb112-3"><a href="sums-import.html#cb112-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> control_type, <span class="at">values_from =</span> cnt) <span class="sc">|&gt;</span> </span>
<span id="cb112-4"><a href="sums-import.html#cb112-4" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>()</span></code></pre></div>
<div id="htmlwidget-f40d39c8eb00249aeec9" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-f40d39c8eb00249aeec9">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29"],["A","A","A","A","B","B","B","C","C","C","C","C","D","D","D","D","D","E","E","E","F","F","F","Q","Q","Q","Q","Q","Q"],[0,1,7,null,0,3,null,0,1,4,7,null,0,1,4,7,null,1,7,null,1,7,null,0,1,3,5,6,null],[4,8315,224,4594,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,169,null],[null,3,null,null,1,31,115,1,6162,2,232,558,18,88733,10,1081,2888,125,6,3,4938,1180,25,1,7,5383,1,10,28]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>demil_code<\/th>\n      <th>demil_ic<\/th>\n      <th>FALSE<\/th>\n      <th>TRUE<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>OK, onto the next task to get Texas data for specific dates.</p>
</div>
<div id="filtering-our-data" class="section level3 hasAnchor" number="5.4.10">
<h3><span class="header-section-number">5.4.10</span> Filtering our data<a href="sums-import.html#filtering-our-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You used <code>filter()</code> in the Billboard lesson to get No. 1 songs and to get a date range of data. We need to do something similar here to get only Texas data of a certain date range, but we’ll build the filters one at a time so we can check the results.</p>
<div id="apply-the-tx-filter" class="section level4 hasAnchor" number="5.4.10.1">
<h4><span class="header-section-number">5.4.10.1</span> Apply the TX filter<a href="sums-import.html#apply-the-tx-filter" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ol style="list-style-type: decimal">
<li>Create a new section with headlines and text that denote you are filtering the data to Texas and since Jan. 1, 2010</li>
<li>Create the code chunk and start your filter process using the <code>leso_control</code> tibble.</li>
<li>Use <code>filter()</code> on the <code>state</code> column to keep all rows with “TX”.</li>
</ol>
<details>
<summary>
Try this on your own, but the code is here.
</summary>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="sums-import.html#cb113-1" aria-hidden="true" tabindex="-1"></a>leso_control <span class="sc">|&gt;</span> </span>
<span id="cb113-2"><a href="sums-import.html#cb113-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb113-3"><a href="sums-import.html#cb113-3" aria-hidden="true" tabindex="-1"></a>    state <span class="sc">==</span> <span class="st">&quot;TX&quot;</span></span>
<span id="cb113-4"><a href="sums-import.html#cb113-4" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 8,663 × 13
##    state agency_name  nsn   item_name quantity ui    acquisition_val… demil_code
##    &lt;chr&gt; &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt;        &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt; &lt;chr&gt;     
##  1 TX    ABERNATHY P… 1005… PISTOL,C…        1 Each              58.7 D         
##  2 TX    ABERNATHY P… 1005… PISTOL,C…        1 Each              58.7 D         
##  3 TX    ABERNATHY P… 1005… PISTOL,C…        1 Each              58.7 D         
##  4 TX    ABERNATHY P… 1005… PISTOL,C…        1 Each              58.7 D         
##  5 TX    ABERNATHY P… 1005… RIFLE,5.…        1 Each             749   D         
##  6 TX    ABERNATHY P… 2320… TRUCK,UT…        1 Each           62627   C         
##  7 TX    ABERNATHY P… 1240… SIGHT,RE…        5 Each             333   D         
##  8 TX    ABERNATHY P… 1005… RIFLE,5.…        1 Each             749   D         
##  9 TX    ABERNATHY P… 1005… PISTOL,C…        1 Each              58.7 D         
## 10 TX    ABILENE POL… 1005… RIFLE,5.…        1 Each             499   D         
## # … with 8,653 more rows, and 5 more variables: demil_ic &lt;dbl&gt;,
## #   ship_date &lt;dttm&gt;, station_type &lt;chr&gt;, total_value &lt;dbl&gt;, control_type &lt;lgl&gt;</code></pre>
</details>
<p>How do you know if it worked? Well the first column in the data is the <code>state</code> column, so they should all start with “TX”. Also note you started with nearly 130k observations (rows), and there are only 8,600+ in Texas.</p>
</div>
<div id="add-the-date-filter" class="section level4 hasAnchor" number="5.4.10.2">
<h4><span class="header-section-number">5.4.10.2</span> Add the date filter<a href="sums-import.html#add-the-date-filter" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ol style="list-style-type: decimal">
<li>Now, <strong>EDIT THAT SAME CHUNK</strong> to add a new part to your filter to also get rows with a <code>ship_date</code> of 2010-01-01 or later.</li>
<li>Save the result into a new tibble called <code>leso_filtered</code>.</li>
<li>Print out the new tibble <code>leso_filtered</code>.</li>
</ol>
<details>
<summary>
If you do this on your own, treat yourself to a cookie
</summary>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="sums-import.html#cb115-1" aria-hidden="true" tabindex="-1"></a>leso_filtered <span class="ot">&lt;-</span> leso_total <span class="sc">|&gt;</span> </span>
<span id="cb115-2"><a href="sums-import.html#cb115-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb115-3"><a href="sums-import.html#cb115-3" aria-hidden="true" tabindex="-1"></a>    state <span class="sc">==</span> <span class="st">&quot;TX&quot;</span>,</span>
<span id="cb115-4"><a href="sums-import.html#cb115-4" aria-hidden="true" tabindex="-1"></a>    ship_date <span class="sc">&gt;=</span> <span class="st">&quot;2010-01-01&quot;</span></span>
<span id="cb115-5"><a href="sums-import.html#cb115-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb115-6"><a href="sums-import.html#cb115-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-7"><a href="sums-import.html#cb115-7" aria-hidden="true" tabindex="-1"></a>leso_filtered</span></code></pre></div>
<pre><code>## # A tibble: 7,411 × 12
##    state agency_name  nsn   item_name quantity ui    acquisition_val… demil_code
##    &lt;chr&gt; &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt;        &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt; &lt;chr&gt;     
##  1 TX    ABERNATHY P… 1005… PISTOL,C…        1 Each              58.7 D         
##  2 TX    ABERNATHY P… 1005… PISTOL,C…        1 Each              58.7 D         
##  3 TX    ABERNATHY P… 1005… PISTOL,C…        1 Each              58.7 D         
##  4 TX    ABERNATHY P… 1005… PISTOL,C…        1 Each              58.7 D         
##  5 TX    ABERNATHY P… 1005… RIFLE,5.…        1 Each             749   D         
##  6 TX    ABERNATHY P… 2320… TRUCK,UT…        1 Each           62627   C         
##  7 TX    ABERNATHY P… 1240… SIGHT,RE…        5 Each             333   D         
##  8 TX    ABERNATHY P… 1005… RIFLE,5.…        1 Each             749   D         
##  9 TX    ABERNATHY P… 1005… PISTOL,C…        1 Each              58.7 D         
## 10 TX    ALLEN POLIC… 1240… SIGHT,RE…        1 Each             333   D         
## # … with 7,401 more rows, and 4 more variables: demil_ic &lt;dbl&gt;,
## #   ship_date &lt;dttm&gt;, station_type &lt;chr&gt;, total_value &lt;dbl&gt;</code></pre>
</details>
</div>
<div id="checking-the-results-with-summary" class="section level4 hasAnchor" number="5.4.10.3">
<h4><span class="header-section-number">5.4.10.3</span> Checking the results with summary()<a href="sums-import.html#checking-the-results-with-summary" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>How do you know this date filter worked? Well, we went from 8600+ rows to 7400+ rows, so we did something. You might look at the results table and click over to the <code>ship_date</code> columns so you can see some of the results, but you can’t be sure the top row is the oldest. We could use an <code>arrange()</code> to test that, but I have another suggestion: <code>summary()</code>.</p>
<p>Now, <code>summary()</code> is different than <code>summarize()</code>, which we’ll do plenty of in a minute. The <code>summary()</code> function will show you some results about each column in your data, and when it is a number or date, it will give you some basic stats like min, max and median values.</p>
<ol style="list-style-type: decimal">
<li><strong>Edit your chunk</strong> to not just print out the tibble, but pipe that into <code>summary()</code>, like this:</li>
</ol>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="sums-import.html#cb117-1" aria-hidden="true" tabindex="-1"></a>leso_filtered <span class="sc">|&gt;</span> <span class="fu">summary</span>()</span></code></pre></div>
<pre><code>##     state           agency_name            nsn             item_name        
##  Length:7411        Length:7411        Length:7411        Length:7411       
##  Class :character   Class :character   Class :character   Class :character  
##  Mode  :character   Mode  :character   Mode  :character   Mode  :character  
##                                                                             
##                                                                             
##                                                                             
##                                                                             
##     quantity             ui            acquisition_value  demil_code       
##  Min.   :   1.000   Length:7411        Min.   :      0   Length:7411       
##  1st Qu.:   1.000   Class :character   1st Qu.:    131   Class :character  
##  Median :   1.000   Mode  :character   Median :    499   Mode  :character  
##  Mean   :   5.886                      Mean   :  18210                     
##  3rd Qu.:   1.000                      3rd Qu.:   2494                     
##  Max.   :1223.000                      Max.   :5390000                     
##                                                                            
##     demil_ic       ship_date                      station_type      
##  Min.   :1.000   Min.   :2010-01-05 00:00:00.00   Length:7411       
##  1st Qu.:1.000   1st Qu.:2012-03-14 00:00:00.00   Class :character  
##  Median :1.000   Median :2014-10-12 00:00:00.00   Mode  :character  
##  Mean   :1.417   Mean   :2015-09-10 12:54:09.72                     
##  3rd Qu.:1.000   3rd Qu.:2019-02-04 00:00:00.00                     
##  Max.   :7.000   Max.   :2021-12-29 00:00:00.00                     
##  NA&#39;s   :647                                                        
##   total_value     
##  Min.   :      0  
##  1st Qu.:    333  
##  Median :    749  
##  Mean   :  20125  
##  3rd Qu.:   4510  
##  Max.   :5390000  
## </code></pre>
<p>Now look at the “Min.” value of <code>ship_date</code> and make sure it is not older than 2010.</p>
</div>
</div>
<div id="export-cleaned-data" class="section level3 hasAnchor" number="5.4.11">
<h3><span class="header-section-number">5.4.11</span> Export cleaned data<a href="sums-import.html#export-cleaned-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now that we have our data selected, mutated and filtered how we want it, we can export your <code>leso_filtered</code> tibble into an <code>.rds</code> file to use in our analysis notebook. If you recall, we use the <code>.rds</code> format because it will remember data types and such.</p>
<ol style="list-style-type: decimal">
<li>Create a new section with headline and text explaining that you are exporting the data.</li>
<li>Do it. The function you need is called <code>write_rds</code> and you need to give it a path/name that saves the file in the <code>data-processed</code> folder. Name it <code>01-leso-tx.rds</code> so you know it a) came from the first notebook b) is the Texas only data. <strong>Well-formatted, descriptive file names are important to your future self and other colleagues</strong>.</li>
</ol>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="sums-import.html#cb119-1" aria-hidden="true" tabindex="-1"></a>leso_filtered <span class="sc">|&gt;</span> <span class="fu">write_rds</span>(<span class="st">&quot;data-processed/01-leso-tx.rds&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="things-we-learned-in-this-lesson" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">5.5</span> Things we learned in this lesson<a href="sums-import.html#things-we-learned-in-this-lesson" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This chapter was similar to when we imported data for Billboard, but we did introduce a couple of new concepts:</p>
<ul>
<li><a href="https://dplyr.tidyverse.org/reference/case_when.html"><code>case_when()</code></a> allows you to categorize a new column based on logic within your data.</li>
<li><code>summary()</code> gives you descriptive statistics about your tibble. We used it to check the “min” date, but you can also see averages (mean), max and medians.</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="count-analysis.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="sums-analyze.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/05-sums-import.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>

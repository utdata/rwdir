<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 8 Deeper into ggplot | Reporting with Data in R</title>
  <meta name="description" content="Chapter 8 Deeper into ggplot | Reporting with Data in R is a series of lessons and instructions used in courses in the School of Journalism and Media, Moody College of Communication at the University of Texas at Austin. The course is taught by Christian McDonald and Jo Lukito." />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 8 Deeper into ggplot | Reporting with Data in R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Chapter 8 Deeper into ggplot | Reporting with Data in R is a series of lessons and instructions used in courses in the School of Journalism and Media, Moody College of Communication at the University of Texas at Austin. The course is taught by Christian McDonald and Jo Lukito." />
  <meta name="github-repo" content="utdata/rwdir" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 8 Deeper into ggplot | Reporting with Data in R" />
  
  <meta name="twitter:description" content="Chapter 8 Deeper into ggplot | Reporting with Data in R is a series of lessons and instructions used in courses in the School of Journalism and Media, Moody College of Communication at the University of Texas at Austin. The course is taught by Christian McDonald and Jo Lukito." />
  

<meta name="author" content="Christian McDonald and Josephine Lukito" />


<meta name="date" content="2022-12-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="ggplot-intro.html"/>
<link rel="next" href="tidy-data.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.25/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<style type="text/css">
  p.caption {
    color: #777;
    margin-top: 10px;
  }
  p code, pre, pre code, li code {
    background-color: #DCDCDC !important;
  }
  detail {
    margin-bottom: 30px;
  }
</style>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Reporting with Data in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this book</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#a-word-from-prof.-mcdonald"><i class="fa fa-check"></i>A word from Prof. McDonald</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#tips-on-the-book-style"><i class="fa fa-check"></i>Tips on the book style</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#things-to-do"><i class="fa fa-check"></i>Things to do</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#notes-some-important"><i class="fa fa-check"></i>Notes, some important</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#copy-code-blocks"><i class="fa fa-check"></i>Copy code blocks</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-the-authors"><i class="fa fa-check"></i>About the authors</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#christian-mcdonald"><i class="fa fa-check"></i>Christian McDonald</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#jo-lukito"><i class="fa fa-check"></i>Jo Lukito</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#versions"><i class="fa fa-check"></i>Versions</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#other-resources"><i class="fa fa-check"></i>Other resources</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="install.html"><a href="install.html"><i class="fa fa-check"></i><b>1</b> Install Party</a>
<ul>
<li class="chapter" data-level="1.1" data-path="install.html"><a href="install.html#mac-vs-pc"><i class="fa fa-check"></i><b>1.1</b> Mac vs PC</a></li>
<li class="chapter" data-level="1.2" data-path="install.html"><a href="install.html#installing-r"><i class="fa fa-check"></i><b>1.2</b> Installing R</a></li>
<li class="chapter" data-level="1.3" data-path="install.html"><a href="install.html#installing-rstudio"><i class="fa fa-check"></i><b>1.3</b> Installing RStudio</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="install.html"><a href="install.html#getting-git-errors-on-macs"><i class="fa fa-check"></i><b>1.3.1</b> Getting “Git” errors on Macs</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="install.html"><a href="install.html#class-project-folder"><i class="fa fa-check"></i><b>1.4</b> Class project folder</a></li>
<li class="chapter" data-level="1.5" data-path="install.html"><a href="install.html#rstudio-cloud"><i class="fa fa-check"></i><b>1.5</b> RStudio Cloud</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#rstudio-tour"><i class="fa fa-check"></i><b>2.1</b> RStudio tour</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#updating-preferences"><i class="fa fa-check"></i><b>2.2</b> Updating preferences</a></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#starting-a-new-project"><i class="fa fa-check"></i><b>2.3</b> Starting a new Project</a></li>
<li class="chapter" data-level="2.4" data-path="intro.html"><a href="intro.html#using-r-notebooks"><i class="fa fa-check"></i><b>2.4</b> Using R Notebooks</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="intro.html"><a href="intro.html#create-your-first-notebook"><i class="fa fa-check"></i><b>2.4.1</b> Create your first notebook</a></li>
<li class="chapter" data-level="2.4.2" data-path="intro.html"><a href="intro.html#save-the-.rmd-file"><i class="fa fa-check"></i><b>2.4.2</b> Save the .Rmd file</a></li>
<li class="chapter" data-level="2.4.3" data-path="intro.html"><a href="intro.html#run-the-notebook"><i class="fa fa-check"></i><b>2.4.3</b> Run the notebook</a></li>
<li class="chapter" data-level="2.4.4" data-path="intro.html"><a href="intro.html#a-note-about-rmarkdown"><i class="fa fa-check"></i><b>2.4.4</b> A note about RMarkdown</a></li>
<li class="chapter" data-level="2.4.5" data-path="intro.html"><a href="intro.html#adding-new-code-chunks"><i class="fa fa-check"></i><b>2.4.5</b> Adding new code chunks</a></li>
<li class="chapter" data-level="2.4.6" data-path="intro.html"><a href="intro.html#practice-adding-code-chunks"><i class="fa fa-check"></i><b>2.4.6</b> Practice adding code chunks</a></li>
<li class="chapter" data-level="2.4.7" data-path="intro.html"><a href="intro.html#preview-the-report"><i class="fa fa-check"></i><b>2.4.7</b> Preview the report</a></li>
<li class="chapter" data-level="2.4.8" data-path="intro.html"><a href="intro.html#the-toolbar"><i class="fa fa-check"></i><b>2.4.8</b> The toolbar</a></li>
<li class="chapter" data-level="2.4.9" data-path="intro.html"><a href="intro.html#knit-the-final-workbook"><i class="fa fa-check"></i><b>2.4.9</b> Knit the final workbook</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="intro.html"><a href="intro.html#turning-in-our-projects"><i class="fa fa-check"></i><b>2.5</b> Turning in our projects</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="counts-import.html"><a href="counts-import.html"><i class="fa fa-check"></i><b>3</b> Summarize with count - import</a>
<ul>
<li class="chapter" data-level="3.1" data-path="counts-import.html"><a href="counts-import.html#learning-goals-of-this-lesson"><i class="fa fa-check"></i><b>3.1</b> Learning goals of this lesson</a></li>
<li class="chapter" data-level="3.2" data-path="counts-import.html"><a href="counts-import.html#basic-steps-of-this-lesson"><i class="fa fa-check"></i><b>3.2</b> Basic steps of this lesson</a></li>
<li class="chapter" data-level="3.3" data-path="counts-import.html"><a href="counts-import.html#create-a-new-project"><i class="fa fa-check"></i><b>3.3</b> Create a new project</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="counts-import.html"><a href="counts-import.html#describe-the-goals-of-the-notebook"><i class="fa fa-check"></i><b>3.3.1</b> Describe the goals of the notebook</a></li>
<li class="chapter" data-level="3.3.2" data-path="counts-import.html"><a href="counts-import.html#the-r-package-environment"><i class="fa fa-check"></i><b>3.3.2</b> The R Package environment</a></li>
<li class="chapter" data-level="3.3.3" data-path="counts-import.html"><a href="counts-import.html#installing-and-using-packages"><i class="fa fa-check"></i><b>3.3.3</b> Installing and using packages</a></li>
<li class="chapter" data-level="3.3.4" data-path="counts-import.html"><a href="counts-import.html#load-the-libraries"><i class="fa fa-check"></i><b>3.3.4</b> Load the libraries</a></li>
<li class="chapter" data-level="3.3.5" data-path="counts-import.html"><a href="counts-import.html#create-a-directory-for-your-data"><i class="fa fa-check"></i><b>3.3.5</b> Create a directory for your data</a></li>
<li class="chapter" data-level="3.3.6" data-path="counts-import.html"><a href="counts-import.html#about-data-sources"><i class="fa fa-check"></i><b>3.3.6</b> About data sources</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="counts-import.html"><a href="counts-import.html#the-billboard-hot-100"><i class="fa fa-check"></i><b>3.4</b> The Billboard Hot 100</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="counts-import.html"><a href="counts-import.html#data-dictionary"><i class="fa fa-check"></i><b>3.4.1</b> Data dictionary</a></li>
<li class="chapter" data-level="3.4.2" data-path="counts-import.html"><a href="counts-import.html#lets-download-our-data"><i class="fa fa-check"></i><b>3.4.2</b> Let’s download our data</a></li>
<li class="chapter" data-level="3.4.3" data-path="counts-import.html"><a href="counts-import.html#consider-commenting-the-download"><i class="fa fa-check"></i><b>3.4.3</b> Consider commenting the download</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="counts-import.html"><a href="counts-import.html#import-the-data"><i class="fa fa-check"></i><b>3.5</b> Import the data</a></li>
<li class="chapter" data-level="3.6" data-path="counts-import.html"><a href="counts-import.html#assign-our-import-to-an-r-object"><i class="fa fa-check"></i><b>3.6</b> Assign our import to an R object</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="counts-import.html"><a href="counts-import.html#print-a-peek-to-your-r-notebook"><i class="fa fa-check"></i><b>3.6.1</b> Print a peek to your R Notebook</a></li>
<li class="chapter" data-level="3.6.2" data-path="counts-import.html"><a href="counts-import.html#glimpse-the-data"><i class="fa fa-check"></i><b>3.6.2</b> Glimpse the data</a></li>
<li class="chapter" data-level="3.6.3" data-path="counts-import.html"><a href="counts-import.html#about-the-pipe"><i class="fa fa-check"></i><b>3.6.3</b> About the pipe |&gt;</a></li>
<li class="chapter" data-level="" data-path="counts-import.html"><a href="counts-import.html#a-rabbit-dives-into-a-pipe"><i class="fa fa-check"></i>A rabbit dives into a pipe</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="counts-import.html"><a href="counts-import.html#cleaning-data"><i class="fa fa-check"></i><b>3.7</b> Cleaning data</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="counts-import.html"><a href="counts-import.html#cleaning-column-names"><i class="fa fa-check"></i><b>3.7.1</b> Cleaning column names</a></li>
<li class="chapter" data-level="3.7.2" data-path="counts-import.html"><a href="counts-import.html#fixing-the-date"><i class="fa fa-check"></i><b>3.7.2</b> Fixing the date</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="counts-import.html"><a href="counts-import.html#arrange-the-data"><i class="fa fa-check"></i><b>3.8</b> Arrange the data</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="counts-import.html"><a href="counts-import.html#getting-summary-stats"><i class="fa fa-check"></i><b>3.8.1</b> Getting summary stats</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="counts-import.html"><a href="counts-import.html#selecting-columns"><i class="fa fa-check"></i><b>3.9</b> Selecting columns</a></li>
<li class="chapter" data-level="3.10" data-path="counts-import.html"><a href="counts-import.html#exporting-data"><i class="fa fa-check"></i><b>3.10</b> Exporting data</a>
<ul>
<li class="chapter" data-level="3.10.1" data-path="counts-import.html"><a href="counts-import.html#single-notebook-philosophy"><i class="fa fa-check"></i><b>3.10.1</b> Single-notebook philosophy</a></li>
<li class="chapter" data-level="3.10.2" data-path="counts-import.html"><a href="counts-import.html#exporting-as-rds"><i class="fa fa-check"></i><b>3.10.2</b> Exporting as rds</a></li>
</ul></li>
<li class="chapter" data-level="3.11" data-path="counts-import.html"><a href="counts-import.html#naming-chunks"><i class="fa fa-check"></i><b>3.11</b> Naming chunks</a></li>
<li class="chapter" data-level="3.12" data-path="counts-import.html"><a href="counts-import.html#knit-your-page"><i class="fa fa-check"></i><b>3.12</b> Knit your page</a></li>
<li class="chapter" data-level="3.13" data-path="counts-import.html"><a href="counts-import.html#review-of-what-weve-learned-so-far"><i class="fa fa-check"></i><b>3.13</b> Review of what we’ve learned so far</a></li>
<li class="chapter" data-level="3.14" data-path="counts-import.html"><a href="counts-import.html#whats-next"><i class="fa fa-check"></i><b>3.14</b> What’s next</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="count-analysis.html"><a href="count-analysis.html"><i class="fa fa-check"></i><b>4</b> Summarize with count - analysis</a>
<ul>
<li class="chapter" data-level="4.1" data-path="count-analysis.html"><a href="count-analysis.html#goals-of-this-lesson"><i class="fa fa-check"></i><b>4.1</b> Goals of this lesson</a></li>
<li class="chapter" data-level="4.2" data-path="count-analysis.html"><a href="count-analysis.html#the-questions-well-answer"><i class="fa fa-check"></i><b>4.2</b> The questions we’ll answer</a></li>
<li class="chapter" data-level="4.3" data-path="count-analysis.html"><a href="count-analysis.html#setting-up-an-analysis-notebook"><i class="fa fa-check"></i><b>4.3</b> Setting up an analysis notebook</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="count-analysis.html"><a href="count-analysis.html#import-the-cleaned-data"><i class="fa fa-check"></i><b>4.3.1</b> Import the cleaned data</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="count-analysis.html"><a href="count-analysis.html#introducing-dplyr"><i class="fa fa-check"></i><b>4.4</b> Introducing dplyr</a></li>
<li class="chapter" data-level="4.5" data-path="count-analysis.html"><a href="count-analysis.html#most-appearances"><i class="fa fa-check"></i><b>4.5</b> Most appearances</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="count-analysis.html"><a href="count-analysis.html#group-aggregate"><i class="fa fa-check"></i><b>4.5.1</b> Group &amp; Aggregate</a></li>
<li class="chapter" data-level="4.5.2" data-path="count-analysis.html"><a href="count-analysis.html#summarize"><i class="fa fa-check"></i><b>4.5.2</b> Summarize</a></li>
<li class="chapter" data-level="4.5.3" data-path="count-analysis.html"><a href="count-analysis.html#group-by"><i class="fa fa-check"></i><b>4.5.3</b> Group by</a></li>
<li class="chapter" data-level="4.5.4" data-path="count-analysis.html"><a href="count-analysis.html#arrange-the-results"><i class="fa fa-check"></i><b>4.5.4</b> Arrange the results</a></li>
<li class="chapter" data-level="4.5.5" data-path="count-analysis.html"><a href="count-analysis.html#get-the-top-of-the-list"><i class="fa fa-check"></i><b>4.5.5</b> Get the top of the list</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="count-analysis.html"><a href="count-analysis.html#songperformer-with-most-appearances"><i class="fa fa-check"></i><b>4.6</b> Song/performer with most appearances</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="count-analysis.html"><a href="count-analysis.html#introducing-filter"><i class="fa fa-check"></i><b>4.6.1</b> Introducing filter()</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="count-analysis.html"><a href="count-analysis.html#titleperformer-with-most-weeks-at-no.-1"><i class="fa fa-check"></i><b>4.7</b> Title/Performer with most weeks at No. 1</a></li>
<li class="chapter" data-level="4.8" data-path="count-analysis.html"><a href="count-analysis.html#performer-with-most-titles-to-reach-no.-1"><i class="fa fa-check"></i><b>4.8</b> Performer with most titles to reach No. 1</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="count-analysis.html"><a href="count-analysis.html#using-distinct"><i class="fa fa-check"></i><b>4.8.1</b> Using distinct()</a></li>
<li class="chapter" data-level="4.8.2" data-path="count-analysis.html"><a href="count-analysis.html#summarize-the-performers"><i class="fa fa-check"></i><b>4.8.2</b> Summarize the performers</a></li>
<li class="chapter" data-level="4.8.3" data-path="count-analysis.html"><a href="count-analysis.html#filter-for-a-good-cutoff"><i class="fa fa-check"></i><b>4.8.3</b> Filter for a good cutoff</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="count-analysis.html"><a href="count-analysis.html#no.-1-hits-in-last-five-years"><i class="fa fa-check"></i><b>4.9</b> No. 1 hits in last five years</a></li>
<li class="chapter" data-level="4.10" data-path="count-analysis.html"><a href="count-analysis.html#top-10-hits-overall-on-your-own"><i class="fa fa-check"></i><b>4.10</b> Top 10 hits overall (on your own)</a></li>
<li class="chapter" data-level="4.11" data-path="count-analysis.html"><a href="count-analysis.html#complex-filters"><i class="fa fa-check"></i><b>4.11</b> Complex filters</a>
<ul>
<li class="chapter" data-level="4.11.1" data-path="count-analysis.html"><a href="count-analysis.html#multiple-truths"><i class="fa fa-check"></i><b>4.11.1</b> Multiple truths</a></li>
<li class="chapter" data-level="4.11.2" data-path="count-analysis.html"><a href="count-analysis.html#either-is-true"><i class="fa fa-check"></i><b>4.11.2</b> Either is true</a></li>
<li class="chapter" data-level="4.11.3" data-path="count-analysis.html"><a href="count-analysis.html#mixing-criteria"><i class="fa fa-check"></i><b>4.11.3</b> Mixing criteria</a></li>
<li class="chapter" data-level="4.11.4" data-path="count-analysis.html"><a href="count-analysis.html#search-within-a-string"><i class="fa fa-check"></i><b>4.11.4</b> Search within a string</a></li>
</ul></li>
<li class="chapter" data-level="4.12" data-path="count-analysis.html"><a href="count-analysis.html#on-your-own"><i class="fa fa-check"></i><b>4.12</b> On your own</a></li>
<li class="chapter" data-level="4.13" data-path="count-analysis.html"><a href="count-analysis.html#a-shortcut-count"><i class="fa fa-check"></i><b>4.13</b> A shortcut: count()</a></li>
<li class="chapter" data-level="4.14" data-path="count-analysis.html"><a href="count-analysis.html#review-of-what-weve-learned"><i class="fa fa-check"></i><b>4.14</b> Review of what we’ve learned</a></li>
<li class="chapter" data-level="4.15" data-path="count-analysis.html"><a href="count-analysis.html#turn-in-your-project"><i class="fa fa-check"></i><b>4.15</b> Turn in your project</a></li>
<li class="chapter" data-level="4.16" data-path="count-analysis.html"><a href="count-analysis.html#soundtrack-for-this-assignment"><i class="fa fa-check"></i><b>4.16</b> Soundtrack for this assignment</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="sums-import.html"><a href="sums-import.html"><i class="fa fa-check"></i><b>5</b> Summarize with math - import</a>
<ul>
<li class="chapter" data-level="5.1" data-path="sums-import.html"><a href="sums-import.html#about-the-story-military-surplus-transfers"><i class="fa fa-check"></i><b>5.1</b> About the story: Military surplus transfers</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="sums-import.html"><a href="sums-import.html#the-1033-program"><i class="fa fa-check"></i><b>5.1.1</b> The 1033 program</a></li>
<li class="chapter" data-level="5.1.2" data-path="sums-import.html"><a href="sums-import.html#about-the-data"><i class="fa fa-check"></i><b>5.1.2</b> About the data</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="sums-import.html"><a href="sums-import.html#the-questions-we-will-answer"><i class="fa fa-check"></i><b>5.2</b> The questions we will answer</a></li>
<li class="chapter" data-level="5.3" data-path="sums-import.html"><a href="sums-import.html#getting-started-create-your-project"><i class="fa fa-check"></i><b>5.3</b> Getting started: Create your project</a></li>
<li class="chapter" data-level="5.4" data-path="sums-import.html"><a href="sums-import.html#importcleaning-notebook"><i class="fa fa-check"></i><b>5.4</b> Import/cleaning notebook</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="sums-import.html"><a href="sums-import.html#the-goals-of-the-notebook"><i class="fa fa-check"></i><b>5.4.1</b> The goals of the notebook</a></li>
<li class="chapter" data-level="5.4.2" data-path="sums-import.html"><a href="sums-import.html#add-a-setup-section"><i class="fa fa-check"></i><b>5.4.2</b> Add a setup section</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="sums-import.html"><a href="sums-import.html#download-the-data"><i class="fa fa-check"></i><b>5.5</b> Download the data</a></li>
<li class="chapter" data-level="5.6" data-path="sums-import.html"><a href="sums-import.html#import-the-data-1"><i class="fa fa-check"></i><b>5.6</b> Import the data</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="sums-import.html"><a href="sums-import.html#glimpse-the-data-1"><i class="fa fa-check"></i><b>5.6.1</b> Glimpse the data</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="sums-import.html"><a href="sums-import.html#checking-datatypes"><i class="fa fa-check"></i><b>5.7</b> Checking datatypes</a></li>
<li class="chapter" data-level="5.8" data-path="sums-import.html"><a href="sums-import.html#remove-unnecessary-columns"><i class="fa fa-check"></i><b>5.8</b> Remove unnecessary columns</a></li>
<li class="chapter" data-level="5.9" data-path="sums-import.html"><a href="sums-import.html#create-a-total_value-column"><i class="fa fa-check"></i><b>5.9</b> Create a total_value column</a></li>
<li class="chapter" data-level="5.10" data-path="sums-import.html"><a href="sums-import.html#controlled-vs.-non-controlled"><i class="fa fa-check"></i><b>5.10</b> Controlled vs. non-controlled</a>
<ul>
<li class="chapter" data-level="5.10.1" data-path="sums-import.html"><a href="sums-import.html#categorization-logic-with-case_when"><i class="fa fa-check"></i><b>5.10.1</b> Categorization logic with case_when()</a></li>
</ul></li>
<li class="chapter" data-level="5.11" data-path="sums-import.html"><a href="sums-import.html#filtering-our-data"><i class="fa fa-check"></i><b>5.11</b> Filtering our data</a>
<ul>
<li class="chapter" data-level="5.11.1" data-path="sums-import.html"><a href="sums-import.html#apply-the-tx-filter"><i class="fa fa-check"></i><b>5.11.1</b> Apply the TX filter</a></li>
<li class="chapter" data-level="5.11.2" data-path="sums-import.html"><a href="sums-import.html#add-the-date-filter"><i class="fa fa-check"></i><b>5.11.2</b> Add the date filter</a></li>
<li class="chapter" data-level="5.11.3" data-path="sums-import.html"><a href="sums-import.html#checking-the-results-with-summary"><i class="fa fa-check"></i><b>5.11.3</b> Checking the results with summary()</a></li>
</ul></li>
<li class="chapter" data-level="5.12" data-path="sums-import.html"><a href="sums-import.html#export-cleaned-data"><i class="fa fa-check"></i><b>5.12</b> Export cleaned data</a></li>
<li class="chapter" data-level="5.13" data-path="sums-import.html"><a href="sums-import.html#things-we-learned-in-this-lesson"><i class="fa fa-check"></i><b>5.13</b> Things we learned in this lesson</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="sums-analyze.html"><a href="sums-analyze.html"><i class="fa fa-check"></i><b>6</b> Summarize with math - analysis</a>
<ul>
<li class="chapter" data-level="6.1" data-path="sums-analyze.html"><a href="sums-analyze.html#learning-goals-of-this-lesson-1"><i class="fa fa-check"></i><b>6.1</b> Learning goals of this lesson</a></li>
<li class="chapter" data-level="6.2" data-path="sums-analyze.html"><a href="sums-analyze.html#questions-to-answer"><i class="fa fa-check"></i><b>6.2</b> Questions to answer</a></li>
<li class="chapter" data-level="6.3" data-path="sums-analyze.html"><a href="sums-analyze.html#set-up-the-analysis-notebook"><i class="fa fa-check"></i><b>6.3</b> Set up the analysis notebook</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="sums-analyze.html"><a href="sums-analyze.html#load-the-data-into-a-tibble"><i class="fa fa-check"></i><b>6.3.1</b> Load the data into a tibble</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="sums-analyze.html"><a href="sums-analyze.html#filter-for-controlled-items"><i class="fa fa-check"></i><b>6.4</b> Filter for controlled items</a></li>
<li class="chapter" data-level="6.5" data-path="sums-analyze.html"><a href="sums-analyze.html#building-summaries-with-math"><i class="fa fa-check"></i><b>6.5</b> Building summaries with math</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="sums-analyze.html"><a href="sums-analyze.html#summarize-across-the-data"><i class="fa fa-check"></i><b>6.5.1</b> Summarize across the data</a></li>
<li class="chapter" data-level="6.5.2" data-path="sums-analyze.html"><a href="sums-analyze.html#na-values-in-a-sum-mean-and-median"><i class="fa fa-check"></i><b>6.5.2</b> NA values in a sum, mean and median</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="sums-analyze.html"><a href="sums-analyze.html#totals-by-agency"><i class="fa fa-check"></i><b>6.6</b> Totals by agency</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="sums-analyze.html"><a href="sums-analyze.html#group_by-then-summary-with-math"><i class="fa fa-check"></i><b>6.6.1</b> Group_by, then summary with math</a></li>
<li class="chapter" data-level="6.6.2" data-path="sums-analyze.html"><a href="sums-analyze.html#add-the-total_value"><i class="fa fa-check"></i><b>6.6.2</b> Add the total_value</a></li>
<li class="chapter" data-level="6.6.3" data-path="sums-analyze.html"><a href="sums-analyze.html#arrange-the-results-1"><i class="fa fa-check"></i><b>6.6.3</b> Arrange the results</a></li>
<li class="chapter" data-level="6.6.4" data-path="sums-analyze.html"><a href="sums-analyze.html#consider-the-results"><i class="fa fa-check"></i><b>6.6.4</b> Consider the results</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="sums-analyze.html"><a href="sums-analyze.html#looking-a-local-agencies"><i class="fa fa-check"></i><b>6.7</b> Looking a local agencies</a>
<ul>
<li class="chapter" data-level="6.7.1" data-path="sums-analyze.html"><a href="sums-analyze.html#save-our-by-agency-list"><i class="fa fa-check"></i><b>6.7.1</b> Save our “by agency” list</a></li>
<li class="chapter" data-level="6.7.2" data-path="sums-analyze.html"><a href="sums-analyze.html#filtering-within-a-vector"><i class="fa fa-check"></i><b>6.7.2</b> Filtering within a vector</a></li>
<li class="chapter" data-level="6.7.3" data-path="sums-analyze.html"><a href="sums-analyze.html#create-a-vector-to-build-this-filter"><i class="fa fa-check"></i><b>6.7.3</b> Create a vector to build this filter</a></li>
</ul></li>
<li class="chapter" data-level="6.8" data-path="sums-analyze.html"><a href="sums-analyze.html#types-of-items-shipped-to-each-agency"><i class="fa fa-check"></i><b>6.8</b> Types of items shipped to each agency</a>
<ul>
<li class="chapter" data-level="6.8.1" data-path="sums-analyze.html"><a href="sums-analyze.html#items-for-local-agencies"><i class="fa fa-check"></i><b>6.8.1</b> Items for local agencies</a></li>
<li class="chapter" data-level="6.8.2" data-path="sums-analyze.html"><a href="sums-analyze.html#research-some-interesting-items"><i class="fa fa-check"></i><b>6.8.2</b> Research some interesting items</a></li>
</ul></li>
<li class="chapter" data-level="6.9" data-path="sums-analyze.html"><a href="sums-analyze.html#write-a-data-drop"><i class="fa fa-check"></i><b>6.9</b> Write a data drop</a></li>
<li class="chapter" data-level="6.10" data-path="sums-analyze.html"><a href="sums-analyze.html#what-we-learned-in-this-chapter"><i class="fa fa-check"></i><b>6.10</b> What we learned in this chapter</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="ggplot-intro.html"><a href="ggplot-intro.html"><i class="fa fa-check"></i><b>7</b> Data Viz - Intro to ggplot</a>
<ul>
<li class="chapter" data-level="7.1" data-path="ggplot-intro.html"><a href="ggplot-intro.html#goals-for-this-section"><i class="fa fa-check"></i><b>7.1</b> Goals for this section</a></li>
<li class="chapter" data-level="7.2" data-path="ggplot-intro.html"><a href="ggplot-intro.html#introduction-to-ggplot"><i class="fa fa-check"></i><b>7.2</b> Introduction to ggplot</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="ggplot-intro.html"><a href="ggplot-intro.html#what-i-likedislike-about-ggplot"><i class="fa fa-check"></i><b>7.2.1</b> What I like/dislike about ggplot</a></li>
<li class="chapter" data-level="7.2.2" data-path="ggplot-intro.html"><a href="ggplot-intro.html#the-grammar-of-graphics"><i class="fa fa-check"></i><b>7.2.2</b> The Grammar of Graphics</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="ggplot-intro.html"><a href="ggplot-intro.html#start-a-new-project"><i class="fa fa-check"></i><b>7.3</b> Start a new project</a></li>
<li class="chapter" data-level="7.4" data-path="ggplot-intro.html"><a href="ggplot-intro.html#the-layers-of-ggplot"><i class="fa fa-check"></i><b>7.4</b> The layers of ggplot</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="ggplot-intro.html"><a href="ggplot-intro.html#build-the-base-layer"><i class="fa fa-check"></i><b>7.4.1</b> Build the base layer</a></li>
<li class="chapter" data-level="7.4.2" data-path="ggplot-intro.html"><a href="ggplot-intro.html#layers-can-we-add-to-our-plots"><i class="fa fa-check"></i><b>7.4.2</b> Layers can we add to our plots</a></li>
<li class="chapter" data-level="7.4.3" data-path="ggplot-intro.html"><a href="ggplot-intro.html#add-geom_point"><i class="fa fa-check"></i><b>7.4.3</b> Add geom_point</a></li>
<li class="chapter" data-level="7.4.4" data-path="ggplot-intro.html"><a href="ggplot-intro.html#adding-other-mappings"><i class="fa fa-check"></i><b>7.4.4</b> Adding other mappings</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="ggplot-intro.html"><a href="ggplot-intro.html#lets-build-a-bar-chart"><i class="fa fa-check"></i><b>7.5</b> Let’s build a bar chart</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="ggplot-intro.html"><a href="ggplot-intro.html#prepare-the-data"><i class="fa fa-check"></i><b>7.5.1</b> Prepare the data</a></li>
<li class="chapter" data-level="7.5.2" data-path="ggplot-intro.html"><a href="ggplot-intro.html#build-our-plot-with-geom_col"><i class="fa fa-check"></i><b>7.5.2</b> Build our plot with geom_col</a></li>
<li class="chapter" data-level="7.5.3" data-path="ggplot-intro.html"><a href="ggplot-intro.html#add-the-geom_col-layer"><i class="fa fa-check"></i><b>7.5.3</b> Add the geom_col layer</a></li>
<li class="chapter" data-level="7.5.4" data-path="ggplot-intro.html"><a href="ggplot-intro.html#flip-the-axes"><i class="fa fa-check"></i><b>7.5.4</b> Flip the axes</a></li>
<li class="chapter" data-level="7.5.5" data-path="ggplot-intro.html"><a href="ggplot-intro.html#reorder-the-bars"><i class="fa fa-check"></i><b>7.5.5</b> Reorder the bars</a></li>
<li class="chapter" data-level="7.5.6" data-path="ggplot-intro.html"><a href="ggplot-intro.html#adding-a-geom_text-layer"><i class="fa fa-check"></i><b>7.5.6</b> Adding a geom_text layer</a></li>
<li class="chapter" data-level="7.5.7" data-path="ggplot-intro.html"><a href="ggplot-intro.html#add-some-titles-and-more-labels"><i class="fa fa-check"></i><b>7.5.7</b> Add some titles and more labels</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="ggplot-intro.html"><a href="ggplot-intro.html#on-your-own-ice-cream"><i class="fa fa-check"></i><b>7.6</b> On your own: Ice cream!</a></li>
<li class="chapter" data-level="7.7" data-path="ggplot-intro.html"><a href="ggplot-intro.html#what-weve-learned"><i class="fa fa-check"></i><b>7.7</b> What we’ve learned</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="ggplot-more.html"><a href="ggplot-more.html"><i class="fa fa-check"></i><b>8</b> Deeper into ggplot</a>
<ul>
<li class="chapter" data-level="8.1" data-path="ggplot-more.html"><a href="ggplot-more.html#references"><i class="fa fa-check"></i><b>8.1</b> References</a></li>
<li class="chapter" data-level="8.2" data-path="ggplot-more.html"><a href="ggplot-more.html#learning-goals-for-this-chapter"><i class="fa fa-check"></i><b>8.2</b> Learning goals for this chapter</a></li>
<li class="chapter" data-level="8.3" data-path="ggplot-more.html"><a href="ggplot-more.html#set-up-your-notebook"><i class="fa fa-check"></i><b>8.3</b> Set up your notebook</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="ggplot-more.html"><a href="ggplot-more.html#lets-get-the-data"><i class="fa fa-check"></i><b>8.3.1</b> Let’s get the data</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="ggplot-more.html"><a href="ggplot-more.html#wrangle-the-data"><i class="fa fa-check"></i><b>8.4</b> Wrangle the data</a></li>
<li class="chapter" data-level="8.5" data-path="ggplot-more.html"><a href="ggplot-more.html#make-a-line-chart-of-the-texas-data"><i class="fa fa-check"></i><b>8.5</b> Make a line chart of the Texas data</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="ggplot-more.html"><a href="ggplot-more.html#plot-the-chart"><i class="fa fa-check"></i><b>8.5.1</b> Plot the chart</a></li>
<li class="chapter" data-level="8.5.2" data-path="ggplot-more.html"><a href="ggplot-more.html#cleaning-up"><i class="fa fa-check"></i><b>8.5.2</b> Cleaning Up</a></li>
<li class="chapter" data-level="8.5.3" data-path="ggplot-more.html"><a href="ggplot-more.html#saving-plots-as-an-object"><i class="fa fa-check"></i><b>8.5.3</b> Saving plots as an object</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="ggplot-more.html"><a href="ggplot-more.html#themes"><i class="fa fa-check"></i><b>8.6</b> Themes</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="ggplot-more.html"><a href="ggplot-more.html#more-with-ggthemes"><i class="fa fa-check"></i><b>8.6.1</b> More with ggthemes</a></li>
<li class="chapter" data-level="8.6.2" data-path="ggplot-more.html"><a href="ggplot-more.html#there-is-more-to-themes"><i class="fa fa-check"></i><b>8.6.2</b> There is more to themes</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="ggplot-more.html"><a href="ggplot-more.html#adding-more-information"><i class="fa fa-check"></i><b>8.7</b> Adding more information</a>
<ul>
<li class="chapter" data-level="8.7.1" data-path="ggplot-more.html"><a href="ggplot-more.html#prepare-the-data-1"><i class="fa fa-check"></i><b>8.7.1</b> Prepare the data</a></li>
<li class="chapter" data-level="8.7.2" data-path="ggplot-more.html"><a href="ggplot-more.html#plot-multiple-line-chart"><i class="fa fa-check"></i><b>8.7.2</b> Plot multiple line chart</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="ggplot-more.html"><a href="ggplot-more.html#on-your-own-line-chart"><i class="fa fa-check"></i><b>8.8</b> On your own: Line chart</a></li>
<li class="chapter" data-level="8.9" data-path="ggplot-more.html"><a href="ggplot-more.html#tour-of-some-other-adjustments"><i class="fa fa-check"></i><b>8.9</b> Tour of some other adjustments</a>
<ul>
<li class="chapter" data-level="8.9.1" data-path="ggplot-more.html"><a href="ggplot-more.html#line-width"><i class="fa fa-check"></i><b>8.9.1</b> Line width</a></li>
<li class="chapter" data-level="8.9.2" data-path="ggplot-more.html"><a href="ggplot-more.html#line-type"><i class="fa fa-check"></i><b>8.9.2</b> Line type</a></li>
<li class="chapter" data-level="8.9.3" data-path="ggplot-more.html"><a href="ggplot-more.html#adjust-axis"><i class="fa fa-check"></i><b>8.9.3</b> Adjust axis</a></li>
</ul></li>
<li class="chapter" data-level="8.10" data-path="ggplot-more.html"><a href="ggplot-more.html#facets"><i class="fa fa-check"></i><b>8.10</b> Facets</a>
<ul>
<li class="chapter" data-level="8.10.1" data-path="ggplot-more.html"><a href="ggplot-more.html#facet-wrap"><i class="fa fa-check"></i><b>8.10.1</b> Facet wrap</a></li>
<li class="chapter" data-level="8.10.2" data-path="ggplot-more.html"><a href="ggplot-more.html#facet-grids"><i class="fa fa-check"></i><b>8.10.2</b> Facet grids</a></li>
</ul></li>
<li class="chapter" data-level="8.11" data-path="ggplot-more.html"><a href="ggplot-more.html#on-your-own-facet-wrap"><i class="fa fa-check"></i><b>8.11</b> On your own: Facet wrap</a></li>
<li class="chapter" data-level="8.12" data-path="ggplot-more.html"><a href="ggplot-more.html#saving-plots"><i class="fa fa-check"></i><b>8.12</b> Saving plots</a></li>
<li class="chapter" data-level="8.13" data-path="ggplot-more.html"><a href="ggplot-more.html#interactive-plots"><i class="fa fa-check"></i><b>8.13</b> Interactive plots</a></li>
<li class="chapter" data-level="8.14" data-path="ggplot-more.html"><a href="ggplot-more.html#what-we-learned"><i class="fa fa-check"></i><b>8.14</b> What we learned</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="tidy-data.html"><a href="tidy-data.html"><i class="fa fa-check"></i><b>9</b> Tidy data</a>
<ul>
<li class="chapter" data-level="9.1" data-path="tidy-data.html"><a href="tidy-data.html#goals-for-this-section-1"><i class="fa fa-check"></i><b>9.1</b> Goals for this section</a></li>
<li class="chapter" data-level="9.2" data-path="tidy-data.html"><a href="tidy-data.html#the-questions-well-answer-1"><i class="fa fa-check"></i><b>9.2</b> The questions we’ll answer</a></li>
<li class="chapter" data-level="9.3" data-path="tidy-data.html"><a href="tidy-data.html#what-is-tidy-data"><i class="fa fa-check"></i><b>9.3</b> What is tidy data</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="tidy-data.html"><a href="tidy-data.html#wide-vs-long-data"><i class="fa fa-check"></i><b>9.3.1</b> Wide vs long data</a></li>
<li class="chapter" data-level="9.3.2" data-path="tidy-data.html"><a href="tidy-data.html#why-we-might-want-different-shaped-data"><i class="fa fa-check"></i><b>9.3.2</b> Why we might want different shaped data</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="tidy-data.html"><a href="tidy-data.html#prepare-our-candy-project"><i class="fa fa-check"></i><b>9.4</b> Prepare our candy project</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="tidy-data.html"><a href="tidy-data.html#get-the-data"><i class="fa fa-check"></i><b>9.4.1</b> Get the data</a></li>
<li class="chapter" data-level="9.4.2" data-path="tidy-data.html"><a href="tidy-data.html#drop-unneeded-columns"><i class="fa fa-check"></i><b>9.4.2</b> Drop unneeded columns</a></li>
<li class="chapter" data-level="9.4.3" data-path="tidy-data.html"><a href="tidy-data.html#peek-at-the-wide-table"><i class="fa fa-check"></i><b>9.4.3</b> Peek at the wide table</a></li>
<li class="chapter" data-level="9.4.4" data-path="tidy-data.html"><a href="tidy-data.html#where-are-we-going-with-this-data"><i class="fa fa-check"></i><b>9.4.4</b> Where are we going with this data</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="tidy-data.html"><a href="tidy-data.html#the-tidyr-verbs"><i class="fa fa-check"></i><b>9.5</b> The tidyr verbs</a></li>
<li class="chapter" data-level="9.6" data-path="tidy-data.html"><a href="tidy-data.html#pivot-longer"><i class="fa fa-check"></i><b>9.6</b> Pivot longer</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="tidy-data.html"><a href="tidy-data.html#pivot-our-candy-data-longer"><i class="fa fa-check"></i><b>9.6.1</b> Pivot our candy data longer</a></li>
<li class="chapter" data-level="9.6.2" data-path="tidy-data.html"><a href="tidy-data.html#get-average-candies-per-color"><i class="fa fa-check"></i><b>9.6.2</b> Get average candies per color</a></li>
<li class="chapter" data-level="9.6.3" data-path="tidy-data.html"><a href="tidy-data.html#round-the-averages"><i class="fa fa-check"></i><b>9.6.3</b> Round the averages</a></li>
<li class="chapter" data-level="9.6.4" data-path="tidy-data.html"><a href="tidy-data.html#on-your-own-plot-the-averages"><i class="fa fa-check"></i><b>9.6.4</b> On your own: Plot the averages</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="tidy-data.html"><a href="tidy-data.html#introducing-datawrapper"><i class="fa fa-check"></i><b>9.7</b> Introducing Datawrapper</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="tidy-data.html"><a href="tidy-data.html#review-how-to-make-a-bar-chart"><i class="fa fa-check"></i><b>9.7.1</b> Review how to make a bar chart</a></li>
<li class="chapter" data-level="9.7.2" data-path="tidy-data.html"><a href="tidy-data.html#start-a-chart"><i class="fa fa-check"></i><b>9.7.2</b> Start a chart</a></li>
<li class="chapter" data-level="9.7.3" data-path="tidy-data.html"><a href="tidy-data.html#get-your-candies-data"><i class="fa fa-check"></i><b>9.7.3</b> Get your candies data</a></li>
<li class="chapter" data-level="9.7.4" data-path="tidy-data.html"><a href="tidy-data.html#build-the-datawrapper-graphic"><i class="fa fa-check"></i><b>9.7.4</b> Build the datawrapper graphic</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="tidy-data.html"><a href="tidy-data.html#pivot-wider"><i class="fa fa-check"></i><b>9.8</b> Pivot wider</a>
<ul>
<li class="chapter" data-level="9.8.1" data-path="tidy-data.html"><a href="tidy-data.html#pivot-wider-on-your-own"><i class="fa fa-check"></i><b>9.8.1</b> Pivot wider on your own</a></li>
</ul></li>
<li class="chapter" data-level="9.9" data-path="tidy-data.html"><a href="tidy-data.html#bonus-questions"><i class="fa fa-check"></i><b>9.9</b> Bonus questions</a>
<ul>
<li class="chapter" data-level="9.9.1" data-path="tidy-data.html"><a href="tidy-data.html#mostleast-candies"><i class="fa fa-check"></i><b>9.9.1</b> Most/least candies</a></li>
<li class="chapter" data-level="9.9.2" data-path="tidy-data.html"><a href="tidy-data.html#average-total-candies-in-a-bag"><i class="fa fa-check"></i><b>9.9.2</b> Average total candies in a bag</a></li>
</ul></li>
<li class="chapter" data-level="9.10" data-path="tidy-data.html"><a href="tidy-data.html#turn-in-your-work"><i class="fa fa-check"></i><b>9.10</b> Turn in your work</a></li>
<li class="chapter" data-level="9.11" data-path="tidy-data.html"><a href="tidy-data.html#what-we-learned-1"><i class="fa fa-check"></i><b>9.11</b> What we learned</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="bind-join.html"><a href="bind-join.html"><i class="fa fa-check"></i><b>10</b> Bind and join</a>
<ul>
<li class="chapter" data-level="10.1" data-path="bind-join.html"><a href="bind-join.html#goals-of-the-chapter"><i class="fa fa-check"></i><b>10.1</b> Goals of the chapter</a></li>
<li class="chapter" data-level="10.2" data-path="bind-join.html"><a href="bind-join.html#the-story-an-update-to-denied"><i class="fa fa-check"></i><b>10.2</b> The story: An update to Denied</a></li>
<li class="chapter" data-level="10.3" data-path="bind-join.html"><a href="bind-join.html#about-the-data-1"><i class="fa fa-check"></i><b>10.3</b> About the data</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="bind-join.html"><a href="bind-join.html#set-up-your-project"><i class="fa fa-check"></i><b>10.3.1</b> Set up your project</a></li>
<li class="chapter" data-level="10.3.2" data-path="bind-join.html"><a href="bind-join.html#open-read-and-run"><i class="fa fa-check"></i><b>10.3.2</b> Open, read and run</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="bind-join.html"><a href="bind-join.html#merging-data-together"><i class="fa fa-check"></i><b>10.4</b> Merging data together</a></li>
<li class="chapter" data-level="10.5" data-path="bind-join.html"><a href="bind-join.html#about-joins"><i class="fa fa-check"></i><b>10.5</b> About joins</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="bind-join.html"><a href="bind-join.html#joining-our-reference-table"><i class="fa fa-check"></i><b>10.5.1</b> Joining our reference table</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="bind-join.html"><a href="bind-join.html#some-cleanup-filter-and-select"><i class="fa fa-check"></i><b>10.6</b> Some cleanup: filter and select</a></li>
<li class="chapter" data-level="10.7" data-path="bind-join.html"><a href="bind-join.html#create-an-audit-benchmark-column"><i class="fa fa-check"></i><b>10.7</b> Create an audit benchmark column</a></li>
<li class="chapter" data-level="10.8" data-path="bind-join.html"><a href="bind-join.html#export-the-data"><i class="fa fa-check"></i><b>10.8</b> Export the data</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="answers.html"><a href="answers.html"><i class="fa fa-check"></i><b>11</b> Plotting for answers</a>
<ul>
<li class="chapter" data-level="11.1" data-path="answers.html"><a href="answers.html#goals-of-this-chapter"><i class="fa fa-check"></i><b>11.1</b> Goals of this chapter</a></li>
<li class="chapter" data-level="11.2" data-path="answers.html"><a href="answers.html#project-setup"><i class="fa fa-check"></i><b>11.2</b> Project setup</a></li>
<li class="chapter" data-level="11.3" data-path="answers.html"><a href="answers.html#import-cleaned-data"><i class="fa fa-check"></i><b>11.3</b> Import cleaned data</a></li>
<li class="chapter" data-level="11.4" data-path="answers.html"><a href="answers.html#make-a-searchable-table"><i class="fa fa-check"></i><b>11.4</b> Make a searchable table</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="answers.html"><a href="answers.html#pivot-wider-1"><i class="fa fa-check"></i><b>11.4.1</b> Pivot wider</a></li>
<li class="chapter" data-level="11.4.2" data-path="answers.html"><a href="answers.html#make-a-datatable"><i class="fa fa-check"></i><b>11.4.2</b> Make a datatable</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="answers.html"><a href="answers.html#choosing-a-chart-to-display-data"><i class="fa fa-check"></i><b>11.5</b> Choosing a chart to display data</a></li>
<li class="chapter" data-level="11.6" data-path="answers.html"><a href="answers.html#plot-yearly-student-percentage"><i class="fa fa-check"></i><b>11.6</b> Plot yearly student percentage</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="answers.html"><a href="answers.html#build-the-statewide-percentage-by-year-data"><i class="fa fa-check"></i><b>11.6.1</b> Build the statewide percentage by year data</a></li>
<li class="chapter" data-level="11.6.2" data-path="answers.html"><a href="answers.html#build-the-statewide-percentage-chart"><i class="fa fa-check"></i><b>11.6.2</b> Build the statewide percentage chart</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="answers.html"><a href="answers.html#districts-by-benchmark-and-year"><i class="fa fa-check"></i><b>11.7</b> Districts by benchmark and year</a>
<ul>
<li class="chapter" data-level="11.7.1" data-path="answers.html"><a href="answers.html#build-the-audit-flag-data"><i class="fa fa-check"></i><b>11.7.1</b> Build the audit flag data</a></li>
<li class="chapter" data-level="11.7.2" data-path="answers.html"><a href="answers.html#build-the-audit-flag-chart"><i class="fa fa-check"></i><b>11.7.2</b> Build the audit flag chart</a></li>
<li class="chapter" data-level="11.7.3" data-path="answers.html"><a href="answers.html#which-chart-is-best"><i class="fa fa-check"></i><b>11.7.3</b> Which chart is best?</a></li>
</ul></li>
<li class="chapter" data-level="11.8" data-path="answers.html"><a href="answers.html#local-districts"><i class="fa fa-check"></i><b>11.8</b> Local districts</a></li>
<li class="chapter" data-level="11.9" data-path="answers.html"><a href="answers.html#the-assignments"><i class="fa fa-check"></i><b>11.9</b> The assignments</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="group-dates.html"><a href="group-dates.html"><i class="fa fa-check"></i><b>12</b> Grouping by dates</a>
<ul>
<li class="chapter" data-level="12.1" data-path="group-dates.html"><a href="group-dates.html#setting-up"><i class="fa fa-check"></i><b>12.1</b> Setting up</a></li>
<li class="chapter" data-level="12.2" data-path="group-dates.html"><a href="group-dates.html#plucking-date-parts"><i class="fa fa-check"></i><b>12.2</b> Plucking date parts</a></li>
<li class="chapter" data-level="12.3" data-path="group-dates.html"><a href="group-dates.html#grouping-by-a-date-part-on-the-fly"><i class="fa fa-check"></i><b>12.3</b> Grouping by a date part on the fly</a></li>
<li class="chapter" data-level="12.4" data-path="group-dates.html"><a href="group-dates.html#making-reusable-date-parts"><i class="fa fa-check"></i><b>12.4</b> Making reusable date parts</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="group-dates.html"><a href="group-dates.html#lets-make-a-year"><i class="fa fa-check"></i><b>12.4.1</b> Let’s make a year</a></li>
<li class="chapter" data-level="12.4.2" data-path="group-dates.html"><a href="group-dates.html#the-magical-month"><i class="fa fa-check"></i><b>12.4.2</b> The magical month</a></li>
<li class="chapter" data-level="12.4.3" data-path="group-dates.html"><a href="group-dates.html#floor-dates"><i class="fa fa-check"></i><b>12.4.3</b> Floor dates</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>13</b> R Functions</a>
<ul>
<li class="chapter" data-level="13.1" data-path="functions.html"><a href="functions.html#importexport"><i class="fa fa-check"></i><b>13.1</b> Import/Export</a></li>
<li class="chapter" data-level="13.2" data-path="functions.html"><a href="functions.html#data-manipulation"><i class="fa fa-check"></i><b>13.2</b> Data manipulation</a></li>
<li class="chapter" data-level="13.3" data-path="functions.html"><a href="functions.html#aggregation"><i class="fa fa-check"></i><b>13.3</b> Aggregation</a></li>
<li class="chapter" data-level="13.4" data-path="functions.html"><a href="functions.html#math"><i class="fa fa-check"></i><b>13.4</b> Math</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="troubleshooting.html"><a href="troubleshooting.html"><i class="fa fa-check"></i><b>14</b> Troubleshooting</a>
<ul>
<li class="chapter" data-level="14.1" data-path="troubleshooting.html"><a href="troubleshooting.html#when-things-break"><i class="fa fa-check"></i><b>14.1</b> When things break</a></li>
<li class="chapter" data-level="14.2" data-path="troubleshooting.html"><a href="troubleshooting.html#learning-how-things-work"><i class="fa fa-check"></i><b>14.2</b> Learning how things work</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="troubleshooting.html"><a href="troubleshooting.html#help-docs"><i class="fa fa-check"></i><b>14.2.1</b> Help docs</a></li>
<li class="chapter" data-level="14.2.2" data-path="troubleshooting.html"><a href="troubleshooting.html#good-googling"><i class="fa fa-check"></i><b>14.2.2</b> Good Googling</a></li>
<li class="chapter" data-level="14.2.3" data-path="troubleshooting.html"><a href="troubleshooting.html#tidyverse-docs-and-cheatsheets"><i class="fa fa-check"></i><b>14.2.3</b> Tidyverse docs and cheatsheets</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="troubleshooting.html"><a href="troubleshooting.html#r-frequently-asked-questions"><i class="fa fa-check"></i><b>14.3</b> R Frequently asked Questions</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="troubleshooting.html"><a href="troubleshooting.html#functions-objects-and-variables"><i class="fa fa-check"></i><b>14.3.1</b> Functions, objects and variables</a></li>
<li class="chapter" data-level="14.3.2" data-path="troubleshooting.html"><a href="troubleshooting.html#some-r-code-basics"><i class="fa fa-check"></i><b>14.3.2</b> Some R code basics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="explore.html"><a href="explore.html"><i class="fa fa-check"></i><b>15</b> How to interview a new dataset</a>
<ul>
<li class="chapter" data-level="15.1" data-path="explore.html"><a href="explore.html#start-by-listing-questions"><i class="fa fa-check"></i><b>15.1</b> Start by listing questions</a></li>
<li class="chapter" data-level="15.2" data-path="explore.html"><a href="explore.html#understand-your-data"><i class="fa fa-check"></i><b>15.2</b> Understand your data</a></li>
<li class="chapter" data-level="15.3" data-path="explore.html"><a href="explore.html#pay-attention-to-the-shape-of-your-data"><i class="fa fa-check"></i><b>15.3</b> Pay attention to the shape of your data</a></li>
<li class="chapter" data-level="15.4" data-path="explore.html"><a href="explore.html#counting-and-aggregation"><i class="fa fa-check"></i><b>15.4</b> Counting and aggregation</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="explore.html"><a href="explore.html#counting-rows-based-on-a-column"><i class="fa fa-check"></i><b>15.4.1</b> Counting rows based on a column</a></li>
<li class="chapter" data-level="15.4.2" data-path="explore.html"><a href="explore.html#sum-mean-and-other-aggregations"><i class="fa fa-check"></i><b>15.4.2</b> Sum, mean and other aggregations</a></li>
<li class="chapter" data-level="15.4.3" data-path="explore.html"><a href="explore.html#creating-columns-to-show-difference"><i class="fa fa-check"></i><b>15.4.3</b> Creating columns to show difference</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="explore.html"><a href="explore.html#cleaning-up-categorical-data"><i class="fa fa-check"></i><b>15.5</b> Cleaning up categorical data</a></li>
<li class="chapter" data-level="15.6" data-path="explore.html"><a href="explore.html#time-as-a-variable"><i class="fa fa-check"></i><b>15.6</b> Time as a variable</a></li>
<li class="chapter" data-level="15.7" data-path="explore.html"><a href="explore.html#explore-the-distributions-in-your-data"><i class="fa fa-check"></i><b>15.7</b> Explore the distributions in your data</a>
<ul>
<li class="chapter" data-level="15.7.1" data-path="explore.html"><a href="explore.html#more-on-histograms"><i class="fa fa-check"></i><b>15.7.1</b> More on histograms</a></li>
</ul></li>
<li class="chapter" data-level="15.8" data-path="explore.html"><a href="explore.html#same-ideas-using-spreadsheets"><i class="fa fa-check"></i><b>15.8</b> Same ideas using spreadsheets</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="charts.html"><a href="charts.html"><i class="fa fa-check"></i><b>16</b> Chart production tips</a>
<ul>
<li class="chapter" data-level="16.1" data-path="charts.html"><a href="charts.html#titles-descriptions-and-annotations"><i class="fa fa-check"></i><b>16.1</b> Titles, descriptions and annotations</a></li>
<li class="chapter" data-level="16.2" data-path="charts.html"><a href="charts.html#other-considerations"><i class="fa fa-check"></i><b>16.2</b> Other considerations</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Reporting with Data in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ggplot-more" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">Chapter 8</span> Deeper into ggplot<a href="ggplot-more.html#ggplot-more" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>The chapter is by Prof. Lukito, who uses a PC.</p>
<p>In the last chapter, you were introduced to <a href="https://ggplot2.tidyverse.org/index.html">ggplot2</a>, the <code>tidyverse</code> package that helps you build graphics, charts, and figures. In this chapter, we’ll take your <code>ggplot</code> knowledge to the next level. We encourage you to treat this chapter as a reference.</p>
<div id="references" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> References<a href="ggplot-more.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>ggplot2</code> has a LOT to it and we’ll cover only the basics. Here are some references you might use:</p>
<ul>
<li><a href="https://github.com/rstudio/cheatsheets/blob/master/data-visualization-2.1.pdf">ggplot cheatsheet</a></li>
<li><a href="https://r4ds.had.co.nz/index.html">R for Data Science</a></li>
<li><a href="https://r-graphics.org/">R Graphics Cookbook</a></li>
<li><a href="https://www.r-graph-gallery.com/">The R Graph Gallery</a> another place to see examples.</li>
<li><a href="https://ggplot2-book.org/index.html">ggplot2: Elegant graphics for Data Analysis</a></li>
</ul>
</div>
<div id="learning-goals-for-this-chapter" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> Learning goals for this chapter<a href="ggplot-more.html#learning-goals-for-this-chapter" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In this chapter, we will cover the following topics:</p>
<ul>
<li>How to prepare and build a line chart<br />
</li>
<li>How to use themes to change the looks of a chart<br />
</li>
<li>More about aesthetics in layers!<br />
</li>
<li>Faceting, or making multiple charts from the same data<br />
</li>
<li>How to save files<br />
</li>
<li>How to make interactive plots with <code>Plotly</code></li>
</ul>
</div>
<div id="set-up-your-notebook" class="section level2 hasAnchor" number="8.3">
<h2><span class="header-section-number">8.3</span> Set up your notebook<a href="ggplot-more.html#set-up-your-notebook" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This week, we’ll return to our <code>leso</code> data, but start a new RNotebook. Let’s open our “yourname-military-surplus” R project first, and then create a new RNotebook. Do this:</p>
<ol style="list-style-type: decimal">
<li>Create your RNotebook.</li>
<li>Rename the title “Military Surplus figures”</li>
<li>Remove the rest of the boilerplate template.</li>
<li>Save the file and name it <code>03-ggplot.Rmd</code>.</li>
<li>Load the <code>tidyverse</code> library.</li>
</ol>
<p>We’ll also load the <code>lubridate</code> package, which we used previously.</p>
<div id="lets-get-the-data" class="section level3 hasAnchor" number="8.3.1">
<h3><span class="header-section-number">8.3.1</span> Let’s get the data<a href="ggplot-more.html#lets-get-the-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<blockquote>
<p>We’ll demonstrate this in class, but you can also follow along in the screencast.</p>
</blockquote>
<p>Next, let’s read in the <code>leso.csv</code> dataset, which we imported in <a href="https://utdata.github.io/rwdir/sums-import.html#import-the-data-1">5.4.4</a>. We’ll do this using <code>read_csv()</code>.</p>
<details>
<summary>
You should be able to do this on your own. Really!
</summary>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="ggplot-more.html#cb177-1" aria-hidden="true" tabindex="-1"></a>leso <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data-raw/leso.csv&quot;</span>) <span class="co">#read the data in</span></span></code></pre></div>
<pre><code>## Rows: 117518 Columns: 12
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr  (7): state, agency_name, nsn, item_name, ui, demil_code, station_type
## dbl  (4): sheet, quantity, acquisition_value, demil_ic
## dttm (1): ship_date
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="ggplot-more.html#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(leso) <span class="co">#peek at the data</span></span></code></pre></div>
<pre><code>## Rows: 117,518
## Columns: 12
## $ sheet             &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
## $ state             &lt;chr&gt; &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;…
## $ agency_name       &lt;chr&gt; &quot;ABBEVILLE POLICE DEPT&quot;, &quot;ABBEVILLE POLICE DEPT&quot;, &quot;A…
## $ nsn               &lt;chr&gt; &quot;2540-01-565-4700&quot;, &quot;6760-01-628-6105&quot;, &quot;5855-01-577…
## $ item_name         &lt;chr&gt; &quot;BALLISTIC BLANKET KIT&quot;, &quot;CAMERA ROBOT&quot;, &quot;ILLUMINATO…
## $ quantity          &lt;dbl&gt; 10, 1, 10, 1, 1, 1, 9, 1, 10, 1, 1, 12, 11, 1, 1, 10…
## $ ui                &lt;chr&gt; &quot;Kit&quot;, &quot;Each&quot;, &quot;Each&quot;, &quot;Each&quot;, &quot;Each&quot;, &quot;Each&quot;, &quot;Each…
## $ acquisition_value &lt;dbl&gt; 15871.59, 1500.00, 1128.00, 10000.00, 245.88, 658000…
## $ demil_code        &lt;chr&gt; &quot;D&quot;, &quot;D&quot;, &quot;D&quot;, &quot;Q&quot;, &quot;D&quot;, &quot;C&quot;, &quot;D&quot;, &quot;C&quot;, &quot;D&quot;, &quot;C&quot;, &quot;D…
## $ demil_ic          &lt;dbl&gt; 1, 7, 1, 3, NA, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …
## $ ship_date         &lt;dttm&gt; 2018-01-30, 2017-02-08, 2017-03-28, 2017-03-28, 201…
## $ station_type      &lt;chr&gt; &quot;State&quot;, &quot;State&quot;, &quot;State&quot;, &quot;State&quot;, &quot;State&quot;, &quot;State&quot;…</code></pre>
</details>
<p><br/>
Don’t forget to also do the other processing steps we did in <a href="https://utdata.github.io/rwdir/sums-import.html#create-a-total_value-column">Chapter 5</a>.</p>
<p>Buuuut, if you needed a refresher, check out section <a href="https://utdata.github.io/rwdir/sums-import.html#remove-unnecessary-columns">5.4.6</a> to <a href="https://utdata.github.io/rwdir/sums-import.html#create-a-total_value-column">5.4.7</a>. There are 2 steps to this:</p>
<ul>
<li>Removing unnecessary columns using <code>select()</code><br />
</li>
<li>Creating a <code>total_value</code> column using <code>mutate()</code></li>
</ul>
<details>
<summary>
Again, you should be able to do this on your own
</summary>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="ggplot-more.html#cb181-1" aria-hidden="true" tabindex="-1"></a>leso_tight <span class="ot">&lt;-</span> leso <span class="sc">|&gt;</span> </span>
<span id="cb181-2"><a href="ggplot-more.html#cb181-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb181-3"><a href="ggplot-more.html#cb181-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">-</span>sheet,</span>
<span id="cb181-4"><a href="ggplot-more.html#cb181-4" aria-hidden="true" tabindex="-1"></a>    <span class="sc">-</span>nsn,</span>
<span id="cb181-5"><a href="ggplot-more.html#cb181-5" aria-hidden="true" tabindex="-1"></a>    <span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">&quot;demil&quot;</span>)</span>
<span id="cb181-6"><a href="ggplot-more.html#cb181-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="co">#this chunk removes unnecessary columns</span></span>
<span id="cb181-7"><a href="ggplot-more.html#cb181-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-8"><a href="ggplot-more.html#cb181-8" aria-hidden="true" tabindex="-1"></a>leso_total <span class="ot">&lt;-</span> leso_tight <span class="sc">|&gt;</span> </span>
<span id="cb181-9"><a href="ggplot-more.html#cb181-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_value =</span> quantity <span class="sc">*</span> acquisition_value) <span class="co">#this chunk creates a total_value column</span></span></code></pre></div>
</details>
<p><br/></p>
<p>Alrighty! Let’s look at the data</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="ggplot-more.html#cb182-1" aria-hidden="true" tabindex="-1"></a>leso_total <span class="sc">|&gt;</span> <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 117,518
## Columns: 9
## $ state             &lt;chr&gt; &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;…
## $ agency_name       &lt;chr&gt; &quot;ABBEVILLE POLICE DEPT&quot;, &quot;ABBEVILLE POLICE DEPT&quot;, &quot;A…
## $ item_name         &lt;chr&gt; &quot;BALLISTIC BLANKET KIT&quot;, &quot;CAMERA ROBOT&quot;, &quot;ILLUMINATO…
## $ quantity          &lt;dbl&gt; 10, 1, 10, 1, 1, 1, 9, 1, 10, 1, 1, 12, 11, 1, 1, 10…
## $ ui                &lt;chr&gt; &quot;Kit&quot;, &quot;Each&quot;, &quot;Each&quot;, &quot;Each&quot;, &quot;Each&quot;, &quot;Each&quot;, &quot;Each…
## $ acquisition_value &lt;dbl&gt; 15871.59, 1500.00, 1128.00, 10000.00, 245.88, 658000…
## $ ship_date         &lt;dttm&gt; 2018-01-30, 2017-02-08, 2017-03-28, 2017-03-28, 201…
## $ station_type      &lt;chr&gt; &quot;State&quot;, &quot;State&quot;, &quot;State&quot;, &quot;State&quot;, &quot;State&quot;, &quot;State&quot;…
## $ total_value       &lt;dbl&gt; 158715.90, 1500.00, 11280.00, 10000.00, 245.88, 6580…</code></pre>
<p>Lookin’ good!</p>
</div>
</div>
<div id="wrangle-the-data" class="section level2 hasAnchor" number="8.4">
<h2><span class="header-section-number">8.4</span> Wrangle the data<a href="ggplot-more.html#wrangle-the-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To prepare the data for visualizing, we need to do a couple more new things. This is going to take several steps, which we will pipe together.</p>
<ol style="list-style-type: decimal">
<li><code>filter</code> the data to focus on more recent data. Let’s specifically consider military surplus in 2010 and after.</li>
<li>And then, create a <code>year</code> variable using the <code>year()</code> function. <code>year()</code> is a function in <code>lubridate</code> that allows us to aggregate<br />
</li>
<li>And then, <code>select</code> a few variables to study (specifically, <code>year</code>, <code>total_value</code>, and <code>state</code>)</li>
<li>You should save all that into a new data frame called <code>leso_dated</code>.</li>
</ol>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="ggplot-more.html#cb184-1" aria-hidden="true" tabindex="-1"></a>leso_dated <span class="ot">&lt;-</span> leso_total <span class="sc">|&gt;</span></span>
<span id="cb184-2"><a href="ggplot-more.html#cb184-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ship_date <span class="sc">&gt;=</span> <span class="fu">as.Date</span>(<span class="st">&quot;2010-01-01&quot;</span>)) <span class="sc">|&gt;</span></span>
<span id="cb184-3"><a href="ggplot-more.html#cb184-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">year</span>(ship_date)) <span class="sc">|&gt;</span> <span class="co">#if you get an error, make sure you&#39;ve loaded the lubridate library!</span></span>
<span id="cb184-4"><a href="ggplot-more.html#cb184-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, total_value, state)</span>
<span id="cb184-5"><a href="ggplot-more.html#cb184-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-6"><a href="ggplot-more.html#cb184-6" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(leso_dated)</span></code></pre></div>
<pre><code>## Rows: 79,736
## Columns: 3
## $ year        &lt;dbl&gt; 2018, 2017, 2017, 2017, 2016, 2016, 2016, 2016, 2016, 2016…
## $ total_value &lt;dbl&gt; 158715.90, 1500.00, 11280.00, 10000.00, 245.88, 658000.00,…
## $ state       &lt;chr&gt; &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;…</code></pre>
<p>There’s a lot of information in this data, so let’s focus our visualizing on Texas, like we did in our previous chapters. We’ll do this by <code>filter</code>ing the rows where <code>state == "TX"</code>.</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="ggplot-more.html#cb186-1" aria-hidden="true" tabindex="-1"></a>leso_texas <span class="ot">&lt;-</span> leso_dated <span class="sc">|&gt;</span> </span>
<span id="cb186-2"><a href="ggplot-more.html#cb186-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">&quot;TX&quot;</span>)</span></code></pre></div>
<p>Now that we have our data in a nice structure, with some yearly information, let’s use our GSA process (<code>group_by() |&gt; summarize() |&gt; arrange()</code>). In this process, we’ll <code>group by</code> year (the variable we have just created), <code>summarize</code> a the total value of the military surplus (by year) and arrange that information chronologically.</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="ggplot-more.html#cb187-1" aria-hidden="true" tabindex="-1"></a>leso_texas_gsa <span class="ot">&lt;-</span> leso_texas <span class="sc">|&gt;</span></span>
<span id="cb187-2"><a href="ggplot-more.html#cb187-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">|&gt;</span></span>
<span id="cb187-3"><a href="ggplot-more.html#cb187-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">yearly_cost =</span> <span class="fu">sum</span>(total_value)) <span class="sc">|&gt;</span></span>
<span id="cb187-4"><a href="ggplot-more.html#cb187-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year)</span>
<span id="cb187-5"><a href="ggplot-more.html#cb187-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-6"><a href="ggplot-more.html#cb187-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(leso_texas_gsa) <span class="co">#use head() to view the first 6 rows of this new data frame</span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 2
##    year yearly_cost
##   &lt;dbl&gt;       &lt;dbl&gt;
## 1  2010    6808748.
## 2  2011    2151465.
## 3  2012    4395836.
## 4  2013   11497911.
## 5  2014   45516881.
## 6  2015    3361841.</code></pre>
<p>We may come back to the data to fix some stuff but for now, we’re ready to plot!</p>
<blockquote>
<p>If any of these steps are confusing to you, we encourage you to go back to <a href="https://utdata.github.io/rwdir/sums-import.html#about-the-story-military-surplus-transfers">Chapter 5 and 6</a>.</p>
</blockquote>
</div>
<div id="make-a-line-chart-of-the-texas-data" class="section level2 hasAnchor" number="8.5">
<h2><span class="header-section-number">8.5</span> Make a line chart of the Texas data<a href="ggplot-more.html#make-a-line-chart-of-the-texas-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Data visualization is an iterative process: you may prepare the data, do the visualization, and then realize you want to prepare the data a different way. Remember that the process of coding can involve trial and error: you’re often testing different thing to see what works.</p>
<div id="plot-the-chart" class="section level3 hasAnchor" number="8.5.1">
<h3><span class="header-section-number">8.5.1</span> Plot the chart<a href="ggplot-more.html#plot-the-chart" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Alright, so now let’s get ready to use the <code>ggplot()</code> function. I want you to create the plot here one step at a time so you can review how the layers are added.</p>
<p>In this new plot, we’ll learn about a new <code>geom</code> layer: <code>geom_line()</code> (recall that in <a href="https://utdata.github.io/rwdir/ggplot-intro.html">Chapter 7</a>, we learned about <code>geom_point()</code> and <code>geom_col()</code>).</p>
<ol style="list-style-type: decimal">
<li>Add and run the ggplot() line first (but without the <code>+</code>)</li>
<li>Then add the <code>+</code> and the <code>geom_point()</code> and run it.</li>
<li>Then add the <code>+</code> and <code>geom_line()</code> and run it.</li>
<li>Then add the <code>+</code> and <code>labs()</code>, and run everything.</li>
</ol>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="ggplot-more.html#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(leso_texas_gsa, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> yearly_cost)) <span class="sc">+</span> <span class="co">#we create the graph</span></span>
<span id="cb189-2"><a href="ggplot-more.html#cb189-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="co">#adding the points</span></span>
<span id="cb189-3"><a href="ggplot-more.html#cb189-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> <span class="co">#adding the lines between the points</span></span>
<span id="cb189-4"><a href="ggplot-more.html#cb189-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Yearly Law Enforcement Support Office Data, Texas&quot;</span>, </span>
<span id="cb189-5"><a href="ggplot-more.html#cb189-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Year&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Cost of acquisitions&quot;</span>)</span></code></pre></div>
<p><img src="08-plots-more_files/figure-html/leso-tx-plotting-1.png" width="672" /></p>
</div>
<div id="cleaning-up" class="section level3 hasAnchor" number="8.5.2">
<h3><span class="header-section-number">8.5.2</span> Cleaning Up<a href="ggplot-more.html#cleaning-up" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Alright, so we have a working plot! But there’s a couple things that are a bit ugly about this plot. First, I’m not digging the weird numbers on the side (what the heck does <code>0.0e+00</code> even mean?!). To fix this, let’s go back to our data and do a bit more preparing. If we use <code>head()</code> to look at our data, we’ll notice that there are a few numbers that are just really, really big.</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="ggplot-more.html#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(leso_texas_gsa) <span class="co">#use head() to view the first 6 rows of this new data frame</span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 2
##    year yearly_cost
##   &lt;dbl&gt;       &lt;dbl&gt;
## 1  2010    6808748.
## 2  2011    2151465.
## 3  2012    4395836.
## 4  2013   11497911.
## 5  2014   45516881.
## 6  2015    3361841.</code></pre>
<p>These large numbers are causing R to read our numbers as “scientific notation” (a math-y way of reading large numbers). For example, the total cost of supplies in February 2010 was <code>5,399,589.0</code> (that’s the first spike in our figure, around the <code>5.0e + 06</code> mark). But what a pain to read!</p>
<p>To get around this, let’s divide our <code>yearly_cost</code> variable (in the <code>leso_tx_gsa</code> data frame) by 1 million. Just like we round our numbers when we write about data, so too do we often round numbers when we visualize it. In the line below, we use <code>mutate()</code> to divide <code>yearly_cost</code> by 1,000,000.</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="ggplot-more.html#cb192-1" aria-hidden="true" tabindex="-1"></a>leso_texas_gsa <span class="ot">&lt;-</span> leso_texas_gsa <span class="sc">|&gt;</span></span>
<span id="cb192-2"><a href="ggplot-more.html#cb192-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">yearly_cost =</span> yearly_cost<span class="sc">/</span><span class="dv">1000000</span>) <span class="co">#divide by 1 million</span></span>
<span id="cb192-3"><a href="ggplot-more.html#cb192-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb192-4"><a href="ggplot-more.html#cb192-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(leso_texas_gsa)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 2
##    year yearly_cost
##   &lt;dbl&gt;       &lt;dbl&gt;
## 1  2010        6.81
## 2  2011        2.15
## 3  2012        4.40
## 4  2013       11.5 
## 5  2014       45.5 
## 6  2015        3.36</code></pre>
<p>Now, let’s re-visualize our data. Notice that in the <code>labs</code> layer below, we add some new information to the <code>y-axis</code>, so people know that the <code>5</code> here refers to <code>5 million</code>.</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="ggplot-more.html#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(leso_texas_gsa, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> yearly_cost)) <span class="sc">+</span> <span class="co">#we create the graph</span></span>
<span id="cb194-2"><a href="ggplot-more.html#cb194-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="co">#adding the points</span></span>
<span id="cb194-3"><a href="ggplot-more.html#cb194-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> <span class="co">#adding the lines between the points</span></span>
<span id="cb194-4"><a href="ggplot-more.html#cb194-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Yearly Value of Military Surplus Acquisitions in Texas&quot;</span>, </span>
<span id="cb194-5"><a href="ggplot-more.html#cb194-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Year&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Cost of acquisitions (in millions)&quot;</span>,</span>
<span id="cb194-6"><a href="ggplot-more.html#cb194-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Source: Law Enforcement Support Office&quot;</span>)</span></code></pre></div>
<p><img src="08-plots-more_files/figure-html/leso-txt-secondplot-1.png" width="672" /></p>
<p>Our chart is looking much better!</p>
</div>
<div id="saving-plots-as-an-object" class="section level3 hasAnchor" number="8.5.3">
<h3><span class="header-section-number">8.5.3</span> Saving plots as an object<a href="ggplot-more.html#saving-plots-as-an-object" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sometimes it is helpful to push the results of a plot into an R object to “save” those configurations. You can continue to add layers to this object, but you won’t need to rebuild the main portions of the chart each time. We’ll do that here so we can explore themes next.</p>
<ol style="list-style-type: decimal">
<li>Edit your Texas plot chunk you made earlier to save it into an R object, and then call <code>tx_plot</code> after it so you can see it.</li>
</ol>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="ggplot-more.html#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the line below saves the graph results into tx_plot</span></span>
<span id="cb195-2"><a href="ggplot-more.html#cb195-2" aria-hidden="true" tabindex="-1"></a>tx_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(leso_texas_gsa, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> yearly_cost)) <span class="sc">+</span> </span>
<span id="cb195-3"><a href="ggplot-more.html#cb195-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb195-4"><a href="ggplot-more.html#cb195-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb195-5"><a href="ggplot-more.html#cb195-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Yearly Value of Military Surplus Acquisitions in Texas&quot;</span>, </span>
<span id="cb195-6"><a href="ggplot-more.html#cb195-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Year&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Cost of acquisitions (in millions)&quot;</span>,</span>
<span id="cb195-7"><a href="ggplot-more.html#cb195-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Source: Law Enforcement Support Office&quot;</span>)</span>
<span id="cb195-8"><a href="ggplot-more.html#cb195-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-9"><a href="ggplot-more.html#cb195-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Since we saved the plot into an R object above, we have to call it again to see it.</span></span>
<span id="cb195-10"><a href="ggplot-more.html#cb195-10" aria-hidden="true" tabindex="-1"></a><span class="co"># We save graphs like this so we can reuse them.</span></span>
<span id="cb195-11"><a href="ggplot-more.html#cb195-11" aria-hidden="true" tabindex="-1"></a>tx_plot</span></code></pre></div>
<p><img src="08-plots-more_files/figure-html/tx-plot-create-1.png" width="672" /></p>
<p>We can continue to build upon the <code>tx_plot</code> object like we do below with themes, but those changes won’t be “saved” into the R environment unless you assign it to an R object.</p>
</div>
</div>
<div id="themes" class="section level2 hasAnchor" number="8.6">
<h2><span class="header-section-number">8.6</span> Themes<a href="ggplot-more.html#themes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <em>look</em> of the graph is controlled by the theme. There are a number of preset themes you can use. Let’s look at a couple.</p>
<ol style="list-style-type: decimal">
<li>Create a new section saying we’ll explore themes.</li>
<li>Add the chunk below and run it.</li>
</ol>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="ggplot-more.html#cb196-1" aria-hidden="true" tabindex="-1"></a>tx_plot <span class="sc">+</span></span>
<span id="cb196-2"><a href="ggplot-more.html#cb196-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="08-plots-more_files/figure-html/theme-minimal-1.png" width="672" /></p>
<p>This takes our existing <code>tx_plot</code> and then applies the <code>theme_minimal()</code> look to it.</p>
<p>There are a number of themes built into ggplot, most are pretty simplistic.</p>
<ol style="list-style-type: decimal">
<li>Edit your existing chunk to try different themes. Some you might try are <code>theme_classic()</code>, <code>theme_dark()</code> and <code>theme_void()</code>.</li>
</ol>
<div id="more-with-ggthemes" class="section level3 hasAnchor" number="8.6.1">
<h3><span class="header-section-number">8.6.1</span> More with ggthemes<a href="ggplot-more.html#more-with-ggthemes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are a number of other packages that build upon <code>ggplot2</code>, including <a href="https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/"><code>ggthemes</code></a>.</p>
<ol style="list-style-type: decimal">
<li>In your R console, install the <code>ggthemes</code> package using the <code>install.packages()</code> function: <code>install.packages("ggthemes")</code></li>
<li>Add the <code>library(ggthemes)</code> at the top of your current chunk.</li>
<li>Update the theme line to view some of the others options noted below.</li>
</ol>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="ggplot-more.html#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb197-2"><a href="ggplot-more.html#cb197-2" aria-hidden="true" tabindex="-1"></a>tx_plot <span class="sc">+</span></span>
<span id="cb197-3"><a href="ggplot-more.html#cb197-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_economist</span>()</span></code></pre></div>
<p><img src="08-plots-more_files/figure-html/theme-economist-1.png" width="672" /></p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="ggplot-more.html#cb198-1" aria-hidden="true" tabindex="-1"></a>tx_plot <span class="sc">+</span></span>
<span id="cb198-2"><a href="ggplot-more.html#cb198-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_fivethirtyeight</span>()</span></code></pre></div>
<p><img src="08-plots-more_files/figure-html/theme-538-1.png" width="672" /></p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="ggplot-more.html#cb199-1" aria-hidden="true" tabindex="-1"></a>tx_plot <span class="sc">+</span></span>
<span id="cb199-2"><a href="ggplot-more.html#cb199-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_stata</span>()</span></code></pre></div>
<p><img src="08-plots-more_files/figure-html/theme-stata-1.png" width="672" /></p>
</div>
<div id="there-is-more-to-themes" class="section level3 hasAnchor" number="8.6.2">
<h3><span class="header-section-number">8.6.2</span> There is more to themes<a href="ggplot-more.html#there-is-more-to-themes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There is also a <code>theme()</code> function that allows you individually <a href="https://ggplot2.tidyverse.org/reference/theme.html">adjust about every visual element</a> on your plot.</p>
<p>We do a wee bit of that later.</p>
</div>
</div>
<div id="adding-more-information" class="section level2 hasAnchor" number="8.7">
<h2><span class="header-section-number">8.7</span> Adding more information<a href="ggplot-more.html#adding-more-information" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>OK, our Texas military surplus information is fine … but how does that compare to neighboring states? Let’s work through building a new chart that shows all those steps.</p>
<div id="prepare-the-data-1" class="section level3 hasAnchor" number="8.7.1">
<h3><span class="header-section-number">8.7.1</span> Prepare the data<a href="ggplot-more.html#prepare-the-data-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We need to go back to our original <code>leso_dated</code> to get the additional states.</p>
<ol style="list-style-type: decimal">
<li>Start a new section that notes we are building a chart for five states (Texas, Oklahoma, Arkansas, New Mexico, and Louisiana)</li>
<li>Prepare the data using the <code>%in%</code> filter that we learned about in <a href="https://utdata.github.io/rwdir/sums-analyze.html#looking-a-local-agencies">Chapter 6</a>. Rather than creating a separate list, we’re going to write the list right into the <code>filter()</code> function using <code>c()</code>.</li>
</ol>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="ggplot-more.html#cb200-1" aria-hidden="true" tabindex="-1"></a>leso_five <span class="ot">&lt;-</span> leso_dated <span class="sc">|&gt;</span> </span>
<span id="cb200-2"><a href="ggplot-more.html#cb200-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb200-3"><a href="ggplot-more.html#cb200-3" aria-hidden="true" tabindex="-1"></a>    state <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;TX&quot;</span>, <span class="st">&quot;OK&quot;</span>, <span class="st">&quot;AR&quot;</span>, <span class="st">&quot;NM&quot;</span>, <span class="st">&quot;LA&quot;</span>)</span>
<span id="cb200-4"><a href="ggplot-more.html#cb200-4" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb200-5"><a href="ggplot-more.html#cb200-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-6"><a href="ggplot-more.html#cb200-6" aria-hidden="true" tabindex="-1"></a>leso_five</span></code></pre></div>
<pre><code>## # A tibble: 10,690 × 3
##     year total_value state
##    &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;
##  1  2021        880  AR   
##  2  2021        168  AR   
##  3  2018       1918  AR   
##  4  2015       3861  AR   
##  5  2021       4977. AR   
##  6  2021        421. AR   
##  7  2022      13300. AR   
##  8  2022       5828  AR   
##  9  2021      44478  AR   
## 10  2021        232. AR   
## # … with 10,680 more rows</code></pre>
<p>Now that we have our five states, let’s GSA this information, like we did earlier (but for all 5 states and not just Texas).</p>
<details>
<summary>
Again, this should be a refresher!
</summary>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="ggplot-more.html#cb202-1" aria-hidden="true" tabindex="-1"></a>leso_five_gsa <span class="ot">&lt;-</span> leso_five <span class="sc">|&gt;</span></span>
<span id="cb202-2"><a href="ggplot-more.html#cb202-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state, year) <span class="sc">|&gt;</span> <span class="co">#groups by state AND year</span></span>
<span id="cb202-3"><a href="ggplot-more.html#cb202-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">yearly_cost =</span> <span class="fu">sum</span>(total_value)) <span class="sc">|&gt;</span> </span>
<span id="cb202-4"><a href="ggplot-more.html#cb202-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">yearly_cost =</span> yearly_cost<span class="sc">/</span><span class="dv">1000000</span>) <span class="co">#divide by 1 million</span></span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;state&#39;. You can override using the
## `.groups` argument.</code></pre>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="ggplot-more.html#cb204-1" aria-hidden="true" tabindex="-1"></a>leso_five_gsa <span class="sc">|&gt;</span> <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 58
## Columns: 3
## Groups: state [5]
## $ state       &lt;chr&gt; &quot;AR&quot;, &quot;AR&quot;, &quot;AR&quot;, &quot;AR&quot;, &quot;AR&quot;, &quot;AR&quot;, &quot;AR&quot;, &quot;AR&quot;, &quot;AR&quot;, &quot;AR&quot;…
## $ year        &lt;dbl&gt; 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019…
## $ yearly_cost &lt;dbl&gt; 0.00135600, 0.69895063, 0.62593678, 2.72113085, 12.0759872…</code></pre>
</details>
</div>
<div id="plot-multiple-line-chart" class="section level3 hasAnchor" number="8.7.2">
<h3><span class="header-section-number">8.7.2</span> Plot multiple line chart<a href="ggplot-more.html#plot-multiple-line-chart" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For our next plot, we’ll add a different line for each state. To do this you would use the color aesthetic <code>aes()</code> in the <code>geom_line()</code> geom. Recall that geoms can have their own <code>aes()</code> variable information. This is especially useful for working with a third variable (like when making a stacked bar chart or line plot with multiple lines). Notice that the color aesthetic (meaning that it is in <code>aes</code>) takes a variable, not a color. You can learn how to change these colors <a href="http://www.sthda.com/english/wiki/ggplot2-colors-how-to-change-colors-automatically-and-manually">here</a>. For now, though, we’ll use the <code>ggplot</code> default colors.</p>
<ol style="list-style-type: decimal">
<li>Add a note that we’ll now build the chart.</li>
<li>Add the code chunk below and run it. Look through the comments so you understand it.</li>
</ol>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="ggplot-more.html#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(leso_five_gsa, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> yearly_cost)) <span class="sc">+</span> </span>
<span id="cb206-2"><a href="ggplot-more.html#cb206-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb206-3"><a href="ggplot-more.html#cb206-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> state)) <span class="sc">+</span> <span class="co"># The aes selects a color for each state</span></span>
<span id="cb206-4"><a href="ggplot-more.html#cb206-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Yearly Value of Military Surplus Acquisitions in Texas and Boardering States&quot;</span>, </span>
<span id="cb206-5"><a href="ggplot-more.html#cb206-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Yearly&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Cost of acquisitions (in millions)&quot;</span>,</span>
<span id="cb206-6"><a href="ggplot-more.html#cb206-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Source: Law Enforcement Support Office&quot;</span>)</span></code></pre></div>
<p><img src="08-plots-more_files/figure-html/five-hied-lcolor-1.png" width="672" /></p>
<p>Notice that R changes the color of the line, but not the point? This is because we only included the aesthetic in the <code>geom_line()</code> geom and not the <code>geom_point()</code> geom.</p>
<ol style="list-style-type: decimal">
<li>Edit your <code>geom_point()</code> to add <code>aes(color = state)</code>.</li>
</ol>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="ggplot-more.html#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(leso_five_gsa, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> yearly_cost)) <span class="sc">+</span> </span>
<span id="cb207-2"><a href="ggplot-more.html#cb207-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> state)) <span class="sc">+</span></span>
<span id="cb207-3"><a href="ggplot-more.html#cb207-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> state)) <span class="sc">+</span> <span class="co"># The aes selects a color for each state</span></span>
<span id="cb207-4"><a href="ggplot-more.html#cb207-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Yearly Value of Military Surplus Acquisitions in Texas and Boardering States&quot;</span>, </span>
<span id="cb207-5"><a href="ggplot-more.html#cb207-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Year&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Cost of acquisitions (in millions)&quot;</span>,</span>
<span id="cb207-6"><a href="ggplot-more.html#cb207-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Source: Law Enforcement Support Office&quot;</span>)</span></code></pre></div>
<p><img src="08-plots-more_files/figure-html/five-hied-pcolor-1.png" width="672" /></p>
</div>
</div>
<div id="on-your-own-line-chart" class="section level2 hasAnchor" number="8.8">
<h2><span class="header-section-number">8.8</span> On your own: Line chart<a href="ggplot-more.html#on-your-own-line-chart" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>I want you to make a line chart of military surplus acquisitions in three states that are <strong>different</strong> from the five we used above. This is very similar to the chart you just made, but with different values.</p>
<p>Some things to do/consider:</p>
<ol style="list-style-type: decimal">
<li>Do this in a new section and explain it.</li>
<li>You’ll need to prepare the data just like we did above to get the right data points and the right states.</li>
<li>I really suggest you build both chunks (the data prep and the chart) one line at a time so you can see what each step adds.</li>
</ol>
</div>
<div id="tour-of-some-other-adjustments" class="section level2 hasAnchor" number="8.9">
<h2><span class="header-section-number">8.9</span> Tour of some other adjustments<a href="ggplot-more.html#tour-of-some-other-adjustments" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You don’t have to add these examples below to your own notebook, but here are some examples of other things you can control.</p>
<div id="line-width" class="section level3 hasAnchor" number="8.9.1">
<h3><span class="header-section-number">8.9.1</span> Line width<a href="ggplot-more.html#line-width" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="ggplot-more.html#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(leso_five_gsa, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> yearly_cost)) <span class="sc">+</span> </span>
<span id="cb208-2"><a href="ggplot-more.html#cb208-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> state)) <span class="sc">+</span></span>
<span id="cb208-3"><a href="ggplot-more.html#cb208-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> state), <span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span> <span class="co">#make the lines thicker here</span></span>
<span id="cb208-4"><a href="ggplot-more.html#cb208-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Yearly Value of Military Surplus Acquisitions in Texas and Boardering States&quot;</span>, </span>
<span id="cb208-5"><a href="ggplot-more.html#cb208-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Year&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Cost of acquisitions (in millions)&quot;</span>,</span>
<span id="cb208-6"><a href="ggplot-more.html#cb208-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Source: Law Enforcement Support Office&quot;</span>)</span></code></pre></div>
<pre><code>## Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
## ℹ Please use `linewidth` instead.</code></pre>
<p><img src="08-plots-more_files/figure-html/line-width-1.png" width="672" /></p>
</div>
<div id="line-type" class="section level3 hasAnchor" number="8.9.2">
<h3><span class="header-section-number">8.9.2</span> Line type<a href="ggplot-more.html#line-type" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This example removes the points and adds a <code>linetype = state</code> to the ggplot aesthetic. This gives each state a different type of line. We also set the color in the <code>geom_line()</code></p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="ggplot-more.html#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(leso_five_gsa, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> yearly_cost)) <span class="sc">+</span> </span>
<span id="cb210-2"><a href="ggplot-more.html#cb210-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> state)) <span class="sc">+</span></span>
<span id="cb210-3"><a href="ggplot-more.html#cb210-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> state, <span class="at">linetype =</span> state), <span class="at">size =</span> <span class="fl">0.75</span>) <span class="sc">+</span> <span class="co">#changes the line type</span></span>
<span id="cb210-4"><a href="ggplot-more.html#cb210-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Yearly Value of Military Surplus Acquisitions in Texas and Boardering States&quot;</span>, </span>
<span id="cb210-5"><a href="ggplot-more.html#cb210-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Year&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Cost of acquisitions (in millions)&quot;</span>,</span>
<span id="cb210-6"><a href="ggplot-more.html#cb210-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Source: Law Enforcement Support Office&quot;</span>)</span></code></pre></div>
<p><img src="08-plots-more_files/figure-html/line-type-1.png" width="672" /></p>
<p>Notice that when you put the information <code>geom_line(aes())</code> (like with <code>color</code> and <code>linetype</code>), this varies the color and linetype of the lines, whereas <code>size</code> is consistent for all the lines.</p>
</div>
<div id="adjust-axis" class="section level3 hasAnchor" number="8.9.3">
<h3><span class="header-section-number">8.9.3</span> Adjust axis<a href="ggplot-more.html#adjust-axis" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>ggplot()</code> typically makes assumptions about scale. Sometimes, you may want to change it though (e.g., make them a little larger). There are a couple different ways to do this. The most straightforward may be <code>xlim()</code> and <code>ylim()</code>.</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="ggplot-more.html#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(leso_five_gsa, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> yearly_cost)) <span class="sc">+</span> </span>
<span id="cb211-2"><a href="ggplot-more.html#cb211-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> state)) <span class="sc">+</span></span>
<span id="cb211-3"><a href="ggplot-more.html#cb211-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> state, <span class="at">linetype =</span> state), <span class="at">size =</span> <span class="fl">0.75</span>) <span class="sc">+</span> <span class="co">#changes the line type</span></span>
<span id="cb211-4"><a href="ggplot-more.html#cb211-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="dv">2009</span>, <span class="dv">2022</span>) <span class="sc">+</span> <span class="co"># sets minimum and maximum values on axis</span></span>
<span id="cb211-5"><a href="ggplot-more.html#cb211-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Yearly Value of Military Surplus Acquisitions in Texas and Boardering States&quot;</span>, </span>
<span id="cb211-6"><a href="ggplot-more.html#cb211-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Year&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Cost of acquisitions (in millions)&quot;</span>,</span>
<span id="cb211-7"><a href="ggplot-more.html#cb211-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Source: Law Enforcement Support Office&quot;</span>)</span></code></pre></div>
<p><img src="08-plots-more_files/figure-html/adjust-axis-1.png" width="672" />
The function <code>xlim()</code> and <code>ylim()</code> are shortcuts for <code>scale_x_continuous()</code> and <code>scale_y_continuous()</code> which <a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html#examples">do more things</a>.</p>
</div>
</div>
<div id="facets" class="section level2 hasAnchor" number="8.10">
<h2><span class="header-section-number">8.10</span> Facets<a href="ggplot-more.html#facets" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Facets are a way to make multiple graphs based on a variable in the data. There are two types, the <code>facet_wrap()</code> and the <code>facet_grid()</code>. There is a good explanation of these in <a href="https://r4ds.had.co.nz/data-visualisation.html?q=facet#facets">R for Data Science</a>.</p>
<p>We’ll start by creating a base graph and then apply the facet.</p>
<ol style="list-style-type: decimal">
<li>Start a new section about facets</li>
<li>Add the code below to create your chart and view it. This is the same plot we’ve already created</li>
</ol>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="ggplot-more.html#cb212-1" aria-hidden="true" tabindex="-1"></a>five_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(leso_five_gsa, <span class="fu">aes</span>(<span class="at">x =</span> year, </span>
<span id="cb212-2"><a href="ggplot-more.html#cb212-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">y =</span> yearly_cost)) <span class="sc">+</span> </span>
<span id="cb212-3"><a href="ggplot-more.html#cb212-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> state)) <span class="sc">+</span></span>
<span id="cb212-4"><a href="ggplot-more.html#cb212-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> state)) <span class="sc">+</span> </span>
<span id="cb212-5"><a href="ggplot-more.html#cb212-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Yearly Value of Military Surplus Acquisitions in Texas and Boardering States&quot;</span>, </span>
<span id="cb212-6"><a href="ggplot-more.html#cb212-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Year&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Cost of acquisitions (in millions)&quot;</span>,</span>
<span id="cb212-7"><a href="ggplot-more.html#cb212-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Source: Law Enforcement Support Office&quot;</span>)</span>
<span id="cb212-8"><a href="ggplot-more.html#cb212-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-9"><a href="ggplot-more.html#cb212-9" aria-hidden="true" tabindex="-1"></a>five_plot</span></code></pre></div>
<p><img src="08-plots-more_files/figure-html/facet-data-1.png" width="672" /></p>
<div id="facet-wrap" class="section level3 hasAnchor" number="8.10.1">
<h3><span class="header-section-number">8.10.1</span> Facet wrap<a href="ggplot-more.html#facet-wrap" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>facet_wrap()</code> function splits your chart based on a single variable. To use the <code>facet_wrap()</code> function, you need one argument: a <code>~</code> followed by a space and the variable you want to split by (in the chart below, this will be the <code>state</code> variable).</p>
<p>Like with our themed plots, we’ll use a <code>+</code> to add this <code>facet_wrap()</code> layer to our previously created line graph.</p>
<ol style="list-style-type: decimal">
<li>Add a new chunk and include our previously created plot</li>
<li>Use the <code>+</code> in the next line to “pipe” in a <code>facet_wrap()</code> layer.</li>
<li>(We also use a <code>theme</code> layer to remove the legend. See what happens when you comment this out!)</li>
</ol>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="ggplot-more.html#cb213-1" aria-hidden="true" tabindex="-1"></a>five_plot <span class="sc">+</span></span>
<span id="cb213-2"><a href="ggplot-more.html#cb213-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> state) <span class="sc">+</span></span>
<span id="cb213-3"><a href="ggplot-more.html#cb213-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="co"># this line removes the legend. Try it without it!</span></span></code></pre></div>
<p><img src="08-plots-more_files/figure-html/facet-wrap-1.png" width="672" /></p>
<p>A couple of notes about the above code:</p>
<ul>
<li>Note the comment in the code above where we used the <code>theme()</code> function to remove the legend.</li>
<li>You can specify the number of rows or columns of the grouping by adjusting the facet_wrap() function: <code>facet_wrap(~ state, nrow = 2)</code> or <code>facet_wrap(~ state, ncol = 2)</code>. Try them!</li>
</ul>
</div>
<div id="facet-grids" class="section level3 hasAnchor" number="8.10.2">
<h3><span class="header-section-number">8.10.2</span> Facet grids<a href="ggplot-more.html#facet-grids" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A <code>facet_grid()</code> allows you to plot on a combination of variables. We don’t really have two numbers to compare in our higher education data so we’ll show this with the <code>mpg</code> data we’ve used before.</p>
<ol style="list-style-type: decimal">
<li>Start a new section noting you’ll try facet grid.</li>
<li>Add the chunk below and run it. Notice here that we are putting our <code>aes()</code> layer in <code>geom_point()</code>.</li>
</ol>
<p>Explanations follow the chart.</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="ggplot-more.html#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg) <span class="sc">+</span> </span>
<span id="cb214-2"><a href="ggplot-more.html#cb214-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span> <span class="co"># add points to the chart</span></span>
<span id="cb214-3"><a href="ggplot-more.html#cb214-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(drv <span class="sc">~</span> cyl) <span class="co"># splits into charts by drive train and cylinder</span></span></code></pre></div>
<p><img src="08-plots-more_files/figure-html/facet-grid-1.png" width="672" /></p>
<p>This chart is kinda hard to read, but let’s try:</p>
<ul>
<li>Inside the mini charts, the best gas mileage is toward the top (from <code>hwy</code>) and the smaller engines are to the left (from <code>displ</code>.)</li>
<li>The rows of charts are divided by drive train <code>drv</code>: four-wheel drive, front-wheel drive and rear-wheel drive.</li>
<li>The columns of charts are divided by cylinders: like a 4-cylinder car vs 8-cylinder car.</li>
</ul>
<p>This chart tells us that 4-cylinder, front-wheel drive cars with smaller engines get the best gas mileage. The blank charts mean that combination of values didn’t exist in the data.</p>
</div>
</div>
<div id="on-your-own-facet-wrap" class="section level2 hasAnchor" number="8.11">
<h2><span class="header-section-number">8.11</span> On your own: Facet wrap<a href="ggplot-more.html#on-your-own-facet-wrap" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li>Create a section about doing a facet wrap on your own.</li>
<li>Take the “On your own” plot that you made earlier (The other states that you chose) and apply a <code>facet_wrap()</code> here. You were instructed to save the plot into an R object, so you should be able to use that.</li>
<li>Remove the legend since each mini chart is labeled.</li>
</ol>
</div>
<div id="saving-plots" class="section level2 hasAnchor" number="8.12">
<h2><span class="header-section-number">8.12</span> Saving plots<a href="ggplot-more.html#saving-plots" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To save plots as images, you can right-click plots that you make in RNotebooks. Or, you can use the export button in the Plot pane. Or (and this is a preferred strategy), you can save them using <code>ggsave()</code>. (<a href="https://ggplot2.tidyverse.org/reference/ggsave.html">Learn more here</a>).</p>
<ol style="list-style-type: decimal">
<li>Use your Files pane to create a new folder called “images” so we can save our chart there.</li>
<li>Start a section on saving plots and add the following chunk.</li>
</ol>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="ggplot-more.html#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;images/txplot.png&quot;</span>, <span class="at">plot =</span> tx_plot)</span></code></pre></div>
<pre><code>## Saving 7 x 5 in image</code></pre>
<p>Using <code>ggsave</code> creates a higher-res image than other methods. It needs:</p>
<ul>
<li>The path and name of the image, in quotes</li>
<li>the <code>plot =</code> variable to say which plot you are saving. (Your plot must already be saved into an R object for this method to work.)</li>
</ul>
</div>
<div id="interactive-plots" class="section level2 hasAnchor" number="8.13">
<h2><span class="header-section-number">8.13</span> Interactive plots<a href="ggplot-more.html#interactive-plots" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Want to make your plot interactive? You can use <a href="https://plotly.com/r/">plotly</a>’s <code>ggplotly()</code> function to transform your graph into an interactive chart.</p>
<p>To use plotly, you’ll want to install the plotly package, add the library, and then use the ggplotly() function:</p>
<ol style="list-style-type: decimal">
<li>In your R Console, run <code>install.packages("plotly")</code>. (You only have to do this once on your computer.)</li>
<li>Add a new section to note you are creating an interactive chart.</li>
<li>Add the code below and run it. Then play with the chart!</li>
</ol>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="ggplot-more.html#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb217-2"><a href="ggplot-more.html#cb217-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-3"><a href="ggplot-more.html#cb217-3" aria-hidden="true" tabindex="-1"></a>tx_plot <span class="sc">|&gt;</span> </span>
<span id="cb217-4"><a href="ggplot-more.html#cb217-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplotly</span>()</span></code></pre></div>
<p>(We can’t show the interactive version in this book.)</p>
<p>Now you have tool tips on your points when you hover over them.</p>
<p>The <code>ggplotly()</code> function is not perfect. Alternatively, you can use plotly’s own syntax to build some quite interesting charts, but it’s a whole <a href="https://plotly.com/r/">new syntax to master</a>.</p>
</div>
<div id="what-we-learned" class="section level2 hasAnchor" number="8.14">
<h2><span class="header-section-number">8.14</span> What we learned<a href="ggplot-more.html#what-we-learned" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There is so much more to <code>ggplot2</code> than what we’ve shown here, but these are the basics that should get you through the class. At the top of this chapter are a list of other resources to learn more.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="ggplot-intro.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tidy-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/08-plots-more.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>

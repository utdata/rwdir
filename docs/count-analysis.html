<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Summarize with count - analysis | Reporting with Data in R</title>
  <meta name="description" content="Chapter 4 Summarize with count - analysis | Reporting with Data in R is a series of lessons and instructions used in courses in the School of Journalism and Media, Moody College of Communication at the University of Texas at Austin. The course is taught by Christian McDonald and Jo Lukito." />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Summarize with count - analysis | Reporting with Data in R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Chapter 4 Summarize with count - analysis | Reporting with Data in R is a series of lessons and instructions used in courses in the School of Journalism and Media, Moody College of Communication at the University of Texas at Austin. The course is taught by Christian McDonald and Jo Lukito." />
  <meta name="github-repo" content="utdata/rwdir" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Summarize with count - analysis | Reporting with Data in R" />
  
  <meta name="twitter:description" content="Chapter 4 Summarize with count - analysis | Reporting with Data in R is a series of lessons and instructions used in courses in the School of Journalism and Media, Moody College of Communication at the University of Texas at Austin. The course is taught by Christian McDonald and Jo Lukito." />
  

<meta name="author" content="Christian McDonald and Josephine Lukito" />


<meta name="date" content="2023-01-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="counts-import.html"/>
<link rel="next" href="sums-import.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.25/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<style type="text/css">
  p.caption {
    color: #777;
    margin-top: 10px;
  }
  p code, pre, pre code, li code {
    background-color: #DCDCDC !important;
  }
  detail {
    margin-bottom: 30px;
  }
</style>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Reporting with Data in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this book</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#a-word-from-prof.-mcdonald"><i class="fa fa-check"></i>A word from Prof. McDonald</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#tips-on-the-book-style"><i class="fa fa-check"></i>Tips on the book style</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#things-to-do"><i class="fa fa-check"></i>Things to do</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#notes-some-important"><i class="fa fa-check"></i>Notes, some important</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#copy-code-blocks"><i class="fa fa-check"></i>Copy code blocks</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-the-authors"><i class="fa fa-check"></i>About the authors</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#christian-mcdonald"><i class="fa fa-check"></i>Christian McDonald</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#jo-lukito"><i class="fa fa-check"></i>Jo Lukito</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#versions"><i class="fa fa-check"></i>Versions</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#other-resources"><i class="fa fa-check"></i>Other resources</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="install.html"><a href="install.html"><i class="fa fa-check"></i><b>1</b> Install Party</a>
<ul>
<li class="chapter" data-level="1.1" data-path="install.html"><a href="install.html#mac-vs-pc"><i class="fa fa-check"></i><b>1.1</b> Mac vs PC</a></li>
<li class="chapter" data-level="1.2" data-path="install.html"><a href="install.html#installing-r"><i class="fa fa-check"></i><b>1.2</b> Installing R</a></li>
<li class="chapter" data-level="1.3" data-path="install.html"><a href="install.html#installing-rstudio"><i class="fa fa-check"></i><b>1.3</b> Installing RStudio</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="install.html"><a href="install.html#getting-git-errors-on-macs"><i class="fa fa-check"></i><b>1.3.1</b> Getting “Git” errors on Macs</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="install.html"><a href="install.html#class-project-folder"><i class="fa fa-check"></i><b>1.4</b> Class project folder</a></li>
<li class="chapter" data-level="1.5" data-path="install.html"><a href="install.html#rstudio-cloud"><i class="fa fa-check"></i><b>1.5</b> RStudio Cloud</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#rstudio-tour"><i class="fa fa-check"></i><b>2.1</b> RStudio tour</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#updating-preferences"><i class="fa fa-check"></i><b>2.2</b> Updating preferences</a></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#starting-a-new-project"><i class="fa fa-check"></i><b>2.3</b> Starting a new Project</a></li>
<li class="chapter" data-level="2.4" data-path="intro.html"><a href="intro.html#using-r-notebooks"><i class="fa fa-check"></i><b>2.4</b> Using R Notebooks</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="intro.html"><a href="intro.html#create-your-first-notebook"><i class="fa fa-check"></i><b>2.4.1</b> Create your first notebook</a></li>
<li class="chapter" data-level="2.4.2" data-path="intro.html"><a href="intro.html#save-the-.rmd-file"><i class="fa fa-check"></i><b>2.4.2</b> Save the .Rmd file</a></li>
<li class="chapter" data-level="2.4.3" data-path="intro.html"><a href="intro.html#run-the-notebook"><i class="fa fa-check"></i><b>2.4.3</b> Run the notebook</a></li>
<li class="chapter" data-level="2.4.4" data-path="intro.html"><a href="intro.html#a-note-about-rmarkdown"><i class="fa fa-check"></i><b>2.4.4</b> A note about RMarkdown</a></li>
<li class="chapter" data-level="2.4.5" data-path="intro.html"><a href="intro.html#adding-new-code-chunks"><i class="fa fa-check"></i><b>2.4.5</b> Adding new code chunks</a></li>
<li class="chapter" data-level="2.4.6" data-path="intro.html"><a href="intro.html#practice-adding-code-chunks"><i class="fa fa-check"></i><b>2.4.6</b> Practice adding code chunks</a></li>
<li class="chapter" data-level="2.4.7" data-path="intro.html"><a href="intro.html#preview-the-report"><i class="fa fa-check"></i><b>2.4.7</b> Preview the report</a></li>
<li class="chapter" data-level="2.4.8" data-path="intro.html"><a href="intro.html#the-toolbar"><i class="fa fa-check"></i><b>2.4.8</b> The toolbar</a></li>
<li class="chapter" data-level="2.4.9" data-path="intro.html"><a href="intro.html#knit-the-final-workbook"><i class="fa fa-check"></i><b>2.4.9</b> Knit the final workbook</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="intro.html"><a href="intro.html#turning-in-our-projects"><i class="fa fa-check"></i><b>2.5</b> Turning in our projects</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="counts-import.html"><a href="counts-import.html"><i class="fa fa-check"></i><b>3</b> Summarize with count - import</a>
<ul>
<li class="chapter" data-level="3.1" data-path="counts-import.html"><a href="counts-import.html#learning-goals-of-this-lesson"><i class="fa fa-check"></i><b>3.1</b> Learning goals of this lesson</a></li>
<li class="chapter" data-level="3.2" data-path="counts-import.html"><a href="counts-import.html#basic-steps-of-this-lesson"><i class="fa fa-check"></i><b>3.2</b> Basic steps of this lesson</a></li>
<li class="chapter" data-level="3.3" data-path="counts-import.html"><a href="counts-import.html#create-a-new-project"><i class="fa fa-check"></i><b>3.3</b> Create a new project</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="counts-import.html"><a href="counts-import.html#describe-the-goals-of-the-notebook"><i class="fa fa-check"></i><b>3.3.1</b> Describe the goals of the notebook</a></li>
<li class="chapter" data-level="3.3.2" data-path="counts-import.html"><a href="counts-import.html#the-r-package-environment"><i class="fa fa-check"></i><b>3.3.2</b> The R Package environment</a></li>
<li class="chapter" data-level="3.3.3" data-path="counts-import.html"><a href="counts-import.html#installing-and-using-packages"><i class="fa fa-check"></i><b>3.3.3</b> Installing and using packages</a></li>
<li class="chapter" data-level="3.3.4" data-path="counts-import.html"><a href="counts-import.html#load-the-libraries"><i class="fa fa-check"></i><b>3.3.4</b> Load the libraries</a></li>
<li class="chapter" data-level="3.3.5" data-path="counts-import.html"><a href="counts-import.html#create-a-directory-for-your-data"><i class="fa fa-check"></i><b>3.3.5</b> Create a directory for your data</a></li>
<li class="chapter" data-level="3.3.6" data-path="counts-import.html"><a href="counts-import.html#about-data-sources"><i class="fa fa-check"></i><b>3.3.6</b> About data sources</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="counts-import.html"><a href="counts-import.html#the-billboard-hot-100"><i class="fa fa-check"></i><b>3.4</b> The Billboard Hot 100</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="counts-import.html"><a href="counts-import.html#data-dictionary"><i class="fa fa-check"></i><b>3.4.1</b> Data dictionary</a></li>
<li class="chapter" data-level="3.4.2" data-path="counts-import.html"><a href="counts-import.html#lets-download-our-data"><i class="fa fa-check"></i><b>3.4.2</b> Let’s download our data</a></li>
<li class="chapter" data-level="3.4.3" data-path="counts-import.html"><a href="counts-import.html#consider-commenting-the-download"><i class="fa fa-check"></i><b>3.4.3</b> Consider commenting the download</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="counts-import.html"><a href="counts-import.html#import-the-data"><i class="fa fa-check"></i><b>3.5</b> Import the data</a></li>
<li class="chapter" data-level="3.6" data-path="counts-import.html"><a href="counts-import.html#assign-our-import-to-an-r-object"><i class="fa fa-check"></i><b>3.6</b> Assign our import to an R object</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="counts-import.html"><a href="counts-import.html#print-a-peek-to-your-r-notebook"><i class="fa fa-check"></i><b>3.6.1</b> Print a peek to your R Notebook</a></li>
<li class="chapter" data-level="3.6.2" data-path="counts-import.html"><a href="counts-import.html#glimpse-the-data"><i class="fa fa-check"></i><b>3.6.2</b> Glimpse the data</a></li>
<li class="chapter" data-level="3.6.3" data-path="counts-import.html"><a href="counts-import.html#about-the-pipe"><i class="fa fa-check"></i><b>3.6.3</b> About the pipe |&gt;</a></li>
<li class="chapter" data-level="" data-path="counts-import.html"><a href="counts-import.html#a-rabbit-dives-into-a-pipe"><i class="fa fa-check"></i>A rabbit dives into a pipe</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="counts-import.html"><a href="counts-import.html#cleaning-data"><i class="fa fa-check"></i><b>3.7</b> Cleaning data</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="counts-import.html"><a href="counts-import.html#cleaning-column-names"><i class="fa fa-check"></i><b>3.7.1</b> Cleaning column names</a></li>
<li class="chapter" data-level="3.7.2" data-path="counts-import.html"><a href="counts-import.html#fixing-the-date"><i class="fa fa-check"></i><b>3.7.2</b> Fixing the date</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="counts-import.html"><a href="counts-import.html#arrange-the-data"><i class="fa fa-check"></i><b>3.8</b> Arrange the data</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="counts-import.html"><a href="counts-import.html#getting-summary-stats"><i class="fa fa-check"></i><b>3.8.1</b> Getting summary stats</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="counts-import.html"><a href="counts-import.html#selecting-columns"><i class="fa fa-check"></i><b>3.9</b> Selecting columns</a></li>
<li class="chapter" data-level="3.10" data-path="counts-import.html"><a href="counts-import.html#exporting-data"><i class="fa fa-check"></i><b>3.10</b> Exporting data</a>
<ul>
<li class="chapter" data-level="3.10.1" data-path="counts-import.html"><a href="counts-import.html#single-notebook-philosophy"><i class="fa fa-check"></i><b>3.10.1</b> Single-notebook philosophy</a></li>
<li class="chapter" data-level="3.10.2" data-path="counts-import.html"><a href="counts-import.html#exporting-as-rds"><i class="fa fa-check"></i><b>3.10.2</b> Exporting as rds</a></li>
</ul></li>
<li class="chapter" data-level="3.11" data-path="counts-import.html"><a href="counts-import.html#naming-chunks"><i class="fa fa-check"></i><b>3.11</b> Naming chunks</a></li>
<li class="chapter" data-level="3.12" data-path="counts-import.html"><a href="counts-import.html#knit-your-page"><i class="fa fa-check"></i><b>3.12</b> Knit your page</a></li>
<li class="chapter" data-level="3.13" data-path="counts-import.html"><a href="counts-import.html#review-of-what-weve-learned-so-far"><i class="fa fa-check"></i><b>3.13</b> Review of what we’ve learned so far</a></li>
<li class="chapter" data-level="3.14" data-path="counts-import.html"><a href="counts-import.html#whats-next"><i class="fa fa-check"></i><b>3.14</b> What’s next</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="count-analysis.html"><a href="count-analysis.html"><i class="fa fa-check"></i><b>4</b> Summarize with count - analysis</a>
<ul>
<li class="chapter" data-level="4.1" data-path="count-analysis.html"><a href="count-analysis.html#goals-of-this-lesson"><i class="fa fa-check"></i><b>4.1</b> Goals of this lesson</a></li>
<li class="chapter" data-level="4.2" data-path="count-analysis.html"><a href="count-analysis.html#the-questions-well-answer"><i class="fa fa-check"></i><b>4.2</b> The questions we’ll answer</a></li>
<li class="chapter" data-level="4.3" data-path="count-analysis.html"><a href="count-analysis.html#setting-up-an-analysis-notebook"><i class="fa fa-check"></i><b>4.3</b> Setting up an analysis notebook</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="count-analysis.html"><a href="count-analysis.html#import-the-cleaned-data"><i class="fa fa-check"></i><b>4.3.1</b> Import the cleaned data</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="count-analysis.html"><a href="count-analysis.html#introducing-dplyr"><i class="fa fa-check"></i><b>4.4</b> Introducing dplyr</a></li>
<li class="chapter" data-level="4.5" data-path="count-analysis.html"><a href="count-analysis.html#most-appearances"><i class="fa fa-check"></i><b>4.5</b> Most appearances</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="count-analysis.html"><a href="count-analysis.html#group-aggregate"><i class="fa fa-check"></i><b>4.5.1</b> Group &amp; Aggregate</a></li>
<li class="chapter" data-level="4.5.2" data-path="count-analysis.html"><a href="count-analysis.html#summarize"><i class="fa fa-check"></i><b>4.5.2</b> Summarize</a></li>
<li class="chapter" data-level="4.5.3" data-path="count-analysis.html"><a href="count-analysis.html#group-by"><i class="fa fa-check"></i><b>4.5.3</b> Group by</a></li>
<li class="chapter" data-level="4.5.4" data-path="count-analysis.html"><a href="count-analysis.html#arrange-the-results"><i class="fa fa-check"></i><b>4.5.4</b> Arrange the results</a></li>
<li class="chapter" data-level="4.5.5" data-path="count-analysis.html"><a href="count-analysis.html#get-the-top-of-the-list"><i class="fa fa-check"></i><b>4.5.5</b> Get the top of the list</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="count-analysis.html"><a href="count-analysis.html#titleperformer-combo-with-most-appearances"><i class="fa fa-check"></i><b>4.6</b> Title/performer combo with most appearances</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="count-analysis.html"><a href="count-analysis.html#introducing-filter"><i class="fa fa-check"></i><b>4.6.1</b> Introducing filter()</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="count-analysis.html"><a href="count-analysis.html#titleperformer-with-most-weeks-at-no.-1"><i class="fa fa-check"></i><b>4.7</b> Title/Performer with most weeks at No. 1</a></li>
<li class="chapter" data-level="4.8" data-path="count-analysis.html"><a href="count-analysis.html#performer-with-most-titles-to-reach-no.-1"><i class="fa fa-check"></i><b>4.8</b> Performer with most titles to reach No. 1</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="count-analysis.html"><a href="count-analysis.html#using-distinct"><i class="fa fa-check"></i><b>4.8.1</b> Using distinct()</a></li>
<li class="chapter" data-level="4.8.2" data-path="count-analysis.html"><a href="count-analysis.html#summarize-the-performers"><i class="fa fa-check"></i><b>4.8.2</b> Summarize the performers</a></li>
<li class="chapter" data-level="4.8.3" data-path="count-analysis.html"><a href="count-analysis.html#filter-for-a-good-cutoff"><i class="fa fa-check"></i><b>4.8.3</b> Filter for a good cutoff</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="count-analysis.html"><a href="count-analysis.html#no.-1-hits-in-last-five-years"><i class="fa fa-check"></i><b>4.9</b> No. 1 hits in last five years</a></li>
<li class="chapter" data-level="4.10" data-path="count-analysis.html"><a href="count-analysis.html#top-10-hits-overall-on-your-own"><i class="fa fa-check"></i><b>4.10</b> Top 10 hits overall (on your own)</a></li>
<li class="chapter" data-level="4.11" data-path="count-analysis.html"><a href="count-analysis.html#complex-filters"><i class="fa fa-check"></i><b>4.11</b> Complex filters</a>
<ul>
<li class="chapter" data-level="4.11.1" data-path="count-analysis.html"><a href="count-analysis.html#multiple-truths"><i class="fa fa-check"></i><b>4.11.1</b> Multiple truths</a></li>
<li class="chapter" data-level="4.11.2" data-path="count-analysis.html"><a href="count-analysis.html#either-is-true"><i class="fa fa-check"></i><b>4.11.2</b> Either is true</a></li>
<li class="chapter" data-level="4.11.3" data-path="count-analysis.html"><a href="count-analysis.html#mixing-criteria"><i class="fa fa-check"></i><b>4.11.3</b> Mixing criteria</a></li>
<li class="chapter" data-level="4.11.4" data-path="count-analysis.html"><a href="count-analysis.html#search-within-a-string"><i class="fa fa-check"></i><b>4.11.4</b> Search within a string</a></li>
</ul></li>
<li class="chapter" data-level="4.12" data-path="count-analysis.html"><a href="count-analysis.html#on-your-own"><i class="fa fa-check"></i><b>4.12</b> On your own</a></li>
<li class="chapter" data-level="4.13" data-path="count-analysis.html"><a href="count-analysis.html#a-shortcut-count"><i class="fa fa-check"></i><b>4.13</b> A shortcut: count()</a></li>
<li class="chapter" data-level="4.14" data-path="count-analysis.html"><a href="count-analysis.html#review-of-what-weve-learned"><i class="fa fa-check"></i><b>4.14</b> Review of what we’ve learned</a></li>
<li class="chapter" data-level="4.15" data-path="count-analysis.html"><a href="count-analysis.html#turn-in-your-project"><i class="fa fa-check"></i><b>4.15</b> Turn in your project</a></li>
<li class="chapter" data-level="4.16" data-path="count-analysis.html"><a href="count-analysis.html#soundtrack-for-this-assignment"><i class="fa fa-check"></i><b>4.16</b> Soundtrack for this assignment</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="sums-import.html"><a href="sums-import.html"><i class="fa fa-check"></i><b>5</b> Summarize with math - import</a>
<ul>
<li class="chapter" data-level="5.1" data-path="sums-import.html"><a href="sums-import.html#about-the-story-military-surplus-transfers"><i class="fa fa-check"></i><b>5.1</b> About the story: Military surplus transfers</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="sums-import.html"><a href="sums-import.html#the-1033-program"><i class="fa fa-check"></i><b>5.1.1</b> The 1033 program</a></li>
<li class="chapter" data-level="5.1.2" data-path="sums-import.html"><a href="sums-import.html#about-the-data"><i class="fa fa-check"></i><b>5.1.2</b> About the data</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="sums-import.html"><a href="sums-import.html#the-questions-we-will-answer"><i class="fa fa-check"></i><b>5.2</b> The questions we will answer</a></li>
<li class="chapter" data-level="5.3" data-path="sums-import.html"><a href="sums-import.html#getting-started-create-your-project"><i class="fa fa-check"></i><b>5.3</b> Getting started: Create your project</a></li>
<li class="chapter" data-level="5.4" data-path="sums-import.html"><a href="sums-import.html#importcleaning-notebook"><i class="fa fa-check"></i><b>5.4</b> Import/cleaning notebook</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="sums-import.html"><a href="sums-import.html#the-goals-of-the-notebook"><i class="fa fa-check"></i><b>5.4.1</b> The goals of the notebook</a></li>
<li class="chapter" data-level="5.4.2" data-path="sums-import.html"><a href="sums-import.html#add-a-setup-section"><i class="fa fa-check"></i><b>5.4.2</b> Add a setup section</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="sums-import.html"><a href="sums-import.html#download-the-data"><i class="fa fa-check"></i><b>5.5</b> Download the data</a></li>
<li class="chapter" data-level="5.6" data-path="sums-import.html"><a href="sums-import.html#import-the-data-1"><i class="fa fa-check"></i><b>5.6</b> Import the data</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="sums-import.html"><a href="sums-import.html#glimpse-the-data-1"><i class="fa fa-check"></i><b>5.6.1</b> Glimpse the data</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="sums-import.html"><a href="sums-import.html#checking-datatypes"><i class="fa fa-check"></i><b>5.7</b> Checking datatypes</a></li>
<li class="chapter" data-level="5.8" data-path="sums-import.html"><a href="sums-import.html#remove-unnecessary-columns"><i class="fa fa-check"></i><b>5.8</b> Remove unnecessary columns</a></li>
<li class="chapter" data-level="5.9" data-path="sums-import.html"><a href="sums-import.html#create-a-total_value-column"><i class="fa fa-check"></i><b>5.9</b> Create a total_value column</a></li>
<li class="chapter" data-level="5.10" data-path="sums-import.html"><a href="sums-import.html#controlled-vs.-non-controlled"><i class="fa fa-check"></i><b>5.10</b> Controlled vs. non-controlled</a>
<ul>
<li class="chapter" data-level="5.10.1" data-path="sums-import.html"><a href="sums-import.html#categorization-logic-with-case_when"><i class="fa fa-check"></i><b>5.10.1</b> Categorization logic with case_when()</a></li>
</ul></li>
<li class="chapter" data-level="5.11" data-path="sums-import.html"><a href="sums-import.html#filtering-our-data"><i class="fa fa-check"></i><b>5.11</b> Filtering our data</a>
<ul>
<li class="chapter" data-level="5.11.1" data-path="sums-import.html"><a href="sums-import.html#apply-the-tx-filter"><i class="fa fa-check"></i><b>5.11.1</b> Apply the TX filter</a></li>
<li class="chapter" data-level="5.11.2" data-path="sums-import.html"><a href="sums-import.html#add-the-date-filter"><i class="fa fa-check"></i><b>5.11.2</b> Add the date filter</a></li>
<li class="chapter" data-level="5.11.3" data-path="sums-import.html"><a href="sums-import.html#checking-the-results-with-summary"><i class="fa fa-check"></i><b>5.11.3</b> Checking the results with summary()</a></li>
</ul></li>
<li class="chapter" data-level="5.12" data-path="sums-import.html"><a href="sums-import.html#export-cleaned-data"><i class="fa fa-check"></i><b>5.12</b> Export cleaned data</a></li>
<li class="chapter" data-level="5.13" data-path="sums-import.html"><a href="sums-import.html#things-we-learned-in-this-lesson"><i class="fa fa-check"></i><b>5.13</b> Things we learned in this lesson</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="sums-analyze.html"><a href="sums-analyze.html"><i class="fa fa-check"></i><b>6</b> Summarize with math - analysis</a>
<ul>
<li class="chapter" data-level="6.1" data-path="sums-analyze.html"><a href="sums-analyze.html#learning-goals-of-this-lesson-1"><i class="fa fa-check"></i><b>6.1</b> Learning goals of this lesson</a></li>
<li class="chapter" data-level="6.2" data-path="sums-analyze.html"><a href="sums-analyze.html#questions-to-answer"><i class="fa fa-check"></i><b>6.2</b> Questions to answer</a></li>
<li class="chapter" data-level="6.3" data-path="sums-analyze.html"><a href="sums-analyze.html#set-up-the-analysis-notebook"><i class="fa fa-check"></i><b>6.3</b> Set up the analysis notebook</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="sums-analyze.html"><a href="sums-analyze.html#load-the-data-into-a-tibble"><i class="fa fa-check"></i><b>6.3.1</b> Load the data into a tibble</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="sums-analyze.html"><a href="sums-analyze.html#filter-for-controlled-items"><i class="fa fa-check"></i><b>6.4</b> Filter for controlled items</a></li>
<li class="chapter" data-level="6.5" data-path="sums-analyze.html"><a href="sums-analyze.html#building-summaries-with-math"><i class="fa fa-check"></i><b>6.5</b> Building summaries with math</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="sums-analyze.html"><a href="sums-analyze.html#summarize-across-the-data"><i class="fa fa-check"></i><b>6.5.1</b> Summarize across the data</a></li>
<li class="chapter" data-level="6.5.2" data-path="sums-analyze.html"><a href="sums-analyze.html#na-values-in-a-sum-mean-and-median"><i class="fa fa-check"></i><b>6.5.2</b> NA values in a sum, mean and median</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="sums-analyze.html"><a href="sums-analyze.html#totals-by-agency"><i class="fa fa-check"></i><b>6.6</b> Totals by agency</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="sums-analyze.html"><a href="sums-analyze.html#group_by-then-summary-with-math"><i class="fa fa-check"></i><b>6.6.1</b> Group_by, then summary with math</a></li>
<li class="chapter" data-level="6.6.2" data-path="sums-analyze.html"><a href="sums-analyze.html#add-the-total_value"><i class="fa fa-check"></i><b>6.6.2</b> Add the total_value</a></li>
<li class="chapter" data-level="6.6.3" data-path="sums-analyze.html"><a href="sums-analyze.html#arrange-the-results-1"><i class="fa fa-check"></i><b>6.6.3</b> Arrange the results</a></li>
<li class="chapter" data-level="6.6.4" data-path="sums-analyze.html"><a href="sums-analyze.html#consider-the-results"><i class="fa fa-check"></i><b>6.6.4</b> Consider the results</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="sums-analyze.html"><a href="sums-analyze.html#looking-a-local-agencies"><i class="fa fa-check"></i><b>6.7</b> Looking a local agencies</a>
<ul>
<li class="chapter" data-level="6.7.1" data-path="sums-analyze.html"><a href="sums-analyze.html#save-our-by-agency-list"><i class="fa fa-check"></i><b>6.7.1</b> Save our “by agency” list</a></li>
<li class="chapter" data-level="6.7.2" data-path="sums-analyze.html"><a href="sums-analyze.html#filtering-within-a-vector"><i class="fa fa-check"></i><b>6.7.2</b> Filtering within a vector</a></li>
<li class="chapter" data-level="6.7.3" data-path="sums-analyze.html"><a href="sums-analyze.html#create-a-vector-to-build-this-filter"><i class="fa fa-check"></i><b>6.7.3</b> Create a vector to build this filter</a></li>
</ul></li>
<li class="chapter" data-level="6.8" data-path="sums-analyze.html"><a href="sums-analyze.html#types-of-items-shipped-to-each-agency"><i class="fa fa-check"></i><b>6.8</b> Types of items shipped to each agency</a>
<ul>
<li class="chapter" data-level="6.8.1" data-path="sums-analyze.html"><a href="sums-analyze.html#items-for-local-agencies"><i class="fa fa-check"></i><b>6.8.1</b> Items for local agencies</a></li>
<li class="chapter" data-level="6.8.2" data-path="sums-analyze.html"><a href="sums-analyze.html#research-some-interesting-items"><i class="fa fa-check"></i><b>6.8.2</b> Research some interesting items</a></li>
</ul></li>
<li class="chapter" data-level="6.9" data-path="sums-analyze.html"><a href="sums-analyze.html#write-a-data-drop"><i class="fa fa-check"></i><b>6.9</b> Write a data drop</a></li>
<li class="chapter" data-level="6.10" data-path="sums-analyze.html"><a href="sums-analyze.html#what-we-learned-in-this-chapter"><i class="fa fa-check"></i><b>6.10</b> What we learned in this chapter</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="ggplot-intro.html"><a href="ggplot-intro.html"><i class="fa fa-check"></i><b>7</b> Data Viz - Intro to ggplot</a>
<ul>
<li class="chapter" data-level="7.1" data-path="ggplot-intro.html"><a href="ggplot-intro.html#goals-for-this-section"><i class="fa fa-check"></i><b>7.1</b> Goals for this section</a></li>
<li class="chapter" data-level="7.2" data-path="ggplot-intro.html"><a href="ggplot-intro.html#introduction-to-ggplot"><i class="fa fa-check"></i><b>7.2</b> Introduction to ggplot</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="ggplot-intro.html"><a href="ggplot-intro.html#what-i-likedislike-about-ggplot"><i class="fa fa-check"></i><b>7.2.1</b> What I like/dislike about ggplot</a></li>
<li class="chapter" data-level="7.2.2" data-path="ggplot-intro.html"><a href="ggplot-intro.html#the-grammar-of-graphics"><i class="fa fa-check"></i><b>7.2.2</b> The Grammar of Graphics</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="ggplot-intro.html"><a href="ggplot-intro.html#start-a-new-project"><i class="fa fa-check"></i><b>7.3</b> Start a new project</a></li>
<li class="chapter" data-level="7.4" data-path="ggplot-intro.html"><a href="ggplot-intro.html#the-layers-of-ggplot"><i class="fa fa-check"></i><b>7.4</b> The layers of ggplot</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="ggplot-intro.html"><a href="ggplot-intro.html#build-the-base-layer"><i class="fa fa-check"></i><b>7.4.1</b> Build the base layer</a></li>
<li class="chapter" data-level="7.4.2" data-path="ggplot-intro.html"><a href="ggplot-intro.html#layers-can-we-add-to-our-plots"><i class="fa fa-check"></i><b>7.4.2</b> Layers can we add to our plots</a></li>
<li class="chapter" data-level="7.4.3" data-path="ggplot-intro.html"><a href="ggplot-intro.html#add-geom_point"><i class="fa fa-check"></i><b>7.4.3</b> Add geom_point</a></li>
<li class="chapter" data-level="7.4.4" data-path="ggplot-intro.html"><a href="ggplot-intro.html#adding-other-mappings"><i class="fa fa-check"></i><b>7.4.4</b> Adding other mappings</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="ggplot-intro.html"><a href="ggplot-intro.html#lets-build-a-bar-chart"><i class="fa fa-check"></i><b>7.5</b> Let’s build a bar chart</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="ggplot-intro.html"><a href="ggplot-intro.html#prepare-the-data"><i class="fa fa-check"></i><b>7.5.1</b> Prepare the data</a></li>
<li class="chapter" data-level="7.5.2" data-path="ggplot-intro.html"><a href="ggplot-intro.html#build-our-plot-with-geom_col"><i class="fa fa-check"></i><b>7.5.2</b> Build our plot with geom_col</a></li>
<li class="chapter" data-level="7.5.3" data-path="ggplot-intro.html"><a href="ggplot-intro.html#add-the-geom_col-layer"><i class="fa fa-check"></i><b>7.5.3</b> Add the geom_col layer</a></li>
<li class="chapter" data-level="7.5.4" data-path="ggplot-intro.html"><a href="ggplot-intro.html#flip-the-axes"><i class="fa fa-check"></i><b>7.5.4</b> Flip the axes</a></li>
<li class="chapter" data-level="7.5.5" data-path="ggplot-intro.html"><a href="ggplot-intro.html#reorder-the-bars"><i class="fa fa-check"></i><b>7.5.5</b> Reorder the bars</a></li>
<li class="chapter" data-level="7.5.6" data-path="ggplot-intro.html"><a href="ggplot-intro.html#adding-a-geom_text-layer"><i class="fa fa-check"></i><b>7.5.6</b> Adding a geom_text layer</a></li>
<li class="chapter" data-level="7.5.7" data-path="ggplot-intro.html"><a href="ggplot-intro.html#add-some-titles-and-more-labels"><i class="fa fa-check"></i><b>7.5.7</b> Add some titles and more labels</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="ggplot-intro.html"><a href="ggplot-intro.html#on-your-own-ice-cream"><i class="fa fa-check"></i><b>7.6</b> On your own: Ice cream!</a></li>
<li class="chapter" data-level="7.7" data-path="ggplot-intro.html"><a href="ggplot-intro.html#what-weve-learned"><i class="fa fa-check"></i><b>7.7</b> What we’ve learned</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="ggplot-more.html"><a href="ggplot-more.html"><i class="fa fa-check"></i><b>8</b> Deeper into ggplot</a>
<ul>
<li class="chapter" data-level="8.1" data-path="ggplot-more.html"><a href="ggplot-more.html#references"><i class="fa fa-check"></i><b>8.1</b> References</a></li>
<li class="chapter" data-level="8.2" data-path="ggplot-more.html"><a href="ggplot-more.html#learning-goals-for-this-chapter"><i class="fa fa-check"></i><b>8.2</b> Learning goals for this chapter</a></li>
<li class="chapter" data-level="8.3" data-path="ggplot-more.html"><a href="ggplot-more.html#set-up-your-notebook"><i class="fa fa-check"></i><b>8.3</b> Set up your notebook</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="ggplot-more.html"><a href="ggplot-more.html#lets-get-the-data"><i class="fa fa-check"></i><b>8.3.1</b> Let’s get the data</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="ggplot-more.html"><a href="ggplot-more.html#wrangle-the-data"><i class="fa fa-check"></i><b>8.4</b> Wrangle the data</a></li>
<li class="chapter" data-level="8.5" data-path="ggplot-more.html"><a href="ggplot-more.html#make-a-line-chart-of-the-texas-data"><i class="fa fa-check"></i><b>8.5</b> Make a line chart of the Texas data</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="ggplot-more.html"><a href="ggplot-more.html#plot-the-chart"><i class="fa fa-check"></i><b>8.5.1</b> Plot the chart</a></li>
<li class="chapter" data-level="8.5.2" data-path="ggplot-more.html"><a href="ggplot-more.html#cleaning-up"><i class="fa fa-check"></i><b>8.5.2</b> Cleaning Up</a></li>
<li class="chapter" data-level="8.5.3" data-path="ggplot-more.html"><a href="ggplot-more.html#saving-plots-as-an-object"><i class="fa fa-check"></i><b>8.5.3</b> Saving plots as an object</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="ggplot-more.html"><a href="ggplot-more.html#themes"><i class="fa fa-check"></i><b>8.6</b> Themes</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="ggplot-more.html"><a href="ggplot-more.html#more-with-ggthemes"><i class="fa fa-check"></i><b>8.6.1</b> More with ggthemes</a></li>
<li class="chapter" data-level="8.6.2" data-path="ggplot-more.html"><a href="ggplot-more.html#there-is-more-to-themes"><i class="fa fa-check"></i><b>8.6.2</b> There is more to themes</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="ggplot-more.html"><a href="ggplot-more.html#adding-more-information"><i class="fa fa-check"></i><b>8.7</b> Adding more information</a>
<ul>
<li class="chapter" data-level="8.7.1" data-path="ggplot-more.html"><a href="ggplot-more.html#prepare-the-data-1"><i class="fa fa-check"></i><b>8.7.1</b> Prepare the data</a></li>
<li class="chapter" data-level="8.7.2" data-path="ggplot-more.html"><a href="ggplot-more.html#plot-multiple-line-chart"><i class="fa fa-check"></i><b>8.7.2</b> Plot multiple line chart</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="ggplot-more.html"><a href="ggplot-more.html#on-your-own-line-chart"><i class="fa fa-check"></i><b>8.8</b> On your own: Line chart</a></li>
<li class="chapter" data-level="8.9" data-path="ggplot-more.html"><a href="ggplot-more.html#tour-of-some-other-adjustments"><i class="fa fa-check"></i><b>8.9</b> Tour of some other adjustments</a>
<ul>
<li class="chapter" data-level="8.9.1" data-path="ggplot-more.html"><a href="ggplot-more.html#line-width"><i class="fa fa-check"></i><b>8.9.1</b> Line width</a></li>
<li class="chapter" data-level="8.9.2" data-path="ggplot-more.html"><a href="ggplot-more.html#line-type"><i class="fa fa-check"></i><b>8.9.2</b> Line type</a></li>
<li class="chapter" data-level="8.9.3" data-path="ggplot-more.html"><a href="ggplot-more.html#adjust-axis"><i class="fa fa-check"></i><b>8.9.3</b> Adjust axis</a></li>
</ul></li>
<li class="chapter" data-level="8.10" data-path="ggplot-more.html"><a href="ggplot-more.html#facets"><i class="fa fa-check"></i><b>8.10</b> Facets</a>
<ul>
<li class="chapter" data-level="8.10.1" data-path="ggplot-more.html"><a href="ggplot-more.html#facet-wrap"><i class="fa fa-check"></i><b>8.10.1</b> Facet wrap</a></li>
<li class="chapter" data-level="8.10.2" data-path="ggplot-more.html"><a href="ggplot-more.html#facet-grids"><i class="fa fa-check"></i><b>8.10.2</b> Facet grids</a></li>
</ul></li>
<li class="chapter" data-level="8.11" data-path="ggplot-more.html"><a href="ggplot-more.html#on-your-own-facet-wrap"><i class="fa fa-check"></i><b>8.11</b> On your own: Facet wrap</a></li>
<li class="chapter" data-level="8.12" data-path="ggplot-more.html"><a href="ggplot-more.html#saving-plots"><i class="fa fa-check"></i><b>8.12</b> Saving plots</a></li>
<li class="chapter" data-level="8.13" data-path="ggplot-more.html"><a href="ggplot-more.html#interactive-plots"><i class="fa fa-check"></i><b>8.13</b> Interactive plots</a></li>
<li class="chapter" data-level="8.14" data-path="ggplot-more.html"><a href="ggplot-more.html#what-we-learned"><i class="fa fa-check"></i><b>8.14</b> What we learned</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="tidy-data.html"><a href="tidy-data.html"><i class="fa fa-check"></i><b>9</b> Tidy data</a>
<ul>
<li class="chapter" data-level="9.1" data-path="tidy-data.html"><a href="tidy-data.html#goals-for-this-section-1"><i class="fa fa-check"></i><b>9.1</b> Goals for this section</a></li>
<li class="chapter" data-level="9.2" data-path="tidy-data.html"><a href="tidy-data.html#the-questions-well-answer-1"><i class="fa fa-check"></i><b>9.2</b> The questions we’ll answer</a></li>
<li class="chapter" data-level="9.3" data-path="tidy-data.html"><a href="tidy-data.html#what-is-tidy-data"><i class="fa fa-check"></i><b>9.3</b> What is tidy data</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="tidy-data.html"><a href="tidy-data.html#wide-vs-long-data"><i class="fa fa-check"></i><b>9.3.1</b> Wide vs long data</a></li>
<li class="chapter" data-level="9.3.2" data-path="tidy-data.html"><a href="tidy-data.html#why-we-might-want-different-shaped-data"><i class="fa fa-check"></i><b>9.3.2</b> Why we might want different shaped data</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="tidy-data.html"><a href="tidy-data.html#prepare-our-candy-project"><i class="fa fa-check"></i><b>9.4</b> Prepare our candy project</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="tidy-data.html"><a href="tidy-data.html#get-the-data"><i class="fa fa-check"></i><b>9.4.1</b> Get the data</a></li>
<li class="chapter" data-level="9.4.2" data-path="tidy-data.html"><a href="tidy-data.html#drop-unneeded-columns"><i class="fa fa-check"></i><b>9.4.2</b> Drop unneeded columns</a></li>
<li class="chapter" data-level="9.4.3" data-path="tidy-data.html"><a href="tidy-data.html#peek-at-the-wide-table"><i class="fa fa-check"></i><b>9.4.3</b> Peek at the wide table</a></li>
<li class="chapter" data-level="9.4.4" data-path="tidy-data.html"><a href="tidy-data.html#where-are-we-going-with-this-data"><i class="fa fa-check"></i><b>9.4.4</b> Where are we going with this data</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="tidy-data.html"><a href="tidy-data.html#the-tidyr-verbs"><i class="fa fa-check"></i><b>9.5</b> The tidyr verbs</a></li>
<li class="chapter" data-level="9.6" data-path="tidy-data.html"><a href="tidy-data.html#pivot-longer"><i class="fa fa-check"></i><b>9.6</b> Pivot longer</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="tidy-data.html"><a href="tidy-data.html#pivot-our-candy-data-longer"><i class="fa fa-check"></i><b>9.6.1</b> Pivot our candy data longer</a></li>
<li class="chapter" data-level="9.6.2" data-path="tidy-data.html"><a href="tidy-data.html#get-average-candies-per-color"><i class="fa fa-check"></i><b>9.6.2</b> Get average candies per color</a></li>
<li class="chapter" data-level="9.6.3" data-path="tidy-data.html"><a href="tidy-data.html#round-the-averages"><i class="fa fa-check"></i><b>9.6.3</b> Round the averages</a></li>
<li class="chapter" data-level="9.6.4" data-path="tidy-data.html"><a href="tidy-data.html#on-your-own-plot-the-averages"><i class="fa fa-check"></i><b>9.6.4</b> On your own: Plot the averages</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="tidy-data.html"><a href="tidy-data.html#introducing-datawrapper"><i class="fa fa-check"></i><b>9.7</b> Introducing Datawrapper</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="tidy-data.html"><a href="tidy-data.html#review-how-to-make-a-bar-chart"><i class="fa fa-check"></i><b>9.7.1</b> Review how to make a bar chart</a></li>
<li class="chapter" data-level="9.7.2" data-path="tidy-data.html"><a href="tidy-data.html#start-a-chart"><i class="fa fa-check"></i><b>9.7.2</b> Start a chart</a></li>
<li class="chapter" data-level="9.7.3" data-path="tidy-data.html"><a href="tidy-data.html#get-your-candies-data"><i class="fa fa-check"></i><b>9.7.3</b> Get your candies data</a></li>
<li class="chapter" data-level="9.7.4" data-path="tidy-data.html"><a href="tidy-data.html#build-the-datawrapper-graphic"><i class="fa fa-check"></i><b>9.7.4</b> Build the datawrapper graphic</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="tidy-data.html"><a href="tidy-data.html#pivot-wider"><i class="fa fa-check"></i><b>9.8</b> Pivot wider</a>
<ul>
<li class="chapter" data-level="9.8.1" data-path="tidy-data.html"><a href="tidy-data.html#pivot-wider-on-your-own"><i class="fa fa-check"></i><b>9.8.1</b> Pivot wider on your own</a></li>
</ul></li>
<li class="chapter" data-level="9.9" data-path="tidy-data.html"><a href="tidy-data.html#bonus-questions"><i class="fa fa-check"></i><b>9.9</b> Bonus questions</a>
<ul>
<li class="chapter" data-level="9.9.1" data-path="tidy-data.html"><a href="tidy-data.html#mostleast-candies"><i class="fa fa-check"></i><b>9.9.1</b> Most/least candies</a></li>
<li class="chapter" data-level="9.9.2" data-path="tidy-data.html"><a href="tidy-data.html#average-total-candies-in-a-bag"><i class="fa fa-check"></i><b>9.9.2</b> Average total candies in a bag</a></li>
</ul></li>
<li class="chapter" data-level="9.10" data-path="tidy-data.html"><a href="tidy-data.html#turn-in-your-work"><i class="fa fa-check"></i><b>9.10</b> Turn in your work</a></li>
<li class="chapter" data-level="9.11" data-path="tidy-data.html"><a href="tidy-data.html#what-we-learned-1"><i class="fa fa-check"></i><b>9.11</b> What we learned</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="bind-join.html"><a href="bind-join.html"><i class="fa fa-check"></i><b>10</b> Bind and join</a>
<ul>
<li class="chapter" data-level="10.1" data-path="bind-join.html"><a href="bind-join.html#goals-of-the-chapter"><i class="fa fa-check"></i><b>10.1</b> Goals of the chapter</a></li>
<li class="chapter" data-level="10.2" data-path="bind-join.html"><a href="bind-join.html#the-story-an-update-to-denied"><i class="fa fa-check"></i><b>10.2</b> The story: An update to Denied</a></li>
<li class="chapter" data-level="10.3" data-path="bind-join.html"><a href="bind-join.html#about-the-data-1"><i class="fa fa-check"></i><b>10.3</b> About the data</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="bind-join.html"><a href="bind-join.html#set-up-your-project"><i class="fa fa-check"></i><b>10.3.1</b> Set up your project</a></li>
<li class="chapter" data-level="10.3.2" data-path="bind-join.html"><a href="bind-join.html#open-read-and-run"><i class="fa fa-check"></i><b>10.3.2</b> Open, read and run</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="bind-join.html"><a href="bind-join.html#merging-data-together"><i class="fa fa-check"></i><b>10.4</b> Merging data together</a></li>
<li class="chapter" data-level="10.5" data-path="bind-join.html"><a href="bind-join.html#about-joins"><i class="fa fa-check"></i><b>10.5</b> About joins</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="bind-join.html"><a href="bind-join.html#joining-our-reference-table"><i class="fa fa-check"></i><b>10.5.1</b> Joining our reference table</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="bind-join.html"><a href="bind-join.html#some-cleanup-filter-and-select"><i class="fa fa-check"></i><b>10.6</b> Some cleanup: filter and select</a></li>
<li class="chapter" data-level="10.7" data-path="bind-join.html"><a href="bind-join.html#create-an-audit-benchmark-column"><i class="fa fa-check"></i><b>10.7</b> Create an audit benchmark column</a></li>
<li class="chapter" data-level="10.8" data-path="bind-join.html"><a href="bind-join.html#export-the-data"><i class="fa fa-check"></i><b>10.8</b> Export the data</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="answers.html"><a href="answers.html"><i class="fa fa-check"></i><b>11</b> Plotting for answers</a>
<ul>
<li class="chapter" data-level="11.1" data-path="answers.html"><a href="answers.html#goals-of-this-chapter"><i class="fa fa-check"></i><b>11.1</b> Goals of this chapter</a></li>
<li class="chapter" data-level="11.2" data-path="answers.html"><a href="answers.html#project-setup"><i class="fa fa-check"></i><b>11.2</b> Project setup</a></li>
<li class="chapter" data-level="11.3" data-path="answers.html"><a href="answers.html#import-cleaned-data"><i class="fa fa-check"></i><b>11.3</b> Import cleaned data</a></li>
<li class="chapter" data-level="11.4" data-path="answers.html"><a href="answers.html#make-a-searchable-table"><i class="fa fa-check"></i><b>11.4</b> Make a searchable table</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="answers.html"><a href="answers.html#pivot-wider-1"><i class="fa fa-check"></i><b>11.4.1</b> Pivot wider</a></li>
<li class="chapter" data-level="11.4.2" data-path="answers.html"><a href="answers.html#make-a-datatable"><i class="fa fa-check"></i><b>11.4.2</b> Make a datatable</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="answers.html"><a href="answers.html#choosing-a-chart-to-display-data"><i class="fa fa-check"></i><b>11.5</b> Choosing a chart to display data</a></li>
<li class="chapter" data-level="11.6" data-path="answers.html"><a href="answers.html#plot-yearly-student-percentage"><i class="fa fa-check"></i><b>11.6</b> Plot yearly student percentage</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="answers.html"><a href="answers.html#build-the-statewide-percentage-by-year-data"><i class="fa fa-check"></i><b>11.6.1</b> Build the statewide percentage by year data</a></li>
<li class="chapter" data-level="11.6.2" data-path="answers.html"><a href="answers.html#build-the-statewide-percentage-chart"><i class="fa fa-check"></i><b>11.6.2</b> Build the statewide percentage chart</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="answers.html"><a href="answers.html#districts-by-benchmark-and-year"><i class="fa fa-check"></i><b>11.7</b> Districts by benchmark and year</a>
<ul>
<li class="chapter" data-level="11.7.1" data-path="answers.html"><a href="answers.html#build-the-audit-flag-data"><i class="fa fa-check"></i><b>11.7.1</b> Build the audit flag data</a></li>
<li class="chapter" data-level="11.7.2" data-path="answers.html"><a href="answers.html#build-the-audit-flag-chart"><i class="fa fa-check"></i><b>11.7.2</b> Build the audit flag chart</a></li>
<li class="chapter" data-level="11.7.3" data-path="answers.html"><a href="answers.html#which-chart-is-best"><i class="fa fa-check"></i><b>11.7.3</b> Which chart is best?</a></li>
</ul></li>
<li class="chapter" data-level="11.8" data-path="answers.html"><a href="answers.html#local-districts"><i class="fa fa-check"></i><b>11.8</b> Local districts</a></li>
<li class="chapter" data-level="11.9" data-path="answers.html"><a href="answers.html#the-assignments"><i class="fa fa-check"></i><b>11.9</b> The assignments</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="group-dates.html"><a href="group-dates.html"><i class="fa fa-check"></i><b>12</b> Grouping by dates</a>
<ul>
<li class="chapter" data-level="12.1" data-path="group-dates.html"><a href="group-dates.html#setting-up"><i class="fa fa-check"></i><b>12.1</b> Setting up</a></li>
<li class="chapter" data-level="12.2" data-path="group-dates.html"><a href="group-dates.html#plucking-date-parts"><i class="fa fa-check"></i><b>12.2</b> Plucking date parts</a></li>
<li class="chapter" data-level="12.3" data-path="group-dates.html"><a href="group-dates.html#grouping-by-a-date-part-on-the-fly"><i class="fa fa-check"></i><b>12.3</b> Grouping by a date part on the fly</a></li>
<li class="chapter" data-level="12.4" data-path="group-dates.html"><a href="group-dates.html#making-reusable-date-parts"><i class="fa fa-check"></i><b>12.4</b> Making reusable date parts</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="group-dates.html"><a href="group-dates.html#lets-make-a-year"><i class="fa fa-check"></i><b>12.4.1</b> Let’s make a year</a></li>
<li class="chapter" data-level="12.4.2" data-path="group-dates.html"><a href="group-dates.html#the-magical-month"><i class="fa fa-check"></i><b>12.4.2</b> The magical month</a></li>
<li class="chapter" data-level="12.4.3" data-path="group-dates.html"><a href="group-dates.html#floor-dates"><i class="fa fa-check"></i><b>12.4.3</b> Floor dates</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>13</b> R Functions</a>
<ul>
<li class="chapter" data-level="13.1" data-path="functions.html"><a href="functions.html#importexport"><i class="fa fa-check"></i><b>13.1</b> Import/Export</a></li>
<li class="chapter" data-level="13.2" data-path="functions.html"><a href="functions.html#data-manipulation"><i class="fa fa-check"></i><b>13.2</b> Data manipulation</a></li>
<li class="chapter" data-level="13.3" data-path="functions.html"><a href="functions.html#aggregation"><i class="fa fa-check"></i><b>13.3</b> Aggregation</a></li>
<li class="chapter" data-level="13.4" data-path="functions.html"><a href="functions.html#math"><i class="fa fa-check"></i><b>13.4</b> Math</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="troubleshooting.html"><a href="troubleshooting.html"><i class="fa fa-check"></i><b>14</b> Troubleshooting</a>
<ul>
<li class="chapter" data-level="14.1" data-path="troubleshooting.html"><a href="troubleshooting.html#when-things-break"><i class="fa fa-check"></i><b>14.1</b> When things break</a></li>
<li class="chapter" data-level="14.2" data-path="troubleshooting.html"><a href="troubleshooting.html#learning-how-things-work"><i class="fa fa-check"></i><b>14.2</b> Learning how things work</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="troubleshooting.html"><a href="troubleshooting.html#help-docs"><i class="fa fa-check"></i><b>14.2.1</b> Help docs</a></li>
<li class="chapter" data-level="14.2.2" data-path="troubleshooting.html"><a href="troubleshooting.html#good-googling"><i class="fa fa-check"></i><b>14.2.2</b> Good Googling</a></li>
<li class="chapter" data-level="14.2.3" data-path="troubleshooting.html"><a href="troubleshooting.html#tidyverse-docs-and-cheatsheets"><i class="fa fa-check"></i><b>14.2.3</b> Tidyverse docs and cheatsheets</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="troubleshooting.html"><a href="troubleshooting.html#r-frequently-asked-questions"><i class="fa fa-check"></i><b>14.3</b> R Frequently asked Questions</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="troubleshooting.html"><a href="troubleshooting.html#functions-objects-and-variables"><i class="fa fa-check"></i><b>14.3.1</b> Functions, objects and variables</a></li>
<li class="chapter" data-level="14.3.2" data-path="troubleshooting.html"><a href="troubleshooting.html#some-r-code-basics"><i class="fa fa-check"></i><b>14.3.2</b> Some R code basics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="explore.html"><a href="explore.html"><i class="fa fa-check"></i><b>15</b> How to interview a new dataset</a>
<ul>
<li class="chapter" data-level="15.1" data-path="explore.html"><a href="explore.html#start-by-listing-questions"><i class="fa fa-check"></i><b>15.1</b> Start by listing questions</a></li>
<li class="chapter" data-level="15.2" data-path="explore.html"><a href="explore.html#understand-your-data"><i class="fa fa-check"></i><b>15.2</b> Understand your data</a></li>
<li class="chapter" data-level="15.3" data-path="explore.html"><a href="explore.html#pay-attention-to-the-shape-of-your-data"><i class="fa fa-check"></i><b>15.3</b> Pay attention to the shape of your data</a></li>
<li class="chapter" data-level="15.4" data-path="explore.html"><a href="explore.html#counting-and-aggregation"><i class="fa fa-check"></i><b>15.4</b> Counting and aggregation</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="explore.html"><a href="explore.html#counting-rows-based-on-a-column"><i class="fa fa-check"></i><b>15.4.1</b> Counting rows based on a column</a></li>
<li class="chapter" data-level="15.4.2" data-path="explore.html"><a href="explore.html#sum-mean-and-other-aggregations"><i class="fa fa-check"></i><b>15.4.2</b> Sum, mean and other aggregations</a></li>
<li class="chapter" data-level="15.4.3" data-path="explore.html"><a href="explore.html#creating-columns-to-show-difference"><i class="fa fa-check"></i><b>15.4.3</b> Creating columns to show difference</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="explore.html"><a href="explore.html#cleaning-up-categorical-data"><i class="fa fa-check"></i><b>15.5</b> Cleaning up categorical data</a></li>
<li class="chapter" data-level="15.6" data-path="explore.html"><a href="explore.html#time-as-a-variable"><i class="fa fa-check"></i><b>15.6</b> Time as a variable</a></li>
<li class="chapter" data-level="15.7" data-path="explore.html"><a href="explore.html#explore-the-distributions-in-your-data"><i class="fa fa-check"></i><b>15.7</b> Explore the distributions in your data</a>
<ul>
<li class="chapter" data-level="15.7.1" data-path="explore.html"><a href="explore.html#more-on-histograms"><i class="fa fa-check"></i><b>15.7.1</b> More on histograms</a></li>
</ul></li>
<li class="chapter" data-level="15.8" data-path="explore.html"><a href="explore.html#same-ideas-using-spreadsheets"><i class="fa fa-check"></i><b>15.8</b> Same ideas using spreadsheets</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="charts.html"><a href="charts.html"><i class="fa fa-check"></i><b>16</b> Chart production tips</a>
<ul>
<li class="chapter" data-level="16.1" data-path="charts.html"><a href="charts.html#titles-descriptions-and-annotations"><i class="fa fa-check"></i><b>16.1</b> Titles, descriptions and annotations</a></li>
<li class="chapter" data-level="16.2" data-path="charts.html"><a href="charts.html#other-considerations"><i class="fa fa-check"></i><b>16.2</b> Other considerations</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Reporting with Data in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="count-analysis" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Chapter 4</span> Summarize with count - analysis<a href="count-analysis.html#count-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This chapter is by Prof. McDonald and keyboard commands and screenshots are from macOS.</p>
<p>This chapter continues the Billboard Hot 100 project. In the previous chapter we downloaded, imported and cleaned the data. We’ll be working in the same project.</p>
<div id="goals-of-this-lesson" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Goals of this lesson<a href="count-analysis.html#goals-of-this-lesson" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>To use the group_by/summarize/arrange combination to count rows of data.</li>
<li>To use filter in two ways: to focus data before summarizing, and to logically end summarized lists.</li>
<li>We’ll also cover some more complex filters using and/or logic.</li>
<li>Introduce the shortcut <code>count()</code> function</li>
</ul>
<blockquote>
<p>OF NOTE: I updated the data used in this book so some written word references to code results <em>might</em> be different than the actual data in the book or what you get on your computer. I’ve tried to catch them all, but I’m a fallible human.</p>
</blockquote>
</div>
<div id="the-questions-well-answer" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> The questions we’ll answer<a href="count-analysis.html#the-questions-well-answer" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now that we have the Billboard Hot 100 charts data in our project it’s time to find the answers to the following questions:</p>
<ul>
<li>Which performer had the most appearances on the Hot 100 chart at any position?</li>
<li>Which title/performer combination has been on the charts the most number of weeks at any position?</li>
<li>Which title/performer combination was No. 1 for the most number of weeks?</li>
<li>Which performer had the most songs reach No. 1?</li>
<li>Which performer had the most songs reach No. 1 in the most recent five years?</li>
<li>How many appearances for a specific performer in each year?</li>
<li>Which performer had the most Top 10 hits overall?</li>
</ul>
<blockquote>
<p>What are your guesses for the questions above? NO PEEKING!</p>
</blockquote>
<p>In each case we’ll talk over the logic of finding the answer and the code to accomplish it.</p>
<p>Before we can get into the analysis, we want to set up a new notebook to separate our cleaning from our analysis.</p>
</div>
<div id="setting-up-an-analysis-notebook" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Setting up an analysis notebook<a href="count-analysis.html#setting-up-an-analysis-notebook" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>At the end of the last notebook we exported our clean data as an <code>.rds</code> file. We’ll now create a new notebook and import that data. It will be much easier this time.</p>
<ol style="list-style-type: decimal">
<li>If you don’t already have it open, go ahead and open your Billboard project.</li>
<li>If your import notebook is still open, go ahead and close it.</li>
<li>Use the <code>+</code> menu to start a new <strong>R Notebook</strong>.</li>
<li>Update the title as “Billboard analysis” and then remove all the boilerplate text below the YAML metadata.</li>
<li>Save the file as <code>02-analysis.Rmd</code> in your project folder.</li>
<li>Check your Environment tab (top right) and make sure the environment is empty. We don’t want to have any leftover data. If there is, then go under the <strong>Run</strong> menu and choose <strong>Restart R and Clear Output</strong>.</li>
</ol>
<p>Since we are starting a new notebook, we need to set up a few things. First up we want to list our goals.</p>
<ol style="list-style-type: decimal">
<li>Add a headline and text describing the goals of this notebook. You are exploring the Billboard Hot 100 charts data.</li>
<li>Go ahead and copy all the questions we outlined above into your notebook.</li>
<li>Format those questions as a nice list. Start each line with a <code>-</code> or <code>*</code> followed by a space. There should be a blank line above and below the entire LIST but not between the items. List tiems should be on sequential lines … and it is the only markdown item like that.</li>
<li>Now add a another headline (two hashes) called Setup.</li>
<li>Add a chunk, also name it “setup” and add the tidyverse and lubridate libraries.</li>
<li>Run the chunk to load the library.</li>
</ol>
<div id="import-the-cleaned-data" class="section level3 hasAnchor" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Import the cleaned data<a href="count-analysis.html#import-the-cleaned-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We need to import the data that we cleaned and exported in the last notebook. It’s just a couple of lines of code and you could write them all out and run it, but here is where I tell you for the first of a 1,000 times:</p>
<p><strong>WRITE ONE LINE OF CODE. RUN IT. CHECK THE RESULTS. REPEAT.</strong></p>
<p>Yes, sometimes for the sake of brevity I will give you multiple lines of code at once, but to understand what is actually going on you should add and run that code one line at a time.</p>
<p>We’ll painstakingly walk through that process here to belabor the point. Here are our goals for this bit:</p>
<ul>
<li>Document that we are importing clean data</li>
<li>Import our cleaned data</li>
<li>Fill an R object with that data</li>
<li>Glimpse the R Object so we can check it</li>
</ul>
<p>I want you to:</p>
<ol style="list-style-type: decimal">
<li>Start a Markdown section with a headline noting you are importing the cleaned data. Add any other text notes you might need for yourself.</li>
<li>Add a code chunk and name it “import”.</li>
<li>In your code chunk, add this line of code:</li>
</ol>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="count-analysis.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_rds</span>(<span class="st">&quot;data-processed/01-hot100.rds&quot;</span>)</span></code></pre></div>
<p>This <code>read_rds()</code> function is just like the <code>read_csv()</code> function we used in our last notebook to read in data from our computer, except we are reading a different kind of file format: RDS. The argument (in quotes) is the path where our file is on our computer.</p>
<ol style="list-style-type: decimal">
<li>Run that line of code.</li>
</ol>
<p>What did you expect to happen? It should print the results of the data in your notebook. Did it?</p>
<p>If you got an error, you should read that error output for some clues about what happened. When using a <code>read_</code> function problems are usually about the path … that you have the folder structure wrong or something misspelled.</p>
<blockquote>
<p>CATCHING COMMON MISTAKES: This guide about <a href="https://nickch-k.github.io/DataCommSlides/Lecture_04_Common_R_Problems.html">common R mistakes</a> is worth bookmarking and reading.</p>
</blockquote>
<p>Our next goal is to take all that data and put it into a new R object.</p>
<ol style="list-style-type: decimal">
<li><strong>Edit</strong> your one line of code to assign the data to an object <code>hot100</code>. Remember we will put the new object FIRST (our bucket) and then use the <code>&lt;-</code> operator to put the data inside it.</li>
<li>Run it!</li>
</ol>
<p>It should look like this:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="count-analysis.html#cb34-1" aria-hidden="true" tabindex="-1"></a>hot100 <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">&quot;data-processed/01-hot100.rds&quot;</span>)</span></code></pre></div>
<p>What happened when you ran the code? Did you get an error? Did you get a result printed to the screen?</p>
<p>That last one was kind of a trick question. When you save data into an object it does NOT print it to your notebook, but it does save that object into your “Environment”, which means it is in memory and can be called and run at any time. You should see <code>hot100</code> listed in your Environment tab the top right of RStudio.</p>
<p>Now, before I started this quest, I knew I wanted that data inside the <code>hot100</code> object and could’ve written it like that from the beginning. But I didn’t becuase most “read” problems are in the path, so I wanted to make sure that function was written correctly first. Also, when I put the data into the object I can’t see it until I print it out again, so I do it one piece at at time. You should, too.</p>
<p>So next we’ll print the data out to our screen. We do that by just by calling the object.</p>
<ol style="list-style-type: decimal">
<li><strong>Edit</strong> your code chunk to add a blank line then the object and run it, like this:</li>
</ol>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="count-analysis.html#cb35-1" aria-hidden="true" tabindex="-1"></a>hot100 <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">&quot;data-processed/01-hot100.rds&quot;</span>)</span>
<span id="cb35-2"><a href="count-analysis.html#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="count-analysis.html#cb35-3" aria-hidden="true" tabindex="-1"></a>hot100</span></code></pre></div>
<p>This should print out the data to your screen so you can see the first couple of columns and the first 10 rows of data.</p>
<p>But what we really need is to see all the column names, the data types and an example of the data. We can get that with our <code>glimpse()</code> function.</p>
<ol style="list-style-type: decimal">
<li><strong>Edit</strong> the last line of the chunk to add the pipe and the <code>glimpse()</code> function</li>
<li>Run it.</li>
</ol>
<p>Your code (and result) should look like this now:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="count-analysis.html#cb36-1" aria-hidden="true" tabindex="-1"></a>hot100 <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">&quot;data-processed/01-hot100.rds&quot;</span>)</span>
<span id="cb36-2"><a href="count-analysis.html#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="count-analysis.html#cb36-3" aria-hidden="true" tabindex="-1"></a>hot100 <span class="sc">|&gt;</span> <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 336,100
## Columns: 7
## $ chart_date    &lt;date&gt; 1958-08-04, 1958-08-04, 1958-08-04, 1958-08-04, 1958-08…
## $ current_rank  &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 1…
## $ title         &lt;chr&gt; &quot;Poor Little Fool&quot;, &quot;Patricia&quot;, &quot;Splish Splash&quot;, &quot;Hard H…
## $ performer     &lt;chr&gt; &quot;Ricky Nelson&quot;, &quot;Perez Prado And His Orchestra&quot;, &quot;Bobby …
## $ previous_rank &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
## $ peak_rank     &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 1…
## $ wks_on_chart  &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…</code></pre>
<p>Again, I could’ve written all that code at once before running it, as I’ve written code like that for many years. <strong>I still write code one line at a time</strong>, and you should, too. It is the only way to make sure your code is correct. It’s easier to find problems. So, for the second of a 1,000 times:</p>
<p><strong>WRITE ONE LINE OF CODE. RUN IT. CHECK THE RESULTS. REPEAT.</strong></p>
<blockquote>
<p>IMPORTANT NOTE: If you are looking at my code and writing it into your notebook, you have to run each line of code BEFORE you add the pipe <code>|&gt;</code> at the end of that line. A pipe <code>|&gt;</code> must have a function directly following it on the same or next (or same) line to work.</p>
</blockquote>
</div>
</div>
<div id="introducing-dplyr" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> Introducing dplyr<a href="count-analysis.html#introducing-dplyr" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>One of the packages within the tidyverse is <a href="https://dplyr.tidyverse.org/">dplyr</a>. Dplyr allows us to transform our data frames in ways that let us explore the data and prepare it for visualizing. It’s the R equivalent of common Excel functions like sort, filter and pivoting.</p>
<blockquote>
<p>There is a cheatsheet on the <a href="https://dplyr.tidyverse.org/">dplyr</a> that you might find useful.</p>
</blockquote>
<div class="figure">
<img src="images/transform-dplyractions.png" width="600" alt="" />
<p class="caption">Images courtesy Hadley. Yes, I personally asked him. OK, it was email, but still.</p>
</div>
<p>We’ve used <code>select()</code>, <code>mutate()</code> and <code>arrange()</code> already, but we’ll introduce more dplyr functions in this chapter.</p>
<p>We will use these dplyr functions to find the answers to our questions.</p>
</div>
<div id="most-appearances" class="section level2 hasAnchor" number="4.5">
<h2><span class="header-section-number">4.5</span> Most appearances<a href="count-analysis.html#most-appearances" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Our first question: <strong>Which performer had the most appearances on the Hot 100 chart at any position?</strong></p>
<p>Let’s work through the logic of what we need to do before I explain exactly how to do it.</p>
<p>Each row in the data is one song ranked on the chart. It includes a field with the name of the “performer” so we know who recorded it.</p>
<p><strong>So, to figure out how many times a performer is in the data, we need to count the number of rows with the same performer.</strong></p>
<p>We’ll use the tidyverse’s version of Group and Aggregate to get this answer. It is actually two different functions within dplyr that often work together: <code>group_by()</code> and <code>summarize()</code></p>
<div id="group-aggregate" class="section level3 hasAnchor" number="4.5.1">
<h3><span class="header-section-number">4.5.1</span> Group &amp; Aggregate<a href="count-analysis.html#group-aggregate" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Before we dive into the code, let’s review this video about “Group and Aggregate” to get a handle on the concept.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/a3VNWYJoy5A" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<p><br></p>
<p>We’ll dive deep into this next.</p>
</div>
<div id="summarize" class="section level3 hasAnchor" number="4.5.2">
<h3><span class="header-section-number">4.5.2</span> Summarize<a href="count-analysis.html#summarize" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We’ll start with <a href="https://dplyr.tidyverse.org/reference/summarise.html"><code>summarize()</code></a> first because it can stand alone.</p>
<p>The <code>summarize()</code> function <strong>computes summary tables describing your data</strong>. We’re usually finding a single number to describe a column of data, like the “average” of numbers in column.</p>
<p>In our case we want a “summary” about the <strong>number</strong> of times a specific performer appears in data, hence we use <strong><code>summarize()</code></strong>.</p>
<blockquote>
<p>THEY BE THE ZAME: <code>summarize()</code> and <code>summarise()</code> are the same function, as R supports both the American and UK spelling of summarize. They work the same and I don’t care which you use.</p>
</blockquote>
<p>Here is an example of <code>summarize()</code> in a different context:</p>
<div class="figure">
<img src="images/transform-summarise.png" width="500" alt="" />
<p class="caption">Learn about your data with summarize()</p>
</div>
<p>The example above is giving us two summaries: It is applying a function <code>mean()</code> (or average) on all the values in the <code>lifeExp</code> column, and then again with <code>min()</code>, the lowest life expectancy in the data.</p>
<p>Much like the <code>mutate()</code> function we used earlier, within <code>summarize()</code> we list the name of the new column first, then assign to it the function and column we want to accomplish using <code>=</code>.</p>
<p>Again, in our case (as we work toward finding the performer with most appearances) we want to summarize the <strong>number</strong> of rows, and there is a function for that: <code>n()</code>. (Think “<strong>n</strong>umber of observations”.) Every row in the data is an appearance … we just need to count how many rows have each performer.</p>
<p>But first, to show how this works, we’ll count <em>all</em> the rows in our data. Let’s write the code and run it, then I’ll explain:</p>
<ol style="list-style-type: decimal">
<li>Set up a new section with a Markdown headline, text and explain you are looking for most appearances.</li>
<li>Add a named code chunk and add the following:</li>
</ol>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="count-analysis.html#cb38-1" aria-hidden="true" tabindex="-1"></a>hot100 <span class="sc">|&gt;</span> </span>
<span id="cb38-2"><a href="count-analysis.html#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb38-3"><a href="count-analysis.html#cb38-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">appearances =</span> <span class="fu">n</span>()</span>
<span id="cb38-4"><a href="count-analysis.html#cb38-4" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 × 1
##   appearances
##         &lt;int&gt;
## 1      336100</code></pre>
<ul>
<li>We start with the tibble first and then pipe into <code>summarize()</code>.</li>
<li>Within the function, we define our summary:
<ul>
<li>We name the new column “appearances” because that is a descriptive column name for our result.</li>
<li>We set that new column to count the <strong>n</strong>umber of rows.</li>
</ul></li>
</ul>
<p>Basically we are summarizing the total number of rows in the data. Through 2021 there were 330,800 rows.</p>
<blockquote>
<p>AN ASIDE: Like I did earlier with mutate, I often break up the arguments inside <code>summarize()</code> into new lines so they are easier to read, like above.</p>
</blockquote>
<p>But I bet you’re asking: Professor, we want to count the number of times an <em>performer</em> has appeared, right?</p>
<p>This is where we bring in a close friend to <code>summarize()</code> … the <code>group_by()</code> function.</p>
</div>
<div id="group-by" class="section level3 hasAnchor" number="4.5.3">
<h3><span class="header-section-number">4.5.3</span> Group by<a href="count-analysis.html#group-by" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <a href="https://dplyr.tidyverse.org/reference/group_by.html"><code>group_by()</code></a> function pre-sorts data into groups so that whatever function follows is applied <em>within</em> each of the groups. That means <code>group_by()</code> always has something following it, and that something is <em>usually</em> <code>summarize()</code>.</p>
<p>If we <code>group_by()</code> performer <em>before</em> we summarize/count our rows, it will put all of the rows with “Aerosmith” together, then all the “Bad Company” rows together, etc. and then it will count the rows <em>within</em> those groups … first those for Aerosmith and then those for Bad Company.</p>
<ol style="list-style-type: decimal">
<li>Modify your code block to add the group_by:</li>
</ol>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="count-analysis.html#cb40-1" aria-hidden="true" tabindex="-1"></a>hot100 <span class="sc">|&gt;</span></span>
<span id="cb40-2"><a href="count-analysis.html#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(performer) <span class="sc">|&gt;</span> </span>
<span id="cb40-3"><a href="count-analysis.html#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">appearances =</span> <span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 10,492 × 2
##    performer                            appearances
##    &lt;chr&gt;                                      &lt;int&gt;
##  1 &quot;? (Question Mark) &amp; The Mysterians&quot;          33
##  2 &quot;&#39;N Sync&quot;                                    172
##  3 &quot;&#39;N Sync &amp; Gloria Estefan&quot;                    20
##  4 &quot;&#39;N Sync Featuring Nelly&quot;                     20
##  5 &quot;&#39;Til Tuesday&quot;                                53
##  6 &quot;\&quot;Groove\&quot; Holmes&quot;                           14
##  7 &quot;\&quot;Little\&quot; Jimmy Dickens&quot;                    10
##  8 &quot;\&quot;Pookie\&quot; Hudson&quot;                            1
##  9 &quot;\&quot;Weird Al\&quot; Yankovic&quot;                       91
## 10 &quot;(+44)&quot;                                        1
## # … with 10,482 more rows</code></pre>
<p>What we get in return is a <strong>summarize</strong>d table that shows all 10,000+ different performers that have been on the charts, and the <strong>n</strong>umber of rows in which they appear in the data.</p>
<p>That’s great, but who had the most?</p>
</div>
<div id="arrange-the-results" class="section level3 hasAnchor" number="4.5.4">
<h3><span class="header-section-number">4.5.4</span> Arrange the results<a href="count-analysis.html#arrange-the-results" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Remember in our import notebook when we sorted all the rows by the oldest chart date? We’ll use the same <code>arrange()</code> function here, but we’ll change the result to <strong>desc</strong>ending order, because journalists almost always want to know the <em>most</em> of something.</p>
<ol style="list-style-type: decimal">
<li><strong>Edit</strong> your chunk to add the pipe and arrange function below and run it, then I’ll explain.</li>
</ol>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="count-analysis.html#cb42-1" aria-hidden="true" tabindex="-1"></a>hot100 <span class="sc">|&gt;</span></span>
<span id="cb42-2"><a href="count-analysis.html#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(performer) <span class="sc">|&gt;</span> </span>
<span id="cb42-3"><a href="count-analysis.html#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">appearances =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb42-4"><a href="count-analysis.html#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(appearances))</span></code></pre></div>
<pre><code>## # A tibble: 10,492 × 2
##    performer     appearances
##    &lt;chr&gt;               &lt;int&gt;
##  1 Taylor Swift         1178
##  2 Elton John            889
##  3 Madonna               857
##  4 Drake                 832
##  5 Kenny Chesney         777
##  6 Tim McGraw            739
##  7 Keith Urban           674
##  8 Stevie Wonder         659
##  9 Rod Stewart           657
## 10 Mariah Carey          634
## # … with 10,482 more rows</code></pre>
<ul>
<li>We added the <code>arrange()</code> function and fed it the column of “appearances”. If we left it with just that, then it would list the smallest values first.</li>
<li><em>Within the arrange function</em> we wrapped our column in another function: <code>desc()</code> to change the order to “descending”, or the most on the top.</li>
</ul>
<blockquote>
<p>I sometimes pipe the column name into the <code>desc()</code> function like this: <code>arrange(appearances |&gt; desc())</code>. You can also put a <code>-</code> before the column name like this: <code>arrange(-appearances))</code> but I think is out of favor among tidyverse worldview folk.</p>
</blockquote>
</div>
<div id="get-the-top-of-the-list" class="section level3 hasAnchor" number="4.5.5">
<h3><span class="header-section-number">4.5.5</span> Get the top of the list<a href="count-analysis.html#get-the-top-of-the-list" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We’ve printed 10,000+ rows of data into our notebook when we really only wanted the Top 10 or so. You might think it doesn’t matter, but your knitted HTML file will store all that data and can make it a big file (as in hard drive space), so I try to avoid that when I can.</p>
<p>We can use the <code>head()</code> command again to get our Top 10. It will give us a specified number of rows at the top of the table (with a default of six if we don’t specify.) There is a corresponding <code>tail()</code> function to get the last rows.</p>
<ol style="list-style-type: decimal">
<li>Pipe the result into <code>head()</code> function set to 10 rows.</li>
</ol>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="count-analysis.html#cb44-1" aria-hidden="true" tabindex="-1"></a>hot100 <span class="sc">|&gt;</span></span>
<span id="cb44-2"><a href="count-analysis.html#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(performer) <span class="sc">|&gt;</span> </span>
<span id="cb44-3"><a href="count-analysis.html#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">appearances =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb44-4"><a href="count-analysis.html#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(appearances <span class="sc">|&gt;</span> <span class="fu">desc</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb44-5"><a href="count-analysis.html#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 2
##    performer     appearances
##    &lt;chr&gt;               &lt;int&gt;
##  1 Taylor Swift         1178
##  2 Elton John            889
##  3 Madonna               857
##  4 Drake                 832
##  5 Kenny Chesney         777
##  6 Tim McGraw            739
##  7 Keith Urban           674
##  8 Stevie Wonder         659
##  9 Rod Stewart           657
## 10 Mariah Carey          634</code></pre>
<p>If I was to explain all of the code above in English, I would describe it as this:</p>
<ul>
<li>We start with the hot100 data AND THEN</li>
<li>we group by the data by performer AND THEN</li>
<li>we summarize it by counting the number of rows in each group, calling the count “appearances” AND THEN</li>
<li>we arrange the result by appearances in descending order AND THEN</li>
<li>we keep just the first 10 rows</li>
</ul>
<p>Since we have our answer here and we’re not using the result later, we don’t need to create a new object or anything. Printing it to our notebook is sufficient.</p>
<p>So, <strong>Taylor Swift</strong> … is that who you guessed? A little history here, Swift past Elton John in the summer of 2019. Elton John has been around a long time, but Swift’s popularity at a young age, plus changes in how Billboard counts plays in the modern era (like streaming) has rocketed her to the top. (Sorry, Rocket Man). And it doesn’t hurt that she is re-releasing her entire catalog (Taylor’s version)!</p>
<blockquote>
<p>AN IMPORTANT NOTE: The list we’ve created here is based on <strong>unique</strong> <code>performer</code> names, and as such considers collaborations separately. For instance, Drake is near the top of the list but those are only songs he performed alone and not the many, many collaborations he has done with other performers. So, songs by “Drake” are counted separately than “Drake featuring Future” and even “Future featuring Drake”. You’ll need to make this clear when you write your data drop in a later assignment.</p>
</blockquote>
</div>
</div>
<div id="titleperformer-combo-with-most-appearances" class="section level2 hasAnchor" number="4.6">
<h2><span class="header-section-number">4.6</span> Title/performer combo with most appearances<a href="count-analysis.html#titleperformer-combo-with-most-appearances" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Our quest here is this: <strong>Which title/performer combination has been on the charts the most number of weeks at any position?</strong></p>
<p>This is very similar to our quest to find the artist with the most appearances, but we have to consider both <code>title</code> and <code>performer</code> together because different artists can perform songs of the same name. For example, Adele’s song “Hold On” entered the Hot 100 at 49 in December 2021, but 18 different performers have had a song titled “Hold On” on the Hot 100.</p>
<ol style="list-style-type: decimal">
<li>Start a new section (headline, text describing goal and a new code chunk.)</li>
<li>Add the code below ONE LINE AT A TIME and run it and then I’ll outline it below.</li>
</ol>
<p><strong>WRITE ONE LINE OF CODE. RUN IT. CHECK IT. REPEAT</strong></p>
<p>Remember, you write and run the line <em>BEFORE</em> you add the pipe <code>|&gt;</code>!</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="count-analysis.html#cb46-1" aria-hidden="true" tabindex="-1"></a>hot100 <span class="sc">|&gt;</span> <span class="co"># start with the data, and then ...</span></span>
<span id="cb46-2"><a href="count-analysis.html#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(performer, title) <span class="sc">|&gt;</span> <span class="co"># group by performer and title, and then ..</span></span>
<span id="cb46-3"><a href="count-analysis.html#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">appearances =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> <span class="co"># count the rows with n(), and then ...</span></span>
<span id="cb46-4"><a href="count-analysis.html#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(appearances)) <span class="co"># arrange by appearances in descending order</span></span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;performer&#39;. You can override using the
## `.groups` argument.</code></pre>
<pre><code>## # A tibble: 30,425 × 3
## # Groups:   performer [10,492]
##    performer                                 title                       appea…¹
##    &lt;chr&gt;                                     &lt;chr&gt;                         &lt;int&gt;
##  1 Glass Animals                             Heat Waves                       91
##  2 The Weeknd                                Blinding Lights                  90
##  3 Imagine Dragons                           Radioactive                      87
##  4 AWOLNATION                                Sail                             79
##  5 Jason Mraz                                I&#39;m Yours                        76
##  6 LeAnn Rimes                               How Do I Live                    69
##  7 LMFAO Featuring Lauren Bennett &amp; GoonRock Party Rock Anthem                68
##  8 OneRepublic                               Counting Stars                   68
##  9 Adele                                     Rolling In The Deep              65
## 10 Jewel                                     Foolish Games/You Were Mea…      65
## # … with 30,415 more rows, and abbreviated variable name ¹​appearances</code></pre>
<p>The logic works like this:</p>
<ul>
<li>We want to count combinations over two columns: <code>title, performer</code>. When you group_by more then one column, it will group rows where the values are the same in all columns. i.e. all rows with both “Rush” as a performer and <em>Tom Sawyer</em> as a title are in the same group. Rows with “Rush” and <em>Red Barchetta</em> will be considered in a different group.</li>
<li>Within <code>summarize()</code>, we can name the new column first (we chose <code>appearances</code> as a name here), then describe what should fill it. In this case we filled the column using the <code>n()</code>, which counts the <strong>n</strong>umber of rows in each group.</li>
<li>Once you have a summary table, we sort it by appearances and set it to <strong>desc</strong>ending order, which puts the highest value on the top.</li>
</ul>
<p>We will <em>often</em> use <code>group_by()</code>, <code>summarize()</code> and <code>arrange()</code> together, which is why I’ll refer to this as the <strong>GSA trio</strong>. They are like three close friends that always want to hang out together.</p>
<p>So, what was your guess or this one? A little bit of history in that answer … The Weeknd’s <em>Blinding Lights</em> passed Imagine Dragon’s <em>Radioactive</em> some time in 2021, but then Glass Animals’ <em>Heat Waves</em> topped the chart in 2022.</p>
<div id="introducing-filter" class="section level3 hasAnchor" number="4.6.1">
<h3><span class="header-section-number">4.6.1</span> Introducing filter()<a href="count-analysis.html#introducing-filter" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>I showed you <code>head()</code> in the previous quest and that was useful to quickly limit that list, but it does so indiscriminately. In this case, if we use the default <code>head()</code> function that retains six rows, it would cut right in the middle of a tie at 68 records (at least with data through 2021). A better strategy is to cut off the list at a logical place using <code>filter()</code>. Let’s dive into this new function:</p>
<p>Filtering is one of those Basic Data Journalism Functions:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/ckojM4rtlMc" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<p><br></p>
<p>The dplyr function <code>filter()</code> reduces the number of rows in our data based on one or more criteria within the data.</p>
<p>The syntax works like this:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="count-analysis.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># this is psuedo code. don&#39;t run it</span></span>
<span id="cb49-2"><a href="count-analysis.html#cb49-2" aria-hidden="true" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb49-3"><a href="count-analysis.html#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(variable comparison value)</span>
<span id="cb49-4"><a href="count-analysis.html#cb49-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-5"><a href="count-analysis.html#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="co"># example</span></span>
<span id="cb49-6"><a href="count-analysis.html#cb49-6" aria-hidden="true" tabindex="-1"></a>hot100 <span class="sc">|&gt;</span> </span>
<span id="cb49-7"><a href="count-analysis.html#cb49-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(performer <span class="sc">==</span> <span class="st">&quot;Judas Priest&quot;</span>)</span></code></pre></div>
<p>The <code>filter()</code> function typically works in this order:</p>
<ul>
<li>What is the variable (or column) you are searching in.</li>
<li>What is the comparison you want to do. Equal to? Greater than?</li>
<li>What is the observation (or value in the data) you are looking for?</li>
</ul>
<p>Note the two equals signs <code>==</code> in our Judas Priest example above. It’s important to use two of them when you are asking if a value is “true” or “equal to”, as a single <code>=</code> typically means you are assigning a value to something.</p>
<div id="comparisons-logical-tests" class="section level4 hasAnchor" number="4.6.1.1">
<h4><span class="header-section-number">4.6.1.1</span> Comparisons: Logical tests<a href="count-analysis.html#comparisons-logical-tests" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>There are a number of these logical tests for the comparison:</p>
<table>
<thead>
<tr class="header">
<th align="left">Operator</th>
<th align="left">Definition</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">x <strong>&lt;</strong> y</td>
<td align="left">Less than</td>
</tr>
<tr class="even">
<td align="left">x <strong>&gt;</strong> y</td>
<td align="left">Greater than</td>
</tr>
<tr class="odd">
<td align="left">x <strong>==</strong> y</td>
<td align="left">Equal to</td>
</tr>
<tr class="even">
<td align="left">x <strong>&lt;=</strong> y</td>
<td align="left">Less than or equal to</td>
</tr>
<tr class="odd">
<td align="left">x <strong>&gt;=</strong> y</td>
<td align="left">Greater than or equal to</td>
</tr>
<tr class="even">
<td align="left">x <strong>!-</strong> y</td>
<td align="left">Not equal to</td>
</tr>
<tr class="odd">
<td align="left">x <strong>%in%</strong> c(y,z)</td>
<td align="left">In a group</td>
</tr>
<tr class="even">
<td align="left"><strong>is.na(</strong>x<strong>)</strong></td>
<td align="left">Is NA (missing values)</td>
</tr>
<tr class="odd">
<td align="left"><strong>!is.na(</strong>x<strong>)</strong></td>
<td align="left">Is not NA</td>
</tr>
</tbody>
</table>
<p>Where you apply a filter matters. If we filter before group by/summarize/arrange (GSA) we are focusing the data before we summarize. If we filter after the GSA, we are affecting only the results of the summarize function, which is what we want to do here.</p>
</div>
<div id="filter-to-a-logical-cutoff" class="section level4 hasAnchor" number="4.6.1.2">
<h4><span class="header-section-number">4.6.1.2</span> Filter to a logical cutoff<a href="count-analysis.html#filter-to-a-logical-cutoff" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In this case, I want you to use filter <em>after</em> the GSA actions to include <strong>only results with 65 or more appearances</strong>.</p>
<ol style="list-style-type: decimal">
<li><strong>Edit</strong> your current chunk to add a filter as noted in the example below. I’ll explain it after.</li>
</ol>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="count-analysis.html#cb50-1" aria-hidden="true" tabindex="-1"></a>hot100 <span class="sc">|&gt;</span></span>
<span id="cb50-2"><a href="count-analysis.html#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(performer, title) <span class="sc">|&gt;</span></span>
<span id="cb50-3"><a href="count-analysis.html#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">appearances =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb50-4"><a href="count-analysis.html#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(appearances <span class="sc">|&gt;</span> <span class="fu">desc</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb50-5"><a href="count-analysis.html#cb50-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(appearances <span class="sc">&gt;=</span> <span class="dv">65</span>) <span class="co"># this is the new line</span></span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;performer&#39;. You can override using the
## `.groups` argument.</code></pre>
<pre><code>## # A tibble: 10 × 3
## # Groups:   performer [10]
##    performer                                 title                       appea…¹
##    &lt;chr&gt;                                     &lt;chr&gt;                         &lt;int&gt;
##  1 Glass Animals                             Heat Waves                       91
##  2 The Weeknd                                Blinding Lights                  90
##  3 Imagine Dragons                           Radioactive                      87
##  4 AWOLNATION                                Sail                             79
##  5 Jason Mraz                                I&#39;m Yours                        76
##  6 LeAnn Rimes                               How Do I Live                    69
##  7 LMFAO Featuring Lauren Bennett &amp; GoonRock Party Rock Anthem                68
##  8 OneRepublic                               Counting Stars                   68
##  9 Adele                                     Rolling In The Deep              65
## 10 Jewel                                     Foolish Games/You Were Mea…      65
## # … with abbreviated variable name ¹​appearances</code></pre>
<p>Let’s break down that last line:</p>
<ul>
<li><code>filter()</code> is the function.</li>
<li>The first argument in the function is the column we are looking in, <code>appearances</code> in our case.</li>
<li>We then provide a comparison operator <code>&gt;=</code> to get “greater than or equal to”.</li>
<li>We then give the value to compare, <code>65</code> in our case.</li>
</ul>
</div>
</div>
</div>
<div id="titleperformer-with-most-weeks-at-no.-1" class="section level2 hasAnchor" number="4.7">
<h2><span class="header-section-number">4.7</span> Title/Performer with most weeks at No. 1<a href="count-analysis.html#titleperformer-with-most-weeks-at-no.-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We introduced <code>filter()</code> in the last quest to limit the summary. For this quest you’ll need to filter the data <em>before</em> the group by/summarize/arrange trio.</p>
<p>Let’s review the quest: <strong>Which performer/title combination was No. 1 for the most number of weeks?</strong></p>
<p>While this quest is very similar to the one above, it <em>really</em> helps to think about the logic of what you need and then build the query <strong>one line at a time</strong> to make each line works.</p>
<p>Let’s talk through the logic:</p>
<ul>
<li>We are starting with our <code>hot100</code> data.</li>
<li>Do we want to consider all the data? In this case, no: We only want titles that have a <code>current_rank</code> of 1. This means we will <strong>filter</strong> before any summarizing.</li>
<li>Then we want to count the number of rows with the same <strong>performer</strong> and <strong>title</strong> combinations. This means we need to <code>group_by</code> both <code>performer</code> and <code>title</code>.</li>
<li>Since we are <strong>counting rows</strong>, we need use <code>n()</code> as our summarize function, which counts the <strong>number</strong> or rows in each group.</li>
</ul>
<p>So let’s step through this with code:</p>
<ol style="list-style-type: decimal">
<li>Create a section with a headline, text and code chunk</li>
<li>Start with the <code>hot100</code> data and then pipe into <code>filter()</code>.</li>
<li>Within the filter, set the <code>current_rank</code> to be <code>==</code> to <code>1</code>.</li>
<li>Run the result and check it</li>
</ol>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="count-analysis.html#cb53-1" aria-hidden="true" tabindex="-1"></a>hot100 <span class="sc">|&gt;</span> </span>
<span id="cb53-2"><a href="count-analysis.html#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(current_rank <span class="sc">==</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3,361 × 7
##    chart_date current_rank title                 perfo…¹ previ…² peak_…³ wks_o…⁴
##    &lt;date&gt;            &lt;dbl&gt; &lt;chr&gt;                 &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
##  1 1958-08-04            1 Poor Little Fool      Ricky …      NA       1       1
##  2 1958-08-11            1 Poor Little Fool      Ricky …       1       1       2
##  3 1958-08-18            1 Nel Blu Dipinto Di B… Domeni…       2       1       3
##  4 1958-08-25            1 Little Star           The El…       2       1       4
##  5 1958-09-01            1 Nel Blu Dipinto Di B… Domeni…       2       1       5
##  6 1958-09-08            1 Nel Blu Dipinto Di B… Domeni…       1       1       6
##  7 1958-09-15            1 Nel Blu Dipinto Di B… Domeni…       1       1       7
##  8 1958-09-22            1 Nel Blu Dipinto Di B… Domeni…       1       1       8
##  9 1958-09-29            1 It&#39;s All In The Game  Tommy …       3       1       7
## 10 1958-10-06            1 It&#39;s All In The Game  Tommy …       1       1       8
## # … with 3,351 more rows, and abbreviated variable names ¹​performer,
## #   ²​previous_rank, ³​peak_rank, ⁴​wks_on_chart</code></pre>
<p>The result should show <em>only</em> titles with a <code>1</code> for <code>current_rank</code>.</p>
<p>The rest of our logic is just like our last quest. We need to group by the <code>title</code> and <code>performer</code> and then <code>summarize</code> using <code>n()</code> to count the rows.</p>
<ol style="list-style-type: decimal">
<li>Edit your existing chunk to add the <code>group_by</code> and <code>summarize</code> functions. Name your new column <code>appearances</code> and set it to count the rows with <code>n()</code>.</li>
</ol>
<blockquote>
<p>While <strong>ONE LINE AT A TIME</strong> is still “the Way”, <code>group_by()</code> won’t actually show you any different results that without it, so I usually write <code>group_by()</code> and <code>summarize()</code> together. Or I write the <code>summarize()</code> line first to make sure it works, then edit in the <code>group_by()</code> line to split the data before the summary.</p>
</blockquote>
<details>
<summary>
Try this on your own before you peek for the answer
</summary>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="count-analysis.html#cb55-1" aria-hidden="true" tabindex="-1"></a>hot100 <span class="sc">|&gt;</span></span>
<span id="cb55-2"><a href="count-analysis.html#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(current_rank <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb55-3"><a href="count-analysis.html#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(performer, title) <span class="sc">|&gt;</span></span>
<span id="cb55-4"><a href="count-analysis.html#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">appearances =</span> <span class="fu">n</span>())</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;performer&#39;. You can override using the
## `.groups` argument.</code></pre>
<pre><code>## # A tibble: 1,144 × 3
## # Groups:   performer [757]
##    performer                          title                            appeara…¹
##    &lt;chr&gt;                              &lt;chr&gt;                                &lt;int&gt;
##  1 ? (Question Mark) &amp; The Mysterians 96 Tears                                 1
##  2 &#39;N Sync                            It&#39;s Gonna Be Me                         2
##  3 24kGoldn Featuring iann dior       Mood                                     8
##  4 2Pac Featuring K-Ci And JoJo       How Do U Want It/California Love         2
##  5 50 Cent                            In Da Club                               9
##  6 50 Cent Featuring Nate Dogg        21 Questions                             4
##  7 50 Cent Featuring Olivia           Candy Shop                               9
##  8 6ix9ine &amp; Nicki Minaj              Trollz                                   1
##  9 A Taste Of Honey                   Boogie Oogie Oogie                       3
## 10 a-ha                               Take On Me                               1
## # … with 1,134 more rows, and abbreviated variable name ¹​appearances</code></pre>
</details>
<p>Look at your results to make sure you have the three columns you expect: performer, title and appearances.</p>
<p>This doesn’t quite get us where we want because it lists the results alphabetically by the performer. You need to <strong>arrange</strong> the data to show us the most appearances at the top.</p>
<ol style="list-style-type: decimal">
<li><strong>Edit</strong> your chunk to add the <code>arrange()</code> function to sort by <code>appearances</code> in <code>desc()</code> order. This is just like our last quest.</li>
</ol>
<details>
<summary>
Maybe check your last chunk on how you used arrange, then try it before checking the answer here.
</summary>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="count-analysis.html#cb58-1" aria-hidden="true" tabindex="-1"></a>hot100 <span class="sc">|&gt;</span></span>
<span id="cb58-2"><a href="count-analysis.html#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(current_rank <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb58-3"><a href="count-analysis.html#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(performer, title) <span class="sc">|&gt;</span></span>
<span id="cb58-4"><a href="count-analysis.html#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">appearances =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb58-5"><a href="count-analysis.html#cb58-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(appearances <span class="sc">|&gt;</span> <span class="fu">desc</span>())</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;performer&#39;. You can override using the
## `.groups` argument.</code></pre>
<pre><code>## # A tibble: 1,144 × 3
## # Groups:   performer [757]
##    performer                                         title               appea…¹
##    &lt;chr&gt;                                             &lt;chr&gt;                 &lt;int&gt;
##  1 Lil Nas X Featuring Billy Ray Cyrus               Old Town Road            19
##  2 Luis Fonsi &amp; Daddy Yankee Featuring Justin Bieber Despacito                16
##  3 Mariah Carey &amp; Boyz II Men                        One Sweet Day            16
##  4 Harry Styles                                      As It Was                15
##  5 Boyz II Men                                       I&#39;ll Make Love To …      14
##  6 Elton John                                        Candle In The Wind…      14
##  7 Los Del Rio                                       Macarena (Bayside …      14
##  8 Mariah Carey                                      We Belong Together       14
##  9 Mark Ronson Featuring Bruno Mars                  Uptown Funk!             14
## 10 The Black Eyed Peas                               I Gotta Feeling          14
## # … with 1,134 more rows, and abbreviated variable name ¹​appearances</code></pre>
</details>
<p>You have your answer now (you go, Lil Nas) but we are listing more than 1,000 rows. Let’s cut this off at a logical place like we did in our last quest.</p>
<ol style="list-style-type: decimal">
<li>Use <code>filter()</code> to cut your summary off at <code>appearances</code> of 14 or greater.</li>
</ol>
<details>
<summary>
You’ve done this before … try it on your own!
</summary>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="count-analysis.html#cb61-1" aria-hidden="true" tabindex="-1"></a>hot100 <span class="sc">|&gt;</span></span>
<span id="cb61-2"><a href="count-analysis.html#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(current_rank <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb61-3"><a href="count-analysis.html#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(performer, title) <span class="sc">|&gt;</span></span>
<span id="cb61-4"><a href="count-analysis.html#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">appearances =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb61-5"><a href="count-analysis.html#cb61-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(appearances <span class="sc">|&gt;</span> <span class="fu">desc</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb61-6"><a href="count-analysis.html#cb61-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(appearances <span class="sc">&gt;=</span> <span class="dv">14</span>)</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;performer&#39;. You can override using the
## `.groups` argument.</code></pre>
<pre><code>## # A tibble: 11 × 3
## # Groups:   performer [11]
##    performer                                         title               appea…¹
##    &lt;chr&gt;                                             &lt;chr&gt;                 &lt;int&gt;
##  1 Lil Nas X Featuring Billy Ray Cyrus               Old Town Road            19
##  2 Luis Fonsi &amp; Daddy Yankee Featuring Justin Bieber Despacito                16
##  3 Mariah Carey &amp; Boyz II Men                        One Sweet Day            16
##  4 Harry Styles                                      As It Was                15
##  5 Boyz II Men                                       I&#39;ll Make Love To …      14
##  6 Elton John                                        Candle In The Wind…      14
##  7 Los Del Rio                                       Macarena (Bayside …      14
##  8 Mariah Carey                                      We Belong Together       14
##  9 Mark Ronson Featuring Bruno Mars                  Uptown Funk!             14
## 10 The Black Eyed Peas                               I Gotta Feeling          14
## 11 Whitney Houston                                   I Will Always Love…      14
## # … with abbreviated variable name ¹​appearances</code></pre>
</details>
<p>Now you have the answers to the performer/title with the most weeks at No. 1 with a logical cutoff. If you add to the data later, that logic will still hold and not cut off arbitrarily at a certain number of records.</p>
</div>
<div id="performer-with-most-titles-to-reach-no.-1" class="section level2 hasAnchor" number="4.8">
<h2><span class="header-section-number">4.8</span> Performer with most titles to reach No. 1<a href="count-analysis.html#performer-with-most-titles-to-reach-no.-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Our new quest is this: <strong>Which performer had the most titles reach No. 1?</strong> The answer might be easier to guess if you know music history, but perhaps not.</p>
<p>This sounds similar to our last quest, but there is a <strong>distinct</strong> difference. (That’s a bad joke that will reveal itself here in a bit.)</p>
<p>Again, let’s think through the logic of what we have to do to get our answer:</p>
<ul>
<li>We need to consider only No. 1 songs (filter!)</li>
<li>Because a song could be No. 1 for more than one week, we need to consider the same title/performer combination only once. Another way to say this is we need unique or distinct combinations of title/performer. (We’ll introduce a new function to find this.)</li>
<li>Once we have all the unique No. 1 songs in a list, then we can group by <strong>performer</strong> and count the <strong>n</strong>umber of times they are on the list.</li>
</ul>
<p>Let’s start by getting the No. 1 songs. You’ve did this in the last quest.</p>
<ol style="list-style-type: decimal">
<li>Create a new section with a headline, text and code chunk.</li>
<li>Start with the <code>hot100</code> data and filter it so you only have <code>current_rank</code> of 1.</li>
</ol>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="count-analysis.html#cb64-1" aria-hidden="true" tabindex="-1"></a>hot100 <span class="sc">|&gt;</span> </span>
<span id="cb64-2"><a href="count-analysis.html#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(current_rank <span class="sc">==</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3,361 × 7
##    chart_date current_rank title                 perfo…¹ previ…² peak_…³ wks_o…⁴
##    &lt;date&gt;            &lt;dbl&gt; &lt;chr&gt;                 &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
##  1 1958-08-04            1 Poor Little Fool      Ricky …      NA       1       1
##  2 1958-08-11            1 Poor Little Fool      Ricky …       1       1       2
##  3 1958-08-18            1 Nel Blu Dipinto Di B… Domeni…       2       1       3
##  4 1958-08-25            1 Little Star           The El…       2       1       4
##  5 1958-09-01            1 Nel Blu Dipinto Di B… Domeni…       2       1       5
##  6 1958-09-08            1 Nel Blu Dipinto Di B… Domeni…       1       1       6
##  7 1958-09-15            1 Nel Blu Dipinto Di B… Domeni…       1       1       7
##  8 1958-09-22            1 Nel Blu Dipinto Di B… Domeni…       1       1       8
##  9 1958-09-29            1 It&#39;s All In The Game  Tommy …       3       1       7
## 10 1958-10-06            1 It&#39;s All In The Game  Tommy …       1       1       8
## # … with 3,351 more rows, and abbreviated variable names ¹​performer,
## #   ²​previous_rank, ³​peak_rank, ⁴​wks_on_chart</code></pre>
<p>Now look at the result. Note how “Poor Little Fool” shows up more than once? Other songs do as well. If we counted rows by <code>performer</code> now, that would tell us the number of weeks they’ve had No. 1 songs, not how many <em>different</em> songs have made No. 1.</p>
<div id="using-distinct" class="section level3 hasAnchor" number="4.8.1">
<h3><span class="header-section-number">4.8.1</span> Using distinct()<a href="count-analysis.html#using-distinct" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The next challenge in our logic is to show only unique performer/title combinations. We do this with <a href="https://dplyr.tidyverse.org/reference/distinct.html"><code>distinct()</code></a>.</p>
<p>We feed the <code>distinct()</code> function with the variables we want to consider together, in our case the <code>perfomer</code> and <code>title</code>. All other columns are dropped since including them would mess up their distinctness.</p>
<ol style="list-style-type: decimal">
<li><strong>Edit</strong> your chunk to add the <code>distinct()</code> function to your code chunk.</li>
</ol>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="count-analysis.html#cb66-1" aria-hidden="true" tabindex="-1"></a>hot100 <span class="sc">|&gt;</span> </span>
<span id="cb66-2"><a href="count-analysis.html#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(current_rank <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb66-3"><a href="count-analysis.html#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(title, performer)</span></code></pre></div>
<pre><code>## # A tibble: 1,144 × 2
##    title                           performer                       
##    &lt;chr&gt;                           &lt;chr&gt;                           
##  1 Poor Little Fool                Ricky Nelson                    
##  2 Nel Blu Dipinto Di Blu (Volaré) Domenico Modugno                
##  3 Little Star                     The Elegants                    
##  4 It&#39;s All In The Game            Tommy Edwards                   
##  5 It&#39;s Only Make Believe          Conway Twitty                   
##  6 Tom Dooley                      The Kingston Trio               
##  7 To Know Him, Is To Love Him     The Teddy Bears                 
##  8 The Chipmunk Song               The Chipmunks With David Seville
##  9 Smoke Gets In Your Eyes         The Platters                    
## 10 Stagger Lee                     Lloyd Price                     
## # … with 1,134 more rows</code></pre>
<p>Now we have a list of just No. 1 songs!</p>
</div>
<div id="summarize-the-performers" class="section level3 hasAnchor" number="4.8.2">
<h3><span class="header-section-number">4.8.2</span> Summarize the performers<a href="count-analysis.html#summarize-the-performers" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now that we have our list of No. 1 songs, we can summarize the “number” of times a performer is in the list to know how many No. 1 songs they have.</p>
<p>We’ll again use the group_by/summarize/arrange combination for this, but we are only grouping by <code>performer</code> since that is the values we are counting.</p>
<ol style="list-style-type: decimal">
<li><strong>Edit</strong> your chunk to add a group_by on <code>performer</code> and then a <code>summarize()</code> to count the rows. Name the new column <code>no_hits</code>. Run it.</li>
<li>After you are sure the group_by/summarize runs, add an <code>arrange()</code> to show the <code>no1_hits</code> in descending order.</li>
</ol>
<details>
<summary>
You’ve done this before! Give it a go before checking the code here.
</summary>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="count-analysis.html#cb68-1" aria-hidden="true" tabindex="-1"></a>hot100 <span class="sc">|&gt;</span> </span>
<span id="cb68-2"><a href="count-analysis.html#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(current_rank <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb68-3"><a href="count-analysis.html#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(title, performer) <span class="sc">|&gt;</span></span>
<span id="cb68-4"><a href="count-analysis.html#cb68-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(performer) <span class="sc">|&gt;</span></span>
<span id="cb68-5"><a href="count-analysis.html#cb68-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">no1_hits =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb68-6"><a href="count-analysis.html#cb68-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(no1_hits <span class="sc">|&gt;</span> <span class="fu">desc</span>())</span></code></pre></div>
<pre><code>## # A tibble: 757 × 2
##    performer          no1_hits
##    &lt;chr&gt;                 &lt;int&gt;
##  1 The Beatles              19
##  2 Mariah Carey             16
##  3 Madonna                  12
##  4 Michael Jackson          11
##  5 Whitney Houston          11
##  6 The Supremes             10
##  7 Bee Gees                  9
##  8 Taylor Swift              8
##  9 The Rolling Stones        8
## 10 Janet Jackson             7
## # … with 747 more rows</code></pre>
</details>
</div>
<div id="filter-for-a-good-cutoff" class="section level3 hasAnchor" number="4.8.3">
<h3><span class="header-section-number">4.8.3</span> Filter for a good cutoff<a href="count-analysis.html#filter-for-a-good-cutoff" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Like we did earlier, use a <code>filter()</code> after your arrange to cut the list off at a logical place.</p>
<ol style="list-style-type: decimal">
<li>Edit your chunk to filter the summary to show performers with <code>8</code> or more No. 1 hits.</li>
</ol>
<details>
<summary>
You can do this. Really.
</summary>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="count-analysis.html#cb70-1" aria-hidden="true" tabindex="-1"></a>hot100 <span class="sc">|&gt;</span> </span>
<span id="cb70-2"><a href="count-analysis.html#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(current_rank <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb70-3"><a href="count-analysis.html#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(title, performer) <span class="sc">|&gt;</span></span>
<span id="cb70-4"><a href="count-analysis.html#cb70-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(performer) <span class="sc">|&gt;</span></span>
<span id="cb70-5"><a href="count-analysis.html#cb70-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">no1_hits =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb70-6"><a href="count-analysis.html#cb70-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(no1_hits <span class="sc">|&gt;</span> <span class="fu">desc</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb70-7"><a href="count-analysis.html#cb70-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(no1_hits <span class="sc">&gt;=</span> <span class="dv">8</span>)</span></code></pre></div>
<pre><code>## # A tibble: 9 × 2
##   performer          no1_hits
##   &lt;chr&gt;                 &lt;int&gt;
## 1 The Beatles              19
## 2 Mariah Carey             16
## 3 Madonna                  12
## 4 Michael Jackson          11
## 5 Whitney Houston          11
## 6 The Supremes             10
## 7 Bee Gees                  9
## 8 Taylor Swift              8
## 9 The Rolling Stones        8</code></pre>
</details>
<p>So, <strong>The Beatles</strong>. Was that your guess? Look closely at that list … who has any chance of topping them?</p>
</div>
</div>
<div id="no.-1-hits-in-last-five-years" class="section level2 hasAnchor" number="4.9">
<h2><span class="header-section-number">4.9</span> No. 1 hits in last five years<a href="count-analysis.html#no.-1-hits-in-last-five-years" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Which performer had the most songs reach No. 1 in the most recent five years?</strong></p>
<p>Let’s talk through the logic. This is very similar to the No. 1 hits above but with two differences:</p>
<ul>
<li>In addition to filtering for No. 1 songs, we also want to filter for songs in 2017-2021.</li>
<li>We might need to adjust our last filter for a better “break point”.</li>
</ul>
<p>We haven’t talked about filtering dates, so let me tell you this: You can use filter operations on dates just like you do any other text. This will give you rows <em>after</em> the last day of 2016.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="count-analysis.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(chart_date <span class="sc">&gt;</span> <span class="st">&quot;2016-12-31&quot;</span>)</span></code></pre></div>
<p>But since we need this filter before our group, we can do this within the same filter function where we get the number one songs.</p>
<ol style="list-style-type: decimal">
<li>Create a new section (headline, text, chunk).</li>
<li>Build (from scratch, one line at a time) the same filter, group_by, summarize and arrange as above, but <strong>leave out the cut-off filter</strong> at the end. Make sure it runs.</li>
<li><strong>Edit your filter</strong> to put a comma after <code>current_rank == 1</code> and then add this filter: <code>chart_date &gt; "2016-12-31"</code>. Run the code.</li>
<li>Build a new cut-off filter at the end and keep only rows with more than 1 <code>top_hits</code>.</li>
</ol>
<details>
<summary>
No, really. Try it on your own first.
</summary>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="count-analysis.html#cb73-1" aria-hidden="true" tabindex="-1"></a>hot100 <span class="sc">|&gt;</span> </span>
<span id="cb73-2"><a href="count-analysis.html#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb73-3"><a href="count-analysis.html#cb73-3" aria-hidden="true" tabindex="-1"></a>    current_rank <span class="sc">==</span> <span class="dv">1</span>,</span>
<span id="cb73-4"><a href="count-analysis.html#cb73-4" aria-hidden="true" tabindex="-1"></a>    chart_date <span class="sc">&gt;</span> <span class="st">&quot;2016-12-31&quot;</span></span>
<span id="cb73-5"><a href="count-analysis.html#cb73-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb73-6"><a href="count-analysis.html#cb73-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(title, performer) <span class="sc">|&gt;</span> </span>
<span id="cb73-7"><a href="count-analysis.html#cb73-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(performer) <span class="sc">|&gt;</span> </span>
<span id="cb73-8"><a href="count-analysis.html#cb73-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">top_hits =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb73-9"><a href="count-analysis.html#cb73-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(top_hits <span class="sc">|&gt;</span> <span class="fu">desc</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb73-10"><a href="count-analysis.html#cb73-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(top_hits <span class="sc">&gt;</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## # A tibble: 11 × 2
##    performer      top_hits
##    &lt;chr&gt;             &lt;int&gt;
##  1 Drake                 5
##  2 Taylor Swift          5
##  3 BTS                   4
##  4 Ariana Grande         3
##  5 Cardi B               2
##  6 Ed Sheeran            2
##  7 Harry Styles          2
##  8 Lizzo                 2
##  9 Olivia Rodrigo        2
## 10 The Weeknd            2
## 11 Travis Scott          2</code></pre>
</details>
</div>
<div id="top-10-hits-overall-on-your-own" class="section level2 hasAnchor" number="4.10">
<h2><span class="header-section-number">4.10</span> Top 10 hits overall (on your own)<a href="count-analysis.html#top-10-hits-overall-on-your-own" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Which performer had the most Top 10 hits overall?</p>
<p>This one I want you to do on your own.</p>
<p>The logic is very similar to the “Most No. 1 hits” quest you did before, but you need to adjust your filter to find songs within position 1 through 10. Don’t over think it, but do recognize that the “top” of the charts are smaller numbers, not larger ones.</p>
<ol style="list-style-type: decimal">
<li>Make a new section</li>
<li>Describe what you are doing</li>
<li>Do it using the group_by/summarize method</li>
<li>Filter to cut off at a logical number or rows. (i.e., don’t stop at a tie)</li>
</ol>
</div>
<div id="complex-filters" class="section level2 hasAnchor" number="4.11">
<h2><span class="header-section-number">4.11</span> Complex filters<a href="count-analysis.html#complex-filters" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You can combine filters in different ways to really target which rows to keep. For these I want you to play around a bit.</p>
<ol style="list-style-type: decimal">
<li>Copy <strong>each of the examples below</strong> into your notebook, but change the title and/or artists to some that you like.</li>
</ol>
<div id="multiple-truths" class="section level3 hasAnchor" number="4.11.1">
<h3><span class="header-section-number">4.11.1</span> Multiple truths<a href="count-analysis.html#multiple-truths" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you want filter data for when <strong>two or more things are true</strong>, you can write two equations and combine with <code>&amp;</code>. Only rows where both sides prove true are returned.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="count-analysis.html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># When Poor Little Fool was No. 1, but not any other position</span></span>
<span id="cb75-2"><a href="count-analysis.html#cb75-2" aria-hidden="true" tabindex="-1"></a>hot100 <span class="sc">|&gt;</span> </span>
<span id="cb75-3"><a href="count-analysis.html#cb75-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(title <span class="sc">==</span> <span class="st">&quot;Poor Little Fool&quot;</span> <span class="sc">&amp;</span> current_rank <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb75-4"><a href="count-analysis.html#cb75-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(chart_date<span class="sc">:</span>performer)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 4
##   chart_date current_rank title            performer   
##   &lt;date&gt;            &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;       
## 1 1958-08-04            1 Poor Little Fool Ricky Nelson
## 2 1958-08-11            1 Poor Little Fool Ricky Nelson</code></pre>
</div>
<div id="either-is-true" class="section level3 hasAnchor" number="4.11.2">
<h3><span class="header-section-number">4.11.2</span> Either is true<a href="count-analysis.html#either-is-true" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you want an <strong>or</strong> filter, then you write two equations with a <code>|</code> between them.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="count-analysis.html#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># songs by Adam Sandler OR Alabama Shakes</span></span>
<span id="cb77-2"><a href="count-analysis.html#cb77-2" aria-hidden="true" tabindex="-1"></a>hot100 <span class="sc">|&gt;</span> </span>
<span id="cb77-3"><a href="count-analysis.html#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(performer <span class="sc">==</span> <span class="st">&quot;Adam Sandler&quot;</span> <span class="sc">|</span> performer <span class="sc">==</span> <span class="st">&quot;Alabama Shakes&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb77-4"><a href="count-analysis.html#cb77-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(chart_date<span class="sc">:</span>performer)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 4
##   chart_date current_rank title             performer     
##   &lt;date&gt;            &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;         
## 1 1999-01-02           80 The Chanukah Song Adam Sandler  
## 2 1999-01-09           98 The Chanukah Song Adam Sandler  
## 3 2013-03-02          100 Hold On           Alabama Shakes
## 4 2013-03-09           93 Hold On           Alabama Shakes</code></pre>
<blockquote>
<p><code>|</code> is the <em>Shift</em> of the <code>\</code> key above Return on your keyboard. That <code>|</code> character is also sometimes called a “pipe”, which gets confusing in R with <code>|&gt;</code>.)</p>
</blockquote>
</div>
<div id="mixing-criteria" class="section level3 hasAnchor" number="4.11.3">
<h3><span class="header-section-number">4.11.3</span> Mixing criteria<a href="count-analysis.html#mixing-criteria" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you have <strong>multiple criteria</strong>, you separate them with a comma <code>,</code>. Note I’ve also added returns to make the code more readable and added distinct to songs only once.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="count-analysis.html#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># gives us rows with either Taylor Swift or Drake,</span></span>
<span id="cb79-2"><a href="count-analysis.html#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="co"># but only those that reached No. 1</span></span>
<span id="cb79-3"><a href="count-analysis.html#cb79-3" aria-hidden="true" tabindex="-1"></a>hot100 <span class="sc">|&gt;</span> </span>
<span id="cb79-4"><a href="count-analysis.html#cb79-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb79-5"><a href="count-analysis.html#cb79-5" aria-hidden="true" tabindex="-1"></a>    performer <span class="sc">==</span> <span class="st">&quot;Taylor Swift&quot;</span> <span class="sc">|</span> performer <span class="sc">==</span> <span class="st">&quot;Drake&quot;</span>,</span>
<span id="cb79-6"><a href="count-analysis.html#cb79-6" aria-hidden="true" tabindex="-1"></a>    current_rank <span class="sc">==</span> <span class="dv">1</span></span>
<span id="cb79-7"><a href="count-analysis.html#cb79-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> </span>
<span id="cb79-8"><a href="count-analysis.html#cb79-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(current_rank, title, performer)</span></code></pre></div>
<pre><code>## # A tibble: 13 × 3
##    current_rank title                                   performer   
##           &lt;dbl&gt; &lt;chr&gt;                                   &lt;chr&gt;       
##  1            1 We Are Never Ever Getting Back Together Taylor Swift
##  2            1 Shake It Off                            Taylor Swift
##  3            1 Blank Space                             Taylor Swift
##  4            1 Look What You Made Me Do                Taylor Swift
##  5            1 God&#39;s Plan                              Drake       
##  6            1 Nice For What                           Drake       
##  7            1 In My Feelings                          Drake       
##  8            1 Toosie Slide                            Drake       
##  9            1 Cardigan                                Taylor Swift
## 10            1 Willow                                  Taylor Swift
## 11            1 What&#39;s Next                             Drake       
## 12            1 All Too Well (Taylor&#39;s Version)         Taylor Swift
## 13            1 Anti-Hero                               Taylor Swift</code></pre>
</div>
<div id="search-within-a-string" class="section level3 hasAnchor" number="4.11.4">
<h3><span class="header-section-number">4.11.4</span> Search within a string<a href="count-analysis.html#search-within-a-string" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>And if you want to search for text <strong>within</strong> the data, you can use <a href="https://stringr.tidyverse.org/reference/str_detect.html"><code>str_detect()</code></a> to look for specific characters within a value to filter rows. <code>str_detect()</code> needs two arguments: 1) What column to search in, and 2) what to search for “in quotes”. I also use <code>distinct()</code> here to show only unique title/performer combinations.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="count-analysis.html#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Songs where &quot;2 Chainz&quot; was among performers</span></span>
<span id="cb81-2"><a href="count-analysis.html#cb81-2" aria-hidden="true" tabindex="-1"></a>hot100 <span class="sc">|&gt;</span> </span>
<span id="cb81-3"><a href="count-analysis.html#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(performer, <span class="st">&quot;2 Chainz&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb81-4"><a href="count-analysis.html#cb81-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(title, performer)</span></code></pre></div>
<pre><code>## # A tibble: 40 × 2
##    title                  performer                                            
##    &lt;chr&gt;                  &lt;chr&gt;                                                
##  1 Mercy                  Kanye West, Big Sean, Pusha T, 2 Chainz              
##  2 Beez In The Trap       Nicki Minaj Featuring 2 Chainz                       
##  3 No Lie                 2 Chainz Featuring Drake                             
##  4 Birthday Song          2 Chainz Featuring Kanye West                        
##  5 Yuck!                  2 Chainz Featuring Lil Wayne                         
##  6 Bandz A Make Her Dance Juicy J Featuring Lil Wayne &amp; 2 Chainz               
##  7 My Moment              DJ Drama Featuring 2 Chainz, Meek Mill &amp; Jeremih     
##  8 F**kin Problems        A$AP Rocky Featuring Drake, 2 Chainz &amp; Kendrick Lamar
##  9 I&#39;m Different          2 Chainz                                             
## 10 R.I.P.                 Young Jeezy Featuring 2 Chainz                       
## # … with 30 more rows</code></pre>
<p>There is a newer string search function called <code>str_like()</code> that has some <a href="https://stringr.tidyverse.org/reference/str_like.html">interesting nuances</a> derived from SQL. It must match the entire phrase so it will find only songs where “2 Chainz” is the only artist, but it case INSENSITIVE by default, unlike <code>str_detect()</code>.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="count-analysis.html#cb83-1" aria-hidden="true" tabindex="-1"></a>hot100 <span class="sc">|&gt;</span> </span>
<span id="cb83-2"><a href="count-analysis.html#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_like</span>(performer, <span class="st">&quot;2 chainz&quot;</span>)) <span class="sc">|&gt;</span> <span class="co"># note chainz is lowercase in the search string</span></span>
<span id="cb83-3"><a href="count-analysis.html#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(title, performer)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 2
##   title         performer
##   &lt;chr&gt;         &lt;chr&gt;    
## 1 I&#39;m Different 2 Chainz 
## 2 Watch Out     2 Chainz</code></pre>
<p>Of course there is much, much more.</p>
</div>
</div>
<div id="on-your-own" class="section level2 hasAnchor" number="4.12">
<h2><span class="header-section-number">4.12</span> On your own<a href="count-analysis.html#on-your-own" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now I want you to find something else on your own. It doesn’t matter what it is. Just find something about a performer or song you like.</p>
<ol style="list-style-type: decimal">
<li>Start a new section with a Markdown headline</li>
<li>Use Markdown text to declare what you are looking for</li>
<li>Find it!</li>
<li>After your code, explain what functions you used and why (like what did they do for you)</li>
</ol>
</div>
<div id="a-shortcut-count" class="section level2 hasAnchor" number="4.13">
<h2><span class="header-section-number">4.13</span> A shortcut: count()<a href="count-analysis.html#a-shortcut-count" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In the interest of full disclosure but at the risk of confusing you, I must reveal this fact:</p>
<p>We count stuff in data science (and journalism) all the time. So dplyr has a shortcut to group, count and arrange rows of data. We needed to use the long way above because a) we will use <code>group_by()</code> and <code>summarize()</code> with other math that isn’t just counting rows, and b) you need to understand what is happening inside <code>count()</code>, which uses group_by/summarize/arrange under the hood.</p>
<p>The <a href="https://dplyr.tidyverse.org/reference/count.html"><code>count()</code></a> function takes the columns you want to group and then does the summarize on <code>n()</code> for you:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="count-analysis.html#cb85-1" aria-hidden="true" tabindex="-1"></a>hot100 <span class="sc">|&gt;</span> </span>
<span id="cb85-2"><a href="count-analysis.html#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(performer)</span></code></pre></div>
<pre><code>## # A tibble: 10,492 × 2
##    performer                                n
##    &lt;chr&gt;                                &lt;int&gt;
##  1 &quot;? (Question Mark) &amp; The Mysterians&quot;    33
##  2 &quot;&#39;N Sync&quot;                              172
##  3 &quot;&#39;N Sync &amp; Gloria Estefan&quot;              20
##  4 &quot;&#39;N Sync Featuring Nelly&quot;               20
##  5 &quot;&#39;Til Tuesday&quot;                          53
##  6 &quot;\&quot;Groove\&quot; Holmes&quot;                     14
##  7 &quot;\&quot;Little\&quot; Jimmy Dickens&quot;              10
##  8 &quot;\&quot;Pookie\&quot; Hudson&quot;                      1
##  9 &quot;\&quot;Weird Al\&quot; Yankovic&quot;                 91
## 10 &quot;(+44)&quot;                                  1
## # … with 10,482 more rows</code></pre>
<p>To get the same pretty table you still have to rename the new column and reverse the sort, you just do it differently as arguments within the <code>count()</code> function. You can view the <a href="https://dplyr.tidyverse.org/reference/count.html"><code>count()</code> options here.</a></p>
<ul>
<li>Add this chunk to your notebook (with a note you are trying <code>count()</code>) so you have it to refer to.</li>
</ul>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="count-analysis.html#cb87-1" aria-hidden="true" tabindex="-1"></a>hot100 <span class="sc">|&gt;</span> </span>
<span id="cb87-2"><a href="count-analysis.html#cb87-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(performer, <span class="at">name =</span> <span class="st">&quot;appearances&quot;</span>, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb87-3"><a href="count-analysis.html#cb87-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(appearances <span class="sc">&gt;</span> <span class="dv">600</span>)</span></code></pre></div>
<pre><code>## # A tibble: 13 × 2
##    performer       appearances
##    &lt;chr&gt;                 &lt;int&gt;
##  1 Taylor Swift           1178
##  2 Elton John              889
##  3 Madonna                 857
##  4 Drake                   832
##  5 Kenny Chesney           777
##  6 Tim McGraw              739
##  7 Keith Urban             674
##  8 Stevie Wonder           659
##  9 Rod Stewart             657
## 10 Mariah Carey            634
## 11 Michael Jackson         613
## 12 Chicago                 607
## 13 Rascal Flatts           604</code></pre>
<p>So the code above does same things here as we did in our first quest, but quicker.</p>
<blockquote>
<p>IMPORTANT: We will concentrate on using group_by/summarize/arrange because it can do SO MUCH MORE than <code>count()</code>. Count can ONLY count rows. It can’t do any other kind of math in summarize.</p>
</blockquote>
</div>
<div id="review-of-what-weve-learned" class="section level2 hasAnchor" number="4.14">
<h2><span class="header-section-number">4.14</span> Review of what we’ve learned<a href="count-analysis.html#review-of-what-weve-learned" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We introduced a number of new functions in this lesson, most of them from the <a href="https://dplyr.tidyverse.org/">dplyr</a> package. Mostly we filtered and summarized our data. Here are the functions we introduced in this chapter, many with links to documentation:</p>
<ul>
<li><a href="https://dplyr.tidyverse.org/reference/filter.html"><code>filter()</code></a> returns only rows that meet logical criteria you specify.</li>
<li><a href="https://dplyr.tidyverse.org/reference/summarise.html"><code>summarize()</code></a> builds a summary table <em>about</em> your data. You can count rows <a href="https://dplyr.tidyverse.org/reference/n.html"><code>n()</code></a> or do math on numerical values, like <code>mean()</code>.</li>
<li><a href="https://dplyr.tidyverse.org/reference/group_by.html"><code>group_by()</code></a> is often used with <code>summarize()</code> to put data into groups before building a summary table based on the groups.</li>
<li><a href="https://dplyr.tidyverse.org/reference/distinct.html"><code>distinct()</code></a> returns rows based on unique values in columns you specify. i.e., it deduplicates data.</li>
<li><a href="https://stringr.tidyverse.org/reference/str_detect.html"><code>str_detect()</code></a> and <a href="https://stringr.tidyverse.org/reference/str_like.html"><code>str_like()</code></a> to search within strings.</li>
<li><a href="https://dplyr.tidyverse.org/reference/count.html"><code>count()</code></a> is a shorthand for the group_by/summarize operation to count rows based on groups. You can name your summary columns and sort the data within the same function.</li>
</ul>
</div>
<div id="turn-in-your-project" class="section level2 hasAnchor" number="4.15">
<h2><span class="header-section-number">4.15</span> Turn in your project<a href="count-analysis.html#turn-in-your-project" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li>Make sure everything runs properly (Restart R and Run All Chunks) and then Knit to HTML.</li>
<li>Zip the folder.</li>
<li>Upload to the Canvas assignment.</li>
</ol>
</div>
<div id="soundtrack-for-this-assignment" class="section level2 hasAnchor" number="4.16">
<h2><span class="header-section-number">4.16</span> Soundtrack for this assignment<a href="count-analysis.html#soundtrack-for-this-assignment" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This lesson was constructed with the vibes of <a href="https://www.thebrightlightsocialhour.com/home">The Bright Light Social Hour</a>. They’ve never had a song on the Hot 100 (at least not through 2021).</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="count-analysis.html#cb89-1" aria-hidden="true" tabindex="-1"></a>hot100 <span class="sc">|&gt;</span> </span>
<span id="cb89-2"><a href="count-analysis.html#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(performer, <span class="st">&quot;Bright Light&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 0 × 7
## # … with 7 variables: chart_date &lt;date&gt;, current_rank &lt;dbl&gt;, title &lt;chr&gt;,
## #   performer &lt;chr&gt;, previous_rank &lt;dbl&gt;, peak_rank &lt;dbl&gt;, wks_on_chart &lt;dbl&gt;</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="counts-import.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="sums-import.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/04-counts-analysis.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>

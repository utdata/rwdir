<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapter 7 Graphics | Reporting with Data in R</title>
  <meta name="description" content="Chapter 7 Graphics | Reporting with Data in R is a series of lessons for a course in the School of Journalism, Moody College of Communication at the University of Texas at Austin. It is taught by Christian McDonald.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Chapter 7 Graphics | Reporting with Data in R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Chapter 7 Graphics | Reporting with Data in R is a series of lessons for a course in the School of Journalism, Moody College of Communication at the University of Texas at Austin. It is taught by Christian McDonald." />
  <meta name="github-repo" content="utdata/rwd-class" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Graphics | Reporting with Data in R" />
  
  <meta name="twitter:description" content="Chapter 7 Graphics | Reporting with Data in R is a series of lessons for a course in the School of Journalism, Moody College of Communication at the University of Texas at Austin. It is taught by Christian McDonald." />
  

<meta name="author" content="Christian McDonald">


<meta name="date" content="2019-04-21">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="cleaning.html">
<link rel="next" href="tidy.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<style type="text/css">
  p.caption {
    color: #777;
    margin-top: 10px;
  }
  p code, pre, pre code, li code {
    background-color: #DCDCDC !important;
  }
</style>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Reporting with Data in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this class</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-the-author"><i class="fa fa-check"></i>About the author</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#other-resources"><i class="fa fa-check"></i>Other resources</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="install.html"><a href="install.html"><i class="fa fa-check"></i><b>1</b> Install Party</a><ul>
<li class="chapter" data-level="1.1" data-path="install.html"><a href="install.html#installing-r"><i class="fa fa-check"></i><b>1.1</b> Installing R</a></li>
<li class="chapter" data-level="1.2" data-path="install.html"><a href="install.html#installing-rstudio"><i class="fa fa-check"></i><b>1.2</b> Installing RStudio</a></li>
<li class="chapter" data-level="1.3" data-path="install.html"><a href="install.html#class-project-folder"><i class="fa fa-check"></i><b>1.3</b> Class project folder</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction to R</a><ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#rstudio-tour"><i class="fa fa-check"></i><b>2.1</b> RStudio tour</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#updating-preferences"><i class="fa fa-check"></i><b>2.2</b> Updating preferences</a></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#starting-a-new-project"><i class="fa fa-check"></i><b>2.3</b> Starting a new Project</a></li>
<li class="chapter" data-level="2.4" data-path="intro.html"><a href="intro.html#using-r-notebooks"><i class="fa fa-check"></i><b>2.4</b> Using R Notebooks</a><ul>
<li class="chapter" data-level="2.4.1" data-path="intro.html"><a href="intro.html#create-your-first-notebook"><i class="fa fa-check"></i><b>2.4.1</b> Create your first notebook</a></li>
<li class="chapter" data-level="2.4.2" data-path="intro.html"><a href="intro.html#save-the-.rmd-file"><i class="fa fa-check"></i><b>2.4.2</b> Save the .Rmd file</a></li>
<li class="chapter" data-level="2.4.3" data-path="intro.html"><a href="intro.html#run-the-notebook"><i class="fa fa-check"></i><b>2.4.3</b> Run the notebook</a></li>
<li class="chapter" data-level="2.4.4" data-path="intro.html"><a href="intro.html#adding-new-code-chunks"><i class="fa fa-check"></i><b>2.4.4</b> Adding new code chunks</a></li>
<li class="chapter" data-level="2.4.5" data-path="intro.html"><a href="intro.html#practice-adding-code-chunks"><i class="fa fa-check"></i><b>2.4.5</b> Practice adding code chunks</a></li>
<li class="chapter" data-level="2.4.6" data-path="intro.html"><a href="intro.html#preview-the-report"><i class="fa fa-check"></i><b>2.4.6</b> Preview the report</a></li>
<li class="chapter" data-level="2.4.7" data-path="intro.html"><a href="intro.html#the-toolbar"><i class="fa fa-check"></i><b>2.4.7</b> The toolbar</a></li>
<li class="chapter" data-level="2.4.8" data-path="intro.html"><a href="intro.html#knit-the-final-workbook"><i class="fa fa-check"></i><b>2.4.8</b> Knit the final workbook</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="intro.html"><a href="intro.html#turning-in-our-projects"><i class="fa fa-check"></i><b>2.5</b> Turning in our projects</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="import.html"><a href="import.html"><i class="fa fa-check"></i><b>3</b> Importing data</a><ul>
<li class="chapter" data-level="3.1" data-path="import.html"><a href="import.html#goals-for-this-section"><i class="fa fa-check"></i><b>3.1</b> Goals for this section</a></li>
<li class="chapter" data-level="3.2" data-path="import.html"><a href="import.html#data-types"><i class="fa fa-check"></i><b>3.2</b> Data types</a><ul>
<li class="chapter" data-level="3.2.1" data-path="import.html"><a href="import.html#what-is-clean-data"><i class="fa fa-check"></i><b>3.2.1</b> What is clean data</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="import.html"><a href="import.html#create-a-new-project"><i class="fa fa-check"></i><b>3.3</b> Create a new project</a><ul>
<li class="chapter" data-level="3.3.1" data-path="import.html"><a href="import.html#the-r-package-environment"><i class="fa fa-check"></i><b>3.3.1</b> The R Package environment</a></li>
<li class="chapter" data-level="3.3.2" data-path="import.html"><a href="import.html#installing-and-using-packages"><i class="fa fa-check"></i><b>3.3.2</b> Installing and using packages</a></li>
<li class="chapter" data-level="3.3.3" data-path="import.html"><a href="import.html#load-the-libraries"><i class="fa fa-check"></i><b>3.3.3</b> Load the libraries</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="import.html"><a href="import.html#lets-get-some-data"><i class="fa fa-check"></i><b>3.4</b> Let’s get some data</a><ul>
<li class="chapter" data-level="3.4.1" data-path="import.html"><a href="import.html#inspect-the-data"><i class="fa fa-check"></i><b>3.4.1</b> Inspect the data</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="import.html"><a href="import.html#import-csv-as-data"><i class="fa fa-check"></i><b>3.5</b> Import csv as data</a><ul>
<li class="chapter" data-level="3.5.1" data-path="import.html"><a href="import.html#help-files"><i class="fa fa-check"></i><b>3.5.1</b> Help files</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="import.html"><a href="import.html#assign-our-data-to-a-data-frame"><i class="fa fa-check"></i><b>3.6</b> Assign our data to a data frame</a></li>
<li class="chapter" data-level="3.7" data-path="import.html"><a href="import.html#inspect-the-data-1"><i class="fa fa-check"></i><b>3.7</b> Inspect the data</a><ul>
<li class="chapter" data-level="3.7.1" data-path="import.html"><a href="import.html#write-notes-about-things-to-change"><i class="fa fa-check"></i><b>3.7.1</b> Write notes about things to change</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="import.html"><a href="import.html#turn-in-your-project"><i class="fa fa-check"></i><b>3.8</b> Turn in your project</a></li>
<li class="chapter" data-level="3.9" data-path="import.html"><a href="import.html#practice-assignment-import-census"><i class="fa fa-check"></i><b>3.9</b> Practice assignment: Import census</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="columns.html"><a href="columns.html"><i class="fa fa-check"></i><b>4</b> Columns</a><ul>
<li class="chapter" data-level="4.1" data-path="columns.html"><a href="columns.html#goals-for-this-section-1"><i class="fa fa-check"></i><b>4.1</b> Goals for this section</a></li>
<li class="chapter" data-level="4.2" data-path="columns.html"><a href="columns.html#relaunch-the-wells-project"><i class="fa fa-check"></i><b>4.2</b> Relaunch the Wells project</a></li>
<li class="chapter" data-level="4.3" data-path="columns.html"><a href="columns.html#clean-up-column-names"><i class="fa fa-check"></i><b>4.3</b> Clean up column names</a><ul>
<li class="chapter" data-level="4.3.1" data-path="columns.html"><a href="columns.html#clean-names-with-janitor"><i class="fa fa-check"></i><b>4.3.1</b> Clean names with janitor</a></li>
<li class="chapter" data-level="4.3.2" data-path="columns.html"><a href="columns.html#simple-renaming-of-individual-columns"><i class="fa fa-check"></i><b>4.3.2</b> Simple renaming of individual columns</a></li>
<li class="chapter" data-level="4.3.3" data-path="columns.html"><a href="columns.html#mass-renaming-of-columns"><i class="fa fa-check"></i><b>4.3.3</b> Mass renaming of columns</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="columns.html"><a href="columns.html#clean-data-within-columns"><i class="fa fa-check"></i><b>4.4</b> Clean data within columns</a><ul>
<li class="chapter" data-level="4.4.1" data-path="columns.html"><a href="columns.html#using-lubridate-to-clean-dates"><i class="fa fa-check"></i><b>4.4.1</b> Using lubridate to clean dates</a></li>
<li class="chapter" data-level="4.4.2" data-path="columns.html"><a href="columns.html#fix-the-bore-hole-depth"><i class="fa fa-check"></i><b>4.4.2</b> Fix the bore hole depth</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="columns.html"><a href="columns.html#export-the-data"><i class="fa fa-check"></i><b>4.5</b> Export the data</a></li>
<li class="chapter" data-level="4.6" data-path="columns.html"><a href="columns.html#turn-in-wells"><i class="fa fa-check"></i><b>4.6</b> Turn in wells</a></li>
<li class="chapter" data-level="4.7" data-path="columns.html"><a href="columns.html#practice-assignment-clean-census-names"><i class="fa fa-check"></i><b>4.7</b> Practice assignment: Clean census names</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="transform.html"><a href="transform.html"><i class="fa fa-check"></i><b>5</b> Transform</a><ul>
<li class="chapter" data-level="5.1" data-path="transform.html"><a href="transform.html#goals-for-the-section"><i class="fa fa-check"></i><b>5.1</b> Goals for the section</a></li>
<li class="chapter" data-level="5.2" data-path="transform.html"><a href="transform.html#introducing-dplyr"><i class="fa fa-check"></i><b>5.2</b> Introducing dplyr</a></li>
<li class="chapter" data-level="5.3" data-path="transform.html"><a href="transform.html#start-a-new-r-notebook"><i class="fa fa-check"></i><b>5.3</b> Start a new R Notebook</a></li>
<li class="chapter" data-level="5.4" data-path="transform.html"><a href="transform.html#record-our-goals"><i class="fa fa-check"></i><b>5.4</b> Record our goals</a></li>
<li class="chapter" data-level="5.5" data-path="transform.html"><a href="transform.html#name-your-code-chunks"><i class="fa fa-check"></i><b>5.5</b> Name your code chunks</a></li>
<li class="chapter" data-level="5.6" data-path="transform.html"><a href="transform.html#import-our-data"><i class="fa fa-check"></i><b>5.6</b> Import our data</a></li>
<li class="chapter" data-level="5.7" data-path="transform.html"><a href="transform.html#filter"><i class="fa fa-check"></i><b>5.7</b> Filter()</a><ul>
<li class="chapter" data-level="5.7.1" data-path="transform.html"><a href="transform.html#filter-your-turn"><i class="fa fa-check"></i><b>5.7.1</b> Filter your turn</a></li>
<li class="chapter" data-level="5.7.2" data-path="transform.html"><a href="transform.html#common-mistakes-with-filter"><i class="fa fa-check"></i><b>5.7.2</b> Common mistakes with filter</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="transform.html"><a href="transform.html#combining-filters"><i class="fa fa-check"></i><b>5.8</b> Combining filters</a><ul>
<li class="chapter" data-level="5.8.1" data-path="transform.html"><a href="transform.html#your-turn-combining-filters"><i class="fa fa-check"></i><b>5.8.1</b> Your turn combining filters</a></li>
<li class="chapter" data-level="5.8.2" data-path="transform.html"><a href="transform.html#common-mistakes-with-combining-filters"><i class="fa fa-check"></i><b>5.8.2</b> Common mistakes with combining filters</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="transform.html"><a href="transform.html#arrange"><i class="fa fa-check"></i><b>5.9</b> Arrange()</a></li>
<li class="chapter" data-level="5.10" data-path="transform.html"><a href="transform.html#multi-step-operations"><i class="fa fa-check"></i><b>5.10</b> Multi-step operations</a><ul>
<li class="chapter" data-level="5.10.1" data-path="transform.html"><a href="transform.html#your-turn-to-combine-and-pipe"><i class="fa fa-check"></i><b>5.10.1</b> Your turn to combine and pipe</a></li>
</ul></li>
<li class="chapter" data-level="5.11" data-path="transform.html"><a href="transform.html#select"><i class="fa fa-check"></i><b>5.11</b> Select()</a></li>
<li class="chapter" data-level="5.12" data-path="transform.html"><a href="transform.html#mutate"><i class="fa fa-check"></i><b>5.12</b> Mutate()</a><ul>
<li class="chapter" data-level="5.12.1" data-path="transform.html"><a href="transform.html#your-turn-to-mutate"><i class="fa fa-check"></i><b>5.12.1</b> Your turn to mutate</a></li>
<li class="chapter" data-level="5.12.2" data-path="transform.html"><a href="transform.html#document-and-save-new-columns"><i class="fa fa-check"></i><b>5.12.2</b> Document and save new columns</a></li>
<li class="chapter" data-level="5.12.3" data-path="transform.html"><a href="transform.html#export-the-mutated-data"><i class="fa fa-check"></i><b>5.12.3</b> Export the mutated data</a></li>
</ul></li>
<li class="chapter" data-level="5.13" data-path="transform.html"><a href="transform.html#summarize"><i class="fa fa-check"></i><b>5.13</b> Summarize()</a><ul>
<li class="chapter" data-level="5.13.1" data-path="transform.html"><a href="transform.html#ignoring-na"><i class="fa fa-check"></i><b>5.13.1</b> ignoring na</a></li>
<li class="chapter" data-level="5.13.2" data-path="transform.html"><a href="transform.html#your-turn-with-summarise"><i class="fa fa-check"></i><b>5.13.2</b> Your turn with summarise</a></li>
</ul></li>
<li class="chapter" data-level="5.14" data-path="transform.html"><a href="transform.html#group_by"><i class="fa fa-check"></i><b>5.14</b> Group_by()</a><ul>
<li class="chapter" data-level="5.14.1" data-path="transform.html"><a href="transform.html#group-and-count"><i class="fa fa-check"></i><b>5.14.1</b> Group and count</a></li>
<li class="chapter" data-level="5.14.2" data-path="transform.html"><a href="transform.html#your-turn-to-group"><i class="fa fa-check"></i><b>5.14.2</b> Your turn to group</a></li>
<li class="chapter" data-level="5.14.3" data-path="transform.html"><a href="transform.html#counting-only"><i class="fa fa-check"></i><b>5.14.3</b> Counting only</a></li>
</ul></li>
<li class="chapter" data-level="5.15" data-path="transform.html"><a href="transform.html#transform-review"><i class="fa fa-check"></i><b>5.15</b> Transform review</a></li>
<li class="chapter" data-level="5.16" data-path="transform.html"><a href="transform.html#turn-in-your-in-class-project"><i class="fa fa-check"></i><b>5.16</b> Turn in your in-class project</a></li>
<li class="chapter" data-level="5.17" data-path="transform.html"><a href="transform.html#practice-assignment-transforms-on-census"><i class="fa fa-check"></i><b>5.17</b> Practice assignment: Transforms on census</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="cleaning.html"><a href="cleaning.html"><i class="fa fa-check"></i><b>6</b> Cleaning</a><ul>
<li class="chapter" data-level="6.1" data-path="cleaning.html"><a href="cleaning.html#goals-for-this-section-2"><i class="fa fa-check"></i><b>6.1</b> Goals for this section</a><ul>
<li class="chapter" data-level="6.1.1" data-path="cleaning.html"><a href="cleaning.html#resources"><i class="fa fa-check"></i><b>6.1.1</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="cleaning.html"><a href="cleaning.html#taking-stock-of-the-data"><i class="fa fa-check"></i><b>6.2</b> Taking stock of the data</a></li>
<li class="chapter" data-level="6.3" data-path="cleaning.html"><a href="cleaning.html#setup-and-import"><i class="fa fa-check"></i><b>6.3</b> Setup and import</a></li>
<li class="chapter" data-level="6.4" data-path="cleaning.html"><a href="cleaning.html#clean-the-proposed_use-column"><i class="fa fa-check"></i><b>6.4</b> Clean the proposed_use column</a><ul>
<li class="chapter" data-level="6.4.1" data-path="cleaning.html"><a href="cleaning.html#count-values-in-a-column"><i class="fa fa-check"></i><b>6.4.1</b> Count values in a column</a></li>
<li class="chapter" data-level="6.4.2" data-path="cleaning.html"><a href="cleaning.html#change-values-in-a-column"><i class="fa fa-check"></i><b>6.4.2</b> Change values in a column</a></li>
<li class="chapter" data-level="6.4.3" data-path="cleaning.html"><a href="cleaning.html#reassign-your-changes-back-to-the-data-frame"><i class="fa fa-check"></i><b>6.4.3</b> Reassign your changes back to the data frame</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="cleaning.html"><a href="cleaning.html#export-your-updated-data-frame"><i class="fa fa-check"></i><b>6.5</b> Export your updated data frame</a></li>
<li class="chapter" data-level="6.6" data-path="cleaning.html"><a href="cleaning.html#future-addition"><i class="fa fa-check"></i><b>6.6</b> Future addition</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="graphics.html"><a href="graphics.html"><i class="fa fa-check"></i><b>7</b> Graphics</a><ul>
<li class="chapter" data-level="7.1" data-path="graphics.html"><a href="graphics.html#goals-for-this-section-3"><i class="fa fa-check"></i><b>7.1</b> Goals for this section</a></li>
<li class="chapter" data-level="7.2" data-path="graphics.html"><a href="graphics.html#introduction-ggplot"><i class="fa fa-check"></i><b>7.2</b> Introduction ggplot</a></li>
<li class="chapter" data-level="7.3" data-path="graphics.html"><a href="graphics.html#the-basic-ggplot-template"><i class="fa fa-check"></i><b>7.3</b> The basic ggplot template</a></li>
<li class="chapter" data-level="7.4" data-path="graphics.html"><a href="graphics.html#lets-plot"><i class="fa fa-check"></i><b>7.4</b> Let’s plot!</a><ul>
<li class="chapter" data-level="7.4.1" data-path="graphics.html"><a href="graphics.html#set-up-our-notebook"><i class="fa fa-check"></i><b>7.4.1</b> Set up our Notebook</a></li>
<li class="chapter" data-level="7.4.2" data-path="graphics.html"><a href="graphics.html#scatterplot"><i class="fa fa-check"></i><b>7.4.2</b> Scatterplot</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="graphics.html"><a href="graphics.html#plotting-our-wells-data"><i class="fa fa-check"></i><b>7.5</b> Plotting our wells data</a><ul>
<li class="chapter" data-level="7.5.1" data-path="graphics.html"><a href="graphics.html#total-wells-per-county"><i class="fa fa-check"></i><b>7.5.1</b> Total wells per county</a></li>
<li class="chapter" data-level="7.5.2" data-path="graphics.html"><a href="graphics.html#add-a-layer-of-text-labels"><i class="fa fa-check"></i><b>7.5.2</b> Add a layer of text labels</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="graphics.html"><a href="graphics.html#wells-per-county-over-time"><i class="fa fa-check"></i><b>7.6</b> Wells per county over time</a><ul>
<li class="chapter" data-level="7.6.1" data-path="graphics.html"><a href="graphics.html#work-up-the-data-frame"><i class="fa fa-check"></i><b>7.6.1</b> Work up the data frame</a></li>
<li class="chapter" data-level="7.6.2" data-path="graphics.html"><a href="graphics.html#draw-the-plot"><i class="fa fa-check"></i><b>7.6.2</b> Draw the plot</a></li>
<li class="chapter" data-level="7.6.3" data-path="graphics.html"><a href="graphics.html#your-turn-add-layers"><i class="fa fa-check"></i><b>7.6.3</b> Your turn: Add layers</a></li>
<li class="chapter" data-level="7.6.4" data-path="graphics.html"><a href="graphics.html#dates-as-numbers-and-the-problems-they-cause"><i class="fa fa-check"></i><b>7.6.4</b> Dates as numbers and the problems they cause</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="graphics.html"><a href="graphics.html#your-turn-build-a-line-chart"><i class="fa fa-check"></i><b>7.7</b> Your turn: Build a line chart</a></li>
<li class="chapter" data-level="7.8" data-path="graphics.html"><a href="graphics.html#review-of-ggplot"><i class="fa fa-check"></i><b>7.8</b> Review of ggplot</a></li>
<li class="chapter" data-level="7.9" data-path="graphics.html"><a href="graphics.html#plotly-for-more-interactive-graphics"><i class="fa fa-check"></i><b>7.9</b> Plotly for more interactive graphics</a><ul>
<li class="chapter" data-level="7.9.1" data-path="graphics.html"><a href="graphics.html#ggplotly"><i class="fa fa-check"></i><b>7.9.1</b> ggplotly</a></li>
<li class="chapter" data-level="7.9.2" data-path="graphics.html"><a href="graphics.html#more-with-plot_ly-function"><i class="fa fa-check"></i><b>7.9.2</b> More with <code>plot_ly()</code> function</a></li>
<li class="chapter" data-level="7.9.3" data-path="graphics.html"><a href="graphics.html#plotlys-freemium-model"><i class="fa fa-check"></i><b>7.9.3</b> Plotly’s freemium model</a></li>
</ul></li>
<li class="chapter" data-level="7.10" data-path="graphics.html"><a href="graphics.html#resources-and-further-reading"><i class="fa fa-check"></i><b>7.10</b> Resources and further reading</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="tidy.html"><a href="tidy.html"><i class="fa fa-check"></i><b>8</b> Tidy data</a><ul>
<li class="chapter" data-level="8.1" data-path="tidy.html"><a href="tidy.html#goals-for-this-section-4"><i class="fa fa-check"></i><b>8.1</b> Goals for this section</a></li>
<li class="chapter" data-level="8.2" data-path="tidy.html"><a href="tidy.html#what-is-tidy-data"><i class="fa fa-check"></i><b>8.2</b> What is tidy data</a></li>
<li class="chapter" data-level="8.3" data-path="tidy.html"><a href="tidy.html#tidyr-package"><i class="fa fa-check"></i><b>8.3</b> Tidyr package</a></li>
<li class="chapter" data-level="8.4" data-path="tidy.html"><a href="tidy.html#the-tidyr-verbs"><i class="fa fa-check"></i><b>8.4</b> The tidyr verbs</a></li>
<li class="chapter" data-level="8.5" data-path="tidy.html"><a href="tidy.html#set-up-the-mixbev-project"><i class="fa fa-check"></i><b>8.5</b> Set up the mixbev project</a></li>
<li class="chapter" data-level="8.6" data-path="tidy.html"><a href="tidy.html#create-an-explore-notebook"><i class="fa fa-check"></i><b>8.6</b> Create an explore notebook</a><ul>
<li class="chapter" data-level="8.6.1" data-path="tidy.html"><a href="tidy.html#peruse-the-data"><i class="fa fa-check"></i><b>8.6.1</b> Peruse the data</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="tidy.html"><a href="tidy.html#what-might-we-learn-about-this-dataset"><i class="fa fa-check"></i><b>8.7</b> What might we learn about this dataset</a></li>
<li class="chapter" data-level="8.8" data-path="tidy.html"><a href="tidy.html#add-years-and-months-values"><i class="fa fa-check"></i><b>8.8</b> Add years and months values</a></li>
<li class="chapter" data-level="8.9" data-path="tidy.html"><a href="tidy.html#campus-bars"><i class="fa fa-check"></i><b>8.9</b> Campus bars</a><ul>
<li class="chapter" data-level="8.9.1" data-path="tidy.html"><a href="tidy.html#total-78705-sales-leaders-in-2018"><i class="fa fa-check"></i><b>8.9.1</b> Total 78705 sales leaders in 2018</a></li>
</ul></li>
<li class="chapter" data-level="8.10" data-path="tidy.html"><a href="tidy.html#west-campus-student-hot-spots"><i class="fa fa-check"></i><b>8.10</b> West Campus student hot spots</a></li>
<li class="chapter" data-level="8.11" data-path="tidy.html"><a href="tidy.html#campus-area-bar-sales-over-time"><i class="fa fa-check"></i><b>8.11</b> Campus-area bar sales over time</a><ul>
<li class="chapter" data-level="8.11.1" data-path="tidy.html"><a href="tidy.html#visualizing-your-visualization"><i class="fa fa-check"></i><b>8.11.1</b> Visualizing your visualization</a></li>
<li class="chapter" data-level="8.11.2" data-path="tidy.html"><a href="tidy.html#what-did-we-find"><i class="fa fa-check"></i><b>8.11.2</b> What did we find?</a></li>
</ul></li>
<li class="chapter" data-level="8.12" data-path="tidy.html"><a href="tidy.html#types-of-sales-within-student-bars"><i class="fa fa-check"></i><b>8.12</b> Types of sales within student bars</a></li>
<li class="chapter" data-level="8.13" data-path="tidy.html"><a href="tidy.html#how-gather-works"><i class="fa fa-check"></i><b>8.13</b> How gather() works</a></li>
<li class="chapter" data-level="8.14" data-path="tidy.html"><a href="tidy.html#applying-gather-to-beer-wine-and-liquor"><i class="fa fa-check"></i><b>8.14</b> Applying gather() to beer, wine and liquor</a><ul>
<li class="chapter" data-level="8.14.1" data-path="tidy.html"><a href="tidy.html#plot-sales-by-type-for-a-single-campus-area-bar"><i class="fa fa-check"></i><b>8.14.1</b> Plot sales by type for a single campus-area bar</a></li>
<li class="chapter" data-level="8.14.2" data-path="tidy.html"><a href="tidy.html#plot-sales-by-type-for-multiple-campus-area-bars"><i class="fa fa-check"></i><b>8.14.2</b> Plot sales by type for multiple campus-area bars</a></li>
<li class="chapter" data-level="8.14.3" data-path="tidy.html"><a href="tidy.html#what-did-we-learn"><i class="fa fa-check"></i><b>8.14.3</b> What did we learn?</a></li>
</ul></li>
<li class="chapter" data-level="8.15" data-path="tidy.html"><a href="tidy.html#the-spread-function"><i class="fa fa-check"></i><b>8.15</b> The spread() function</a></li>
<li class="chapter" data-level="8.16" data-path="tidy.html"><a href="tidy.html#practice-assignment-exploring-the-top-seller"><i class="fa fa-check"></i><b>8.16</b> Practice assignment: Exploring the top seller</a></li>
<li class="chapter" data-level="8.17" data-path="tidy.html"><a href="tidy.html#bonus-top-5-sellers-in-travis-county-over-three-years"><i class="fa fa-check"></i><b>8.17</b> Bonus: Top 5 sellers in Travis County over three years</a></li>
<li class="chapter" data-level="8.18" data-path="tidy.html"><a href="tidy.html#bonus-total-sales-by-county"><i class="fa fa-check"></i><b>8.18</b> Bonus: Total sales by county</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="reordering-factors.html"><a href="reordering-factors.html"><i class="fa fa-check"></i><b>9</b> Reordering factors</a><ul>
<li class="chapter" data-level="9.1" data-path="reordering-factors.html"><a href="reordering-factors.html#goals-for-this-section-5"><i class="fa fa-check"></i><b>9.1</b> Goals for this section</a></li>
<li class="chapter" data-level="9.2" data-path="reordering-factors.html"><a href="reordering-factors.html#create-our-survey-project"><i class="fa fa-check"></i><b>9.2</b> Create our survey project</a><ul>
<li class="chapter" data-level="9.2.1" data-path="reordering-factors.html"><a href="reordering-factors.html#setup"><i class="fa fa-check"></i><b>9.2.1</b> Setup</a></li>
<li class="chapter" data-level="9.2.2" data-path="reordering-factors.html"><a href="reordering-factors.html#libraries"><i class="fa fa-check"></i><b>9.2.2</b> Libraries</a></li>
<li class="chapter" data-level="9.2.3" data-path="reordering-factors.html"><a href="reordering-factors.html#import-the-data"><i class="fa fa-check"></i><b>9.2.3</b> Import the data</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="reordering-factors.html"><a href="reordering-factors.html#figuring-out-our-data-shape"><i class="fa fa-check"></i><b>9.3</b> Figuring out our data shape</a></li>
<li class="chapter" data-level="9.4" data-path="reordering-factors.html"><a href="reordering-factors.html#charting-the-popularity-of-princess"><i class="fa fa-check"></i><b>9.4</b> Charting the popularity of princess</a></li>
<li class="chapter" data-level="9.5" data-path="reordering-factors.html"><a href="reordering-factors.html#create-our-princess-plot"><i class="fa fa-check"></i><b>9.5</b> Create our princess plot</a><ul>
<li class="chapter" data-level="9.5.1" data-path="reordering-factors.html"><a href="reordering-factors.html#labels-and-titles"><i class="fa fa-check"></i><b>9.5.1</b> Labels and titles</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="reordering-factors.html"><a href="reordering-factors.html#factors"><i class="fa fa-check"></i><b>9.6</b> Factors</a></li>
<li class="chapter" data-level="9.7" data-path="reordering-factors.html"><a href="reordering-factors.html#reorder-princess"><i class="fa fa-check"></i><b>9.7</b> Reorder princess</a></li>
<li class="chapter" data-level="9.8" data-path="reordering-factors.html"><a href="reordering-factors.html#factors-recap"><i class="fa fa-check"></i><b>9.8</b> Factors recap</a></li>
<li class="chapter" data-level="9.9" data-path="reordering-factors.html"><a href="reordering-factors.html#practice-make-an-ice-cream-chart"><i class="fa fa-check"></i><b>9.9</b> Practice: Make an ice cream chart</a><ul>
<li class="chapter" data-level="9.9.1" data-path="reordering-factors.html"><a href="reordering-factors.html#turn-in-this-project"><i class="fa fa-check"></i><b>9.9.1</b> Turn in this project</a></li>
</ul></li>
<li class="chapter" data-level="9.10" data-path="reordering-factors.html"><a href="reordering-factors.html#resources-1"><i class="fa fa-check"></i><b>9.10</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="joins.html"><a href="joins.html"><i class="fa fa-check"></i><b>10</b> Joins</a><ul>
<li class="chapter" data-level="10.1" data-path="joins.html"><a href="joins.html#goals-for-this-section-6"><i class="fa fa-check"></i><b>10.1</b> Goals for this section</a></li>
<li class="chapter" data-level="10.2" data-path="joins.html"><a href="joins.html#project-setup"><i class="fa fa-check"></i><b>10.2</b> Project setup</a><ul>
<li class="chapter" data-level="10.2.1" data-path="joins.html"><a href="joins.html#download-the-data"><i class="fa fa-check"></i><b>10.2.1</b> Download the data</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="joins.html"><a href="joins.html#the-story"><i class="fa fa-check"></i><b>10.3</b> The story</a></li>
<li class="chapter" data-level="10.4" data-path="joins.html"><a href="joins.html#explore-the-data"><i class="fa fa-check"></i><b>10.4</b> Explore the data</a><ul>
<li class="chapter" data-level="10.4.1" data-path="joins.html"><a href="joins.html#third-down-conversions"><i class="fa fa-check"></i><b>10.4.1</b> Third-down conversions</a></li>
<li class="chapter" data-level="10.4.2" data-path="joins.html"><a href="joins.html#scoring"><i class="fa fa-check"></i><b>10.4.2</b> Scoring</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="joins.html"><a href="joins.html#about-joins"><i class="fa fa-check"></i><b>10.5</b> About joins</a></li>
<li class="chapter" data-level="10.6" data-path="joins.html"><a href="joins.html#build-our-scatterplot"><i class="fa fa-check"></i><b>10.6</b> Build our scatterplot</a><ul>
<li class="chapter" data-level="10.6.1" data-path="joins.html"><a href="joins.html#add-a-fit-line"><i class="fa fa-check"></i><b>10.6.1</b> Add a fit line</a></li>
<li class="chapter" data-level="10.6.2" data-path="joins.html"><a href="joins.html#run-a-correlation-test"><i class="fa fa-check"></i><b>10.6.2</b> Run a correlation test</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="joins.html"><a href="joins.html#how-does-texas-compare"><i class="fa fa-check"></i><b>10.7</b> How does Texas compare?</a></li>
<li class="chapter" data-level="10.8" data-path="joins.html"><a href="joins.html#correlaton-test-for-texas"><i class="fa fa-check"></i><b>10.8</b> Correlaton test for Texas</a></li>
<li class="chapter" data-level="10.9" data-path="joins.html"><a href="joins.html#practice-1-compare-penn-state"><i class="fa fa-check"></i><b>10.9</b> Practice 1: Compare Penn State</a></li>
<li class="chapter" data-level="10.10" data-path="joins.html"><a href="joins.html#practice-2-penalties-vs-scoring"><i class="fa fa-check"></i><b>10.10</b> Practice 2: Penalties vs scoring</a></li>
<li class="chapter" data-level="10.11" data-path="joins.html"><a href="joins.html#using-bind_rows-to-merge-data-sets"><i class="fa fa-check"></i><b>10.11</b> Using bind_rows() to merge data sets</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="census.html"><a href="census.html"><i class="fa fa-check"></i><b>11</b> Census</a><ul>
<li class="chapter" data-level="11.1" data-path="census.html"><a href="census.html#goals-of-this-section"><i class="fa fa-check"></i><b>11.1</b> Goals of this section</a></li>
<li class="chapter" data-level="11.2" data-path="census.html"><a href="census.html#census-bureau-programs"><i class="fa fa-check"></i><b>11.2</b> Census Bureau programs</a><ul>
<li class="chapter" data-level="11.2.1" data-path="census.html"><a href="census.html#decennial-census"><i class="fa fa-check"></i><b>11.2.1</b> Decennial Census</a></li>
<li class="chapter" data-level="11.2.2" data-path="census.html"><a href="census.html#american-community-survey"><i class="fa fa-check"></i><b>11.2.2</b> American Community Survey</a></li>
<li class="chapter" data-level="11.2.3" data-path="census.html"><a href="census.html#populaton-estimates-program"><i class="fa fa-check"></i><b>11.2.3</b> Populaton Estimates Program</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="census.html"><a href="census.html#using-the-new-data-portal"><i class="fa fa-check"></i><b>11.3</b> Using the new data portal</a><ul>
<li class="chapter" data-level="11.3.1" data-path="census.html"><a href="census.html#tips-about-using-downloaded-portal-data-in-r"><i class="fa fa-check"></i><b>11.3.1</b> Tips about using downloaded portal data in R</a></li>
<li class="chapter" data-level="11.3.2" data-path="census.html"><a href="census.html#importing-downloaded-data"><i class="fa fa-check"></i><b>11.3.2</b> Importing downloaded data</a></li>
<li class="chapter" data-level="11.3.3" data-path="census.html"><a href="census.html#fields-made-to-join-with-other-data"><i class="fa fa-check"></i><b>11.3.3</b> Fields made to join with other data</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="census.html"><a href="census.html#using-the-census-api-in-r"><i class="fa fa-check"></i><b>11.4</b> Using the Census API in R</a><ul>
<li class="chapter" data-level="11.4.1" data-path="census.html"><a href="census.html#setting-up-an-api-key"><i class="fa fa-check"></i><b>11.4.1</b> Setting up an API key</a></li>
<li class="chapter" data-level="11.4.2" data-path="census.html"><a href="census.html#the-censusapi-package"><i class="fa fa-check"></i><b>11.4.2</b> The censusapi package</a></li>
<li class="chapter" data-level="11.4.3" data-path="census.html"><a href="census.html#the-tidycensus-package"><i class="fa fa-check"></i><b>11.4.3</b> The tidycensus package</a></li>
<li class="chapter" data-level="11.4.4" data-path="census.html"><a href="census.html#adding-geometry-to-tidycensus"><i class="fa fa-check"></i><b>11.4.4</b> Adding geometry to tidycensus</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="census.html"><a href="census.html#interactive-maps-with-leaflet"><i class="fa fa-check"></i><b>11.5</b> Interactive maps with leaflet</a></li>
<li class="chapter" data-level="11.6" data-path="census.html"><a href="census.html#resources-2"><i class="fa fa-check"></i><b>11.6</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html"><i class="fa fa-check"></i><b>12</b> How to tackle a new dataset</a><ul>
<li class="chapter" data-level="12.1" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#start-by-listing-questions"><i class="fa fa-check"></i><b>12.1</b> Start by listing questions</a></li>
<li class="chapter" data-level="12.2" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#understand-your-data"><i class="fa fa-check"></i><b>12.2</b> Understand your data</a></li>
<li class="chapter" data-level="12.3" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#counting-and-aggregation"><i class="fa fa-check"></i><b>12.3</b> Counting and aggregation</a><ul>
<li class="chapter" data-level="12.3.1" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#counting-rows-based-on-a-column"><i class="fa fa-check"></i><b>12.3.1</b> Counting rows based on a column</a></li>
<li class="chapter" data-level="12.3.2" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#sum-mean-and-other-aggregations"><i class="fa fa-check"></i><b>12.3.2</b> Sum, mean and other aggregations</a></li>
<li class="chapter" data-level="12.3.3" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#creating-columns-to-show-difference"><i class="fa fa-check"></i><b>12.3.3</b> Creating columns to show difference</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#cleaning-up-categorical-data"><i class="fa fa-check"></i><b>12.4</b> Cleaning up categorical data</a></li>
<li class="chapter" data-level="12.5" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#time-as-a-variable"><i class="fa fa-check"></i><b>12.5</b> Time as a variable</a></li>
<li class="chapter" data-level="12.6" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#explore-the-distributions-in-your-data"><i class="fa fa-check"></i><b>12.6</b> Explore the distributions in your data</a><ul>
<li class="chapter" data-level="12.6.1" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#more-on-histograms"><i class="fa fa-check"></i><b>12.6.1</b> More on histograms</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="publishing-your-findings.html"><a href="publishing-your-findings.html"><i class="fa fa-check"></i><b>13</b> Publishing your findings</a><ul>
<li class="chapter" data-level="13.1" data-path="publishing-your-findings.html"><a href="publishing-your-findings.html#examples"><i class="fa fa-check"></i><b>13.1</b> Examples</a></li>
<li class="chapter" data-level="13.2" data-path="publishing-your-findings.html"><a href="publishing-your-findings.html#how-to-publish-your-projects"><i class="fa fa-check"></i><b>13.2</b> How to publish your projects</a><ul>
<li class="chapter" data-level="13.2.1" data-path="publishing-your-findings.html"><a href="publishing-your-findings.html#using-github-pages"><i class="fa fa-check"></i><b>13.2.1</b> Using Github Pages</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="publishing-your-findings.html"><a href="publishing-your-findings.html#making-branded-graphics"><i class="fa fa-check"></i><b>13.3</b> Making branded graphics</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="chart-examples.html"><a href="chart-examples.html"><i class="fa fa-check"></i><b>14</b> Chart examples</a><ul>
<li class="chapter" data-level="14.1" data-path="chart-examples.html"><a href="chart-examples.html#resources-3"><i class="fa fa-check"></i><b>14.1</b> Resources</a></li>
<li class="chapter" data-level="14.2" data-path="chart-examples.html"><a href="chart-examples.html#bar-charts"><i class="fa fa-check"></i><b>14.2</b> Bar charts</a><ul>
<li class="chapter" data-level="14.2.1" data-path="chart-examples.html"><a href="chart-examples.html#explanaton"><i class="fa fa-check"></i><b>14.2.1</b> Explanaton</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="chart-examples.html"><a href="chart-examples.html#column-chart"><i class="fa fa-check"></i><b>14.3</b> Column chart</a></li>
<li class="chapter" data-level="14.4" data-path="chart-examples.html"><a href="chart-examples.html#a-line-chart"><i class="fa fa-check"></i><b>14.4</b> A line chart</a><ul>
<li class="chapter" data-level="14.4.1" data-path="chart-examples.html"><a href="chart-examples.html#explanation"><i class="fa fa-check"></i><b>14.4.1</b> Explanation</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="chart-examples.html"><a href="chart-examples.html#scatterplot-1"><i class="fa fa-check"></i><b>14.5</b> Scatterplot</a><ul>
<li class="chapter" data-level="14.5.1" data-path="chart-examples.html"><a href="chart-examples.html#explanation-1"><i class="fa fa-check"></i><b>14.5.1</b> Explanation</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="chart-examples.html"><a href="chart-examples.html#histogram"><i class="fa fa-check"></i><b>14.6</b> Histogram</a></li>
<li class="chapter" data-level="14.7" data-path="chart-examples.html"><a href="chart-examples.html#titles-labels-and-other-cleanup"><i class="fa fa-check"></i><b>14.7</b> Titles, labels and other cleanup</a><ul>
<li class="chapter" data-level="14.7.1" data-path="chart-examples.html"><a href="chart-examples.html#title-and-axis-labels"><i class="fa fa-check"></i><b>14.7.1</b> Title and axis labels</a></li>
<li class="chapter" data-level="14.7.2" data-path="chart-examples.html"><a href="chart-examples.html#flip-the-graphic"><i class="fa fa-check"></i><b>14.7.2</b> Flip the graphic</a></li>
<li class="chapter" data-level="14.7.3" data-path="chart-examples.html"><a href="chart-examples.html#fix-exponential-numbers-on-an-axis"><i class="fa fa-check"></i><b>14.7.3</b> Fix exponential numbers on an axis</a></li>
</ul></li>
<li class="chapter" data-level="14.8" data-path="chart-examples.html"><a href="chart-examples.html#interactivity-with-plotly"><i class="fa fa-check"></i><b>14.8</b> Interactivity with plotly</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="verbs.html"><a href="verbs.html"><i class="fa fa-check"></i><b>15</b> Verbs</a><ul>
<li class="chapter" data-level="15.1" data-path="verbs.html"><a href="verbs.html#importexport"><i class="fa fa-check"></i><b>15.1</b> Import/Export</a></li>
<li class="chapter" data-level="15.2" data-path="verbs.html"><a href="verbs.html#data-manipulation"><i class="fa fa-check"></i><b>15.2</b> Data manipulation</a></li>
<li class="chapter" data-level="15.3" data-path="verbs.html"><a href="verbs.html#aggregation"><i class="fa fa-check"></i><b>15.3</b> Aggregation</a></li>
<li class="chapter" data-level="15.4" data-path="verbs.html"><a href="verbs.html#math"><i class="fa fa-check"></i><b>15.4</b> Math</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html"><i class="fa fa-check"></i>Notes about future sessions</a><ul>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#maps"><i class="fa fa-check"></i>Maps</a></li>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#joins-1"><i class="fa fa-check"></i>Joins</a></li>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#data-packages"><i class="fa fa-check"></i>Data packages</a><ul>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#twitter"><i class="fa fa-check"></i>Twitter</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#tools-for-pdfs"><i class="fa fa-check"></i>Tools for PDFs</a></li>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#more-graphics-ideas"><i class="fa fa-check"></i>More graphics ideas</a></li>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#matt-waite-ideas-yet-to-incorporate"><i class="fa fa-check"></i>Matt Waite ideas yet to incorporate</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Reporting with Data in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="graphics" class="section level1">
<h1><span class="header-section-number">Chapter 7</span> Graphics</h1>
<div id="goals-for-this-section-3" class="section level2">
<h2><span class="header-section-number">7.1</span> Goals for this section</h2>
<ul>
<li>An introduction to the Grammar of Graphics</li>
<li>We’ll make charts!</li>
</ul>
</div>
<div id="introduction-ggplot" class="section level2">
<h2><span class="header-section-number">7.2</span> Introduction ggplot</h2>
<p><a href="https://ggplot2.tidyverse.org/">ggplot2</a> is the data visualization library within Hadley Wickham’s <a href="https://www.tidyverse.org/">tidyverse</a>. It uses a concept called the <a href="https://byrneslab.net/classes/biol607/readings/wickham_layered-grammar.pdf">Grammar of Graphics</a>, the idea that you can build every graph from the same components: a data set, a coordinate system, and geoms – the visual marks that represent data points. With a hat tip to <a href="http://www.mattwaite.com/">Matt Waite</a>, the main concepts are:</p>
<ul>
<li><strong>data</strong>: which data frame you are pulling from</li>
<li><strong>aesthetics</strong>: the specific data from the data frame which we are going to plot</li>
<li><strong>geometries</strong>: the shape the data is going to take</li>
<li><strong>scales</strong>: any transformations we might make on the data</li>
<li><strong>layers</strong>: how we might lay multiple geometries over top of each other to reveal new information.</li>
<li><strong>facets</strong>: which means how we might graph many elements of the same data set in the same space</li>
</ul>
<p>The challenge to understand here is for every graphic, we start with the data, and then describe how to layer plots or pieces on top of that data.</p>
</div>
<div id="the-basic-ggplot-template" class="section level2">
<h2><span class="header-section-number">7.3</span> The basic ggplot template</h2>
<p>The template for a basic plot is this. (The <code>&lt;&gt;</code> denote that we are inserting values there.)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> <span class="op">&lt;</span>DATA<span class="op">&gt;</span>, <span class="kw">aes</span>(<span class="dt">mapping =</span> <span class="op">&lt;</span>MAPPINGS<span class="op">&gt;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="er">&lt;</span>GEOM<span class="op">&gt;</span>(<span class="op">&lt;</span>ADDITONAL_MAPPINGS<span class="op">&gt;</span>)</code></pre></div>
<ul>
<li><strong><code>ggplot()</code></strong> is our function. We feed into it the data we wish to plot.</li>
<li><strong><code>aes()</code></strong> stands for “aesthetics”, and it describes the column of data we want to plot, and how, like which column is on the <strong>x axis</strong> and which is on the <strong>y axis</strong>. These are called <strong>mappings</strong>, which we show in our template with <strong><code>&lt;MAPPINGS&gt;</code></strong>. They typically look like this: <code>aes(x = col_name_x, y = col_name_y)</code>. Now matter what type of chart we are building (bar chart, scatterplot, etc) we have to tell it which columns to show on the chart.</li>
<li>The <strong><code>+</code></strong> is the equivalent of <code>%&gt;%</code> in our tidyverse data. It means we are adding a layer, and it should always be at the end of the line, not at the beginning of the next.</li>
<li><strong><code>&lt;GEOM_FUNCTION&gt;</code></strong> is the type of chart or addition we are adding. They all start with the term <strong>geom_</strong> like <strong><code>geom_bar</code></strong>, which is what we will build with this example. It will take the mappings we supplied and plot them on the type of <strong>geom_</strong> we choose.</li>
<li><strong><code>&lt;ADDITIONAL MAPPINGS&gt;</code></strong> if a geom_ requires it, we can specify additional columns/axis mapping combinations to that <strong>geom_</strong>. We don’t always have or need them.</li>
</ul>
<p>There are some ways to simplify this, and some ways to complicate it. Let’s simplify first:</p>
<ul>
<li>It is implied that the first thing fed to <code>ggplot</code> is the data, so you don’t have to write out <code>data =</code> unless there is ambiguity.</li>
<li>The <code>aes()</code> values are also implied as mappings, so you don’t have to write out <code>mapping =</code> unless there is ambiguity.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="op">&lt;</span>DATA<span class="op">&gt;</span>, <span class="kw">aes</span>(<span class="op">&lt;</span>MAPPINGS<span class="op">&gt;</span>) <span class="op">+</span>
<span class="st">  </span><span class="er">&lt;</span>GEOM<span class="op">&gt;</span>
)</code></pre></div>
<p>One of the ways we make things complicated, is we layer different geometries. We might start with a scatterplot, and then add a reference line on top of it, which is a new geometry. Each <strong>goem_</strong> can specify their own mappings.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="op">&lt;</span>DATA<span class="op">&gt;</span>, <span class="kw">aes</span>(<span class="op">&lt;</span>MAPPINGS<span class="op">&gt;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="er">&lt;</span>GEOM_FUNCTION<span class="op">&gt;</span>(<span class="kw">aes</span>(<span class="op">&lt;</span>SPECIFIC_MAPPINGS<span class="op">&gt;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="er">&lt;</span>GEOM_FUNCTION<span class="op">&gt;</span>(<span class="kw">aes</span>(<span class="op">&lt;</span>SPECIFIC_MAPPINGS<span class="op">&gt;</span>))</code></pre></div>
</div>
<div id="lets-plot" class="section level2">
<h2><span class="header-section-number">7.4</span> Let’s plot!</h2>
<div id="set-up-our-notebook" class="section level3">
<h3><span class="header-section-number">7.4.1</span> Set up our Notebook</h3>
<ul>
<li>Create a new RNotebook. Title it “Wells visualizations” and name the file <code>04-charts.Rmd</code>.</li>
<li>Load the following libraries: tidyverse, lubridate.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
<span class="kw">library</span>(lubridate)</code></pre></div>
</div>
<div id="scatterplot" class="section level3">
<h3><span class="header-section-number">7.4.2</span> Scatterplot</h3>
<p>One of the better ways to see this in action for the first time is build a scatterplot showing the relationship between two numbers. Unfortunately, our wells data does not have two such values, so we’ll explore this using a data set that is already built into ggplot2, <strong>mpg</strong>.</p>
<p>Take a look at the <strong>mpg</strong> by calling it like a data frame.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mpg</code></pre></div>
<p>It looks something like this, which shows the first and last couple of rows:</p>
<table>
<thead>
<tr class="header">
<th>manufacturer</th>
<th>model</th>
<th>displ</th>
<th>year</th>
<th>cyl</th>
<th>trans</th>
<th>drv</th>
<th>cty</th>
<th>hwy</th>
<th>fl</th>
<th>class</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>audi</td>
<td>a4</td>
<td>1.8</td>
<td>1999</td>
<td>4</td>
<td>auto(l5)</td>
<td>f</td>
<td>18</td>
<td>29</td>
<td>p</td>
<td>compact</td>
</tr>
<tr class="even">
<td>audi</td>
<td>a4</td>
<td>1.8</td>
<td>1999</td>
<td>4</td>
<td>manual(m5)</td>
<td>f</td>
<td>21</td>
<td>29</td>
<td>p</td>
<td>compact</td>
</tr>
<tr class="odd">
<td>audi</td>
<td>a4</td>
<td>2</td>
<td>2008</td>
<td>4</td>
<td>manual(m6)</td>
<td>f</td>
<td>20</td>
<td>31</td>
<td>p</td>
<td>compact</td>
</tr>
<tr class="even">
<td>audi</td>
<td>a4</td>
<td>2</td>
<td>2008</td>
<td>4</td>
<td>auto(av)</td>
<td>f</td>
<td>21</td>
<td>30</td>
<td>p</td>
<td>compact</td>
</tr>
<tr class="odd">
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>.</td>
<td>…</td>
<td>.</td>
<td>..</td>
<td>..</td>
<td>.</td>
<td>…</td>
</tr>
<tr class="even">
<td>volkswagen</td>
<td>passat</td>
<td>2</td>
<td>2008</td>
<td>4</td>
<td>manual(m6)</td>
<td>f</td>
<td>21</td>
<td>29</td>
<td>p</td>
<td>midsize</td>
</tr>
<tr class="odd">
<td>volkswagen</td>
<td>passat</td>
<td>2.8</td>
<td>1999</td>
<td>6</td>
<td>auto(l5)</td>
<td>f</td>
<td>16</td>
<td>26</td>
<td>p</td>
<td>midsize</td>
</tr>
<tr class="even">
<td>volkswagen</td>
<td>passat</td>
<td>2.8</td>
<td>1999</td>
<td>6</td>
<td>manual(m5)</td>
<td>f</td>
<td>18</td>
<td>26</td>
<td>p</td>
<td>midsize</td>
</tr>
<tr class="odd">
<td>volkswagen</td>
<td>passat</td>
<td>3.6</td>
<td>2008</td>
<td>6</td>
<td>auto(s6)</td>
<td>f</td>
<td>17</td>
<td>26</td>
<td>p</td>
<td>midsize</td>
</tr>
</tbody>
</table>
<p>The data is a subset of fuel economy data from 1999 and 2008 for 38 popular cars. Don’t get too hung up on the data, it is just for examples.</p>
<p>The size of an engine is shows in the column <code>displ</code>. The Audi A4 has a 1.8 liter engine. The column <code>hwy</code> is the fuel rating for highways. Well also us the <code>class</code> column, which categorizes the type of vehicle.</p>
<p>What kind of relationship might you expect between the size of the engine and highway mileage?</p>
<p>Let’s use our plot to show this. If our basic template is like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="op">&lt;</span>DATA<span class="op">&gt;</span>, <span class="kw">aes</span>(<span class="op">&lt;</span>MAPPINGS<span class="op">&gt;</span>) <span class="op">+</span>
<span class="st">  </span><span class="er">&lt;</span>GEOM<span class="op">&gt;</span></code></pre></div>
<p>Now, let’s put our data in here. Our goal here is to show how the <strong>hwy</strong> number (y axis) changes as the <strong>displ</strong> number gets bigger (x axis.)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<p>Which gets us a our first chart:</p>
<div class="figure">
<img src="images/visualize-mpg-01.png" alt="MPG: hwy vs displ" />
<p class="caption">MPG: hwy vs displ</p>
</div>
<p>We can see there is a relationships of sort here, but ggplot has some additional geometries to help us see this, including <a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html"><code>geom_smooth()</code></a>. Since we have already the mappings in the main <code>ggplot()</code> call, all we have to do is add the new geom.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_smooth</span>() <span class="co"># new plot. don&#39;t forget the + on previous line</span></code></pre></div>
<div class="figure">
<img src="images/visualize-mpg-02.png" alt="MPG: displ vs hwy with smooth line" />
<p class="caption">MPG: displ vs hwy with smooth line</p>
</div>
<p>Let’s add one more visual cue (or aesthetic) to this graphic by coloring the dots based on the <code>class</code> of the vehicle. Since we want this aesthetic to apply only to the <code>geom_point()</code>, we have to add the <code>aes()</code> value there.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> class)) <span class="op">+</span><span class="st"> </span><span class="co"># added color aesthetic</span>
<span class="st">  </span><span class="kw">geom_smooth</span>()</code></pre></div>
<div class="figure">
<img src="images/visualize-mpg-03.png" alt="MPG: disply vs mpg with class" />
<p class="caption">MPG: disply vs mpg with class</p>
</div>
<p>Looking at that graphic, what values might you want to learn more about?</p>
</div>
</div>
<div id="plotting-our-wells-data" class="section level2">
<h2><span class="header-section-number">7.5</span> Plotting our wells data</h2>
<p>For bar charts and line charts, we can return to our wells data, so let’s import what we had from our last notebook.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wells &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&quot;data-out/wells_03.rds&quot;</span>)</code></pre></div>
<div id="total-wells-per-county" class="section level3">
<h3><span class="header-section-number">7.5.1</span> Total wells per county</h3>
<div id="shape-our-data" class="section level4">
<h4><span class="header-section-number">7.5.1.1</span> Shape our data</h4>
<p>If we are plotting wells per county, we need to first build a data frame that counts the number of wells for each county. We can use the same <code>count()</code> function that we used when we cleaned our data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wells_by_county &lt;-<span class="st"> </span>wells <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">count</span>(county) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">rename</span>(<span class="dt">wells_count =</span> n)
wells_by_county</code></pre></div>
<p>Let’s break this down:</p>
<ul>
<li>The first line creates the new data frame <code>wells_by_county</code>, starting with our <code>wells</code> data frame.</li>
<li>We apply the <code>count()</code> function on the “county” column. This makes our basic pivot table.</li>
<li>On the third line, we rename the “n” column that was created by <code>count()</code>, so it is more descriptive, calling it <code>wells_count</code>.</li>
<li>So now we have a data frame with two columns: <strong>county</strong> and <strong>wells_count</strong>. We print it on the fourth line so we can inspect it.</li>
</ul>
</div>
<div id="plot-our-wells-by-county" class="section level4">
<h4><span class="header-section-number">7.5.1.2</span> Plot our wells by county</h4>
<p>Here is the verbose plot for our counties.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> wells_by_county) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> county, <span class="dt">y =</span> wells_count), <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>)</code></pre></div>
<ul>
<li>On the first line we tell <code>ggplot()</code> that we are using the we <code>wells_by_county</code> data.</li>
<li>On the next, we apply the <code>geom_bar()</code> function to make a bar chart. It needs two things:
<ul>
<li>The mapping, which are the aesthetics. We well it to plot <strong>county</strong> on the x (horizontal) axis, and <strong>wells_count</strong> on the y (vertical) axis.</li>
<li>Because <strong>county</strong> is a category instead of a number, we have to use the <code>stat = &quot;identity&quot;</code> value to describe that we are using values within county to separate the bars. This is a special thing for bar charts. One of those things that drive you nuts.</li>
</ul></li>
</ul>
<div class="figure">
<img src="images/visualize-county-plot.png" alt="Basic county plot" />
<p class="caption">Basic county plot</p>
</div>
<p>Our less verbose way to do this looks like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(wells_by_county, <span class="kw">aes</span>(<span class="dt">x=</span>county, <span class="dt">y=</span>wells_count)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>)</code></pre></div>
</div>
</div>
<div id="add-a-layer-of-text-labels" class="section level3">
<h3><span class="header-section-number">7.5.2</span> Add a layer of text labels</h3>
<p>For each new thing that we add to our graphic, we add it with <code>+</code>. In this case, we want to add number labels to show the wells_count for that county.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> wells_by_county, <span class="kw">aes</span>(<span class="dt">x =</span> county, <span class="dt">y =</span> wells_count)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label=</span>wells_count), <span class="dt">vjust=</span><span class="op">-</span><span class="fl">0.25</span>) <span class="co"># adds the numbers on bars</span></code></pre></div>
<div class="figure">
<img src="images/visualize-county-plot-labels.png" alt="Basic county plot" />
<p class="caption">Basic county plot</p>
</div>
<p>In this case, we are just adding another layer, the <code>geom_text()</code>. It requires some additional aesthetics, like what <code>label=</code> we want to use. The <code>vjust=</code> moves the numbers up a little. Change the number and see what happens.</p>
<p>The last layer we want to add here is a Title layer. The function for labels is called <code>labs()</code> and it takes an argument of <code>title = &quot;&quot;</code> You can also change your <code>x</code> and <code>y</code> axis names, etc.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> wells_by_county, <span class="kw">aes</span>(<span class="dt">x =</span> county, <span class="dt">y =</span> wells_count)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label=</span>wells_count), <span class="dt">vjust=</span><span class="op">-</span><span class="fl">0.25</span>)
  <span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Number of wells drilled by county&quot;</span>) <span class="co"># adds the title</span></code></pre></div>
<div class="figure">
<img src="images/visualize-county-by-year-done.png" alt="Wells by county with title" />
<p class="caption">Wells by county with title</p>
</div>
<p>Congratulations! You made your first <code>ggplot()</code> chart. Not particularly revealing, but it does show that Travis County has WAY more wells than the other counties.</p>
<p>Let’s see how those trends play out over time.</p>
</div>
</div>
<div id="wells-per-county-over-time" class="section level2">
<h2><span class="header-section-number">7.6</span> Wells per county over time</h2>
<p>Our next chart will be a line chart to show how the number of wells drilled has changed over time within each county.</p>
<p>Again, it will help us to think about what we are after and then build our data frame to match. In this case, we want to plot the “number of wells” for each county, by year. That means we need a data frame that has columns for county, year and the number of wells. To get that, we have to use group and summarize.</p>
<p>Sometimes it helps to write out the steps of everything before you to do it.</p>
<ul>
<li>Start with the <code>wells</code> data frame.</li>
<li>Filter to 2003 or later, because that’s when the <a href="http://www.twdb.texas.gov/groundwater/data/drillersdb.asp">system came online</a>.</li>
<li>Group by the <code>county</code> and <code>year_drilled</code> fields.</li>
<li>Summarize to create a count of the number of <code>wells_drilled</code>.</li>
<li>Set all of the above to a new data frame, <code>wells_county_year</code>.</li>
<li>Start a plot with the new data.</li>
<li>Set x (horizontal) to be year_drilled and y (vertical) to be wells_drilled, and color to be the county.</li>
</ul>
<div id="work-up-the-data-frame" class="section level3">
<h3><span class="header-section-number">7.6.1</span> Work up the data frame</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wells <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(year_drilled <span class="op">&gt;=</span><span class="st"> </span><span class="dv">2003</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(county, year_drilled) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(
    <span class="dt">wells_drilled =</span> <span class="kw">n</span>()
  )</code></pre></div>
<p>This gives you a table similar to this:</p>
<table>
<thead>
<tr class="header">
<th align="left">county</th>
<th align="left">year_drilled</th>
<th align="right">wells_drilled</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Bastrop</td>
<td align="left">2003</td>
<td align="right">110</td>
</tr>
<tr class="even">
<td align="left">Bastrop</td>
<td align="left">2004</td>
<td align="right">99</td>
</tr>
<tr class="odd">
<td align="left">Bastrop</td>
<td align="left">2005</td>
<td align="right">97</td>
</tr>
<tr class="even">
<td align="left">…</td>
<td align="left">…</td>
<td align="right">…</td>
</tr>
<tr class="odd">
<td align="left">Caldwell</td>
<td align="left">2003</td>
<td align="right">40</td>
</tr>
<tr class="even">
<td align="left">Caldwell</td>
<td align="left">2004</td>
<td align="right">32</td>
</tr>
<tr class="odd">
<td align="left">Caldwell</td>
<td align="left">2005</td>
<td align="right">40</td>
</tr>
</tbody>
</table>
<p>We call this <em>long</em> data, because each row contains a single observation, instead of <em>wide</em> data, which would have a column for each observation.</p>
<p>Once you are have the data formatted, set it to fill a new data frame called <code>wells_county_year</code>.</p>
</div>
<div id="draw-the-plot" class="section level3">
<h3><span class="header-section-number">7.6.2</span> Draw the plot</h3>
<p>Remember the formula for a basic plot:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="op">&lt;</span>DATA<span class="op">&gt;</span>, <span class="kw">aes</span>(<span class="op">&lt;</span>MAPPINGS<span class="op">&gt;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="er">&lt;</span>GEOM_FUNCTION<span class="op">&gt;</span></code></pre></div>
<p>and if all our mappings are the same, they can go into the ggplot function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(wells_county_year, <span class="kw">aes</span>(<span class="dt">x=</span>year_drilled, <span class="dt">y=</span>wells_drilled)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">color=</span>county)) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Wells by county and year&quot;</span>, <span class="dt">x =</span> <span class="st">&quot;Year&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Number of wells&quot;</span>)</code></pre></div>
<div class="figure">
<img src="images/visualize-county-year-line.png" alt="Wells drilled by county by year" />
<p class="caption">Wells drilled by county by year</p>
</div>
<p>How easy would it be to add points for every year to make each data point stand out?</p>
</div>
<div id="your-turn-add-layers" class="section level3">
<h3><span class="header-section-number">7.6.3</span> Your turn: Add layers</h3>
<ul>
<li>Add a new layer <code>geom_point()</code> and see what happens</li>
<li>Add a labels layer to add a title, like we did in the bar chart above.</li>
</ul>
</div>
<div id="dates-as-numbers-and-the-problems-they-cause" class="section level3">
<h3><span class="header-section-number">7.6.4</span> Dates as numbers and the problems they cause</h3>
<p>There was one point during my work on this graphic when my x axis did not fall evenly on years, and I figured it was because the <code>year_drilled</code> field was a number and not a date. It’s possible to fix that by including the <code>library(lubridate)</code> and then mutating the year_drilled column like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">mutate</span>(
    <span class="dt">year_drilled =</span> <span class="kw">ymd</span>(year_drilled, <span class="dt">truncated=</span>2L)
  ) <span class="op">%&gt;%</span></code></pre></div>
</div>
</div>
<div id="your-turn-build-a-line-chart" class="section level2">
<h2><span class="header-section-number">7.7</span> Your turn: Build a line chart</h2>
<p>Now, I’d like you to build a line chart that shows how the different kinds of wells drilled has changed over time. Here’s a major hint: It’s very much like the line chart you just built, but with different columns. You’ll need so start at creating a data frame with the correct data.</p>
</div>
<div id="review-of-ggplot" class="section level2">
<h2><span class="header-section-number">7.8</span> Review of ggplot</h2>
<p>Exploring with graphics are one of the more powerful features of working with R. It takes a bit to get used to the Grammar of Graphics and ggplot2 and it will be frustrating at first. But be assured it can do about anything once you learn how, and being able to fold in these charts with your thoughts and analysis in a repeatable way will make you a better data journalist.</p>
<p>By design, every chart in ggplot starts with the same three things: data, a geometric coordinate system, and a mapping of the aesthetics, including the x and y values.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> <span class="op">&lt;</span>DATA<span class="op">&gt;</span>, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="op">&lt;</span>MAPPINGS<span class="op">&gt;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="er">&lt;</span>GEOM_FUNCTION<span class="op">&gt;</span></code></pre></div>
<p>If your graphic is simple, there may be less verbose ways to write it as ggplot will assume your are passing it data first, and that <code>aes()</code> functions are for mapping.</p>
</div>
<div id="plotly-for-more-interactive-graphics" class="section level2">
<h2><span class="header-section-number">7.9</span> Plotly for more interactive graphics</h2>
<p>At the risk of adding yet a little more complexity I want to introduce you to <a href="https://plot.ly/r/">Plotly</a>. I see two ways you might find Plotly interesting:</p>
<div id="ggplotly" class="section level3">
<h3><span class="header-section-number">7.9.1</span> ggplotly</h3>
<p><a href="https://plot.ly/ggplot2/">ggplotly</a> allows you to port your ggplot graphic into Plotly so they have interactive tooltips. The tutorial examples are also not bad for a general ggplot reference.</p>
<p>After installing and loading the Plotly library, giving your chart hover tips is as easy as assigning your plot to an object (<code>p</code> in the example below), and then calling that with the <code>ggplotly()</code> function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(<span class="dt">x=</span>displ, <span class="dt">y=</span>hwy)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_smooth</span>()
<span class="kw">ggplotly</span>(p)</code></pre></div>
<div class="figure">
<img src="images/visualize-ggplotly-example.png" alt="ggplotly example" />
<p class="caption">ggplotly example</p>
</div>
<p>The black label above appears when you hover on the graphic.</p>
</div>
<div id="more-with-plot_ly-function" class="section level3">
<h3><span class="header-section-number">7.9.2</span> More with <code>plot_ly()</code> function</h3>
<p>You can gain a little more control over your Plotly graphic if you build them using the <code>plot_ly()</code> function instead of <code>ggplot()</code>, but you have to learn a new syntax. It’s still based on the Grammar of Graphics, so it’s not hard … just different.</p>
<p>For example, for our “Wells by County and Year” graphic we did earlier looks like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wells_county_year <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">plot_ly</span>(<span class="dt">x =</span> <span class="op">~</span>year_drilled, <span class="dt">y =</span> <span class="op">~</span>wells_drilled, <span class="dt">name =</span> <span class="op">~</span>county,
        <span class="dt">type =</span> <span class="st">&quot;scatter&quot;</span>, <span class="dt">mode =</span> <span class="st">&quot;lines+markers&quot;</span>)</code></pre></div>
<p>And it ends up looking like this:</p>
<div class="figure">
<img src="images/visualize-plotly-example.png" alt="Plotly example" />
<p class="caption">Plotly example</p>
</div>
</div>
<div id="plotlys-freemium-model" class="section level3">
<h3><span class="header-section-number">7.9.3</span> Plotly’s freemium model</h3>
<p>It appears that you can use these open source libraries without charge from Plotly. They do also have a hosting service to allow you to embed charts in other websites, which can get into a pay tier of their service.</p>
</div>
</div>
<div id="resources-and-further-reading" class="section level2">
<h2><span class="header-section-number">7.10</span> Resources and further reading</h2>
<ul>
<li><a href="http://ggplot2.tidyverse.org/reference/index.html">The ggplot2 documentation</a> and <a href="https://github.com/rstudio/cheatsheets/blob/master/data-visualization-2.1.pdf">ggplot2 cheatsheets</a>.</li>
<li><a href="https://r4ds.had.co.nz/data-visualisation.html">R for Data Science, Chap 3.</a> Hadley Wickam dives right into plots in his book.</li>
<li><a href="http://www.cookbook-r.com/Graphs/">R Graphics Cookbook</a> has lots of example plots. Good to harvest code and see how to do things.</li>
<li><a href="https://www.r-graph-gallery.com/">The R Graph Gallery</a> another place to see examples.</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="cleaning.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tidy.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/07-graphics.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>

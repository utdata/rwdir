<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapter 8 Tidy data | Reporting with Data in R</title>
  <meta name="description" content="Chapter 8 Tidy data | Reporting with Data in R is a series of lessons for a course in the School of Journalism, Moody College of Communication at the University of Texas at Austin. It is taught by Christian McDonald.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Chapter 8 Tidy data | Reporting with Data in R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Chapter 8 Tidy data | Reporting with Data in R is a series of lessons for a course in the School of Journalism, Moody College of Communication at the University of Texas at Austin. It is taught by Christian McDonald." />
  <meta name="github-repo" content="utdata/rwd-class" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 8 Tidy data | Reporting with Data in R" />
  
  <meta name="twitter:description" content="Chapter 8 Tidy data | Reporting with Data in R is a series of lessons for a course in the School of Journalism, Moody College of Communication at the University of Texas at Austin. It is taught by Christian McDonald." />
  

<meta name="author" content="Christian McDonald">


<meta name="date" content="2019-04-21">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="graphics.html">
<link rel="next" href="reordering-factors.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<style type="text/css">
  p.caption {
    color: #777;
    margin-top: 10px;
  }
  p code, pre, pre code, li code {
    background-color: #DCDCDC !important;
  }
</style>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Reporting with Data in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this class</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-the-author"><i class="fa fa-check"></i>About the author</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#other-resources"><i class="fa fa-check"></i>Other resources</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="install.html"><a href="install.html"><i class="fa fa-check"></i><b>1</b> Install Party</a><ul>
<li class="chapter" data-level="1.1" data-path="install.html"><a href="install.html#installing-r"><i class="fa fa-check"></i><b>1.1</b> Installing R</a></li>
<li class="chapter" data-level="1.2" data-path="install.html"><a href="install.html#installing-rstudio"><i class="fa fa-check"></i><b>1.2</b> Installing RStudio</a></li>
<li class="chapter" data-level="1.3" data-path="install.html"><a href="install.html#class-project-folder"><i class="fa fa-check"></i><b>1.3</b> Class project folder</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction to R</a><ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#rstudio-tour"><i class="fa fa-check"></i><b>2.1</b> RStudio tour</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#updating-preferences"><i class="fa fa-check"></i><b>2.2</b> Updating preferences</a></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#starting-a-new-project"><i class="fa fa-check"></i><b>2.3</b> Starting a new Project</a></li>
<li class="chapter" data-level="2.4" data-path="intro.html"><a href="intro.html#using-r-notebooks"><i class="fa fa-check"></i><b>2.4</b> Using R Notebooks</a><ul>
<li class="chapter" data-level="2.4.1" data-path="intro.html"><a href="intro.html#create-your-first-notebook"><i class="fa fa-check"></i><b>2.4.1</b> Create your first notebook</a></li>
<li class="chapter" data-level="2.4.2" data-path="intro.html"><a href="intro.html#save-the-.rmd-file"><i class="fa fa-check"></i><b>2.4.2</b> Save the .Rmd file</a></li>
<li class="chapter" data-level="2.4.3" data-path="intro.html"><a href="intro.html#run-the-notebook"><i class="fa fa-check"></i><b>2.4.3</b> Run the notebook</a></li>
<li class="chapter" data-level="2.4.4" data-path="intro.html"><a href="intro.html#adding-new-code-chunks"><i class="fa fa-check"></i><b>2.4.4</b> Adding new code chunks</a></li>
<li class="chapter" data-level="2.4.5" data-path="intro.html"><a href="intro.html#practice-adding-code-chunks"><i class="fa fa-check"></i><b>2.4.5</b> Practice adding code chunks</a></li>
<li class="chapter" data-level="2.4.6" data-path="intro.html"><a href="intro.html#preview-the-report"><i class="fa fa-check"></i><b>2.4.6</b> Preview the report</a></li>
<li class="chapter" data-level="2.4.7" data-path="intro.html"><a href="intro.html#the-toolbar"><i class="fa fa-check"></i><b>2.4.7</b> The toolbar</a></li>
<li class="chapter" data-level="2.4.8" data-path="intro.html"><a href="intro.html#knit-the-final-workbook"><i class="fa fa-check"></i><b>2.4.8</b> Knit the final workbook</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="intro.html"><a href="intro.html#turning-in-our-projects"><i class="fa fa-check"></i><b>2.5</b> Turning in our projects</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="import.html"><a href="import.html"><i class="fa fa-check"></i><b>3</b> Importing data</a><ul>
<li class="chapter" data-level="3.1" data-path="import.html"><a href="import.html#goals-for-this-section"><i class="fa fa-check"></i><b>3.1</b> Goals for this section</a></li>
<li class="chapter" data-level="3.2" data-path="import.html"><a href="import.html#data-types"><i class="fa fa-check"></i><b>3.2</b> Data types</a><ul>
<li class="chapter" data-level="3.2.1" data-path="import.html"><a href="import.html#what-is-clean-data"><i class="fa fa-check"></i><b>3.2.1</b> What is clean data</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="import.html"><a href="import.html#create-a-new-project"><i class="fa fa-check"></i><b>3.3</b> Create a new project</a><ul>
<li class="chapter" data-level="3.3.1" data-path="import.html"><a href="import.html#the-r-package-environment"><i class="fa fa-check"></i><b>3.3.1</b> The R Package environment</a></li>
<li class="chapter" data-level="3.3.2" data-path="import.html"><a href="import.html#installing-and-using-packages"><i class="fa fa-check"></i><b>3.3.2</b> Installing and using packages</a></li>
<li class="chapter" data-level="3.3.3" data-path="import.html"><a href="import.html#load-the-libraries"><i class="fa fa-check"></i><b>3.3.3</b> Load the libraries</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="import.html"><a href="import.html#lets-get-some-data"><i class="fa fa-check"></i><b>3.4</b> Let’s get some data</a><ul>
<li class="chapter" data-level="3.4.1" data-path="import.html"><a href="import.html#inspect-the-data"><i class="fa fa-check"></i><b>3.4.1</b> Inspect the data</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="import.html"><a href="import.html#import-csv-as-data"><i class="fa fa-check"></i><b>3.5</b> Import csv as data</a><ul>
<li class="chapter" data-level="3.5.1" data-path="import.html"><a href="import.html#help-files"><i class="fa fa-check"></i><b>3.5.1</b> Help files</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="import.html"><a href="import.html#assign-our-data-to-a-data-frame"><i class="fa fa-check"></i><b>3.6</b> Assign our data to a data frame</a></li>
<li class="chapter" data-level="3.7" data-path="import.html"><a href="import.html#inspect-the-data-1"><i class="fa fa-check"></i><b>3.7</b> Inspect the data</a><ul>
<li class="chapter" data-level="3.7.1" data-path="import.html"><a href="import.html#write-notes-about-things-to-change"><i class="fa fa-check"></i><b>3.7.1</b> Write notes about things to change</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="import.html"><a href="import.html#turn-in-your-project"><i class="fa fa-check"></i><b>3.8</b> Turn in your project</a></li>
<li class="chapter" data-level="3.9" data-path="import.html"><a href="import.html#practice-assignment-import-census"><i class="fa fa-check"></i><b>3.9</b> Practice assignment: Import census</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="columns.html"><a href="columns.html"><i class="fa fa-check"></i><b>4</b> Columns</a><ul>
<li class="chapter" data-level="4.1" data-path="columns.html"><a href="columns.html#goals-for-this-section-1"><i class="fa fa-check"></i><b>4.1</b> Goals for this section</a></li>
<li class="chapter" data-level="4.2" data-path="columns.html"><a href="columns.html#relaunch-the-wells-project"><i class="fa fa-check"></i><b>4.2</b> Relaunch the Wells project</a></li>
<li class="chapter" data-level="4.3" data-path="columns.html"><a href="columns.html#clean-up-column-names"><i class="fa fa-check"></i><b>4.3</b> Clean up column names</a><ul>
<li class="chapter" data-level="4.3.1" data-path="columns.html"><a href="columns.html#clean-names-with-janitor"><i class="fa fa-check"></i><b>4.3.1</b> Clean names with janitor</a></li>
<li class="chapter" data-level="4.3.2" data-path="columns.html"><a href="columns.html#simple-renaming-of-individual-columns"><i class="fa fa-check"></i><b>4.3.2</b> Simple renaming of individual columns</a></li>
<li class="chapter" data-level="4.3.3" data-path="columns.html"><a href="columns.html#mass-renaming-of-columns"><i class="fa fa-check"></i><b>4.3.3</b> Mass renaming of columns</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="columns.html"><a href="columns.html#clean-data-within-columns"><i class="fa fa-check"></i><b>4.4</b> Clean data within columns</a><ul>
<li class="chapter" data-level="4.4.1" data-path="columns.html"><a href="columns.html#using-lubridate-to-clean-dates"><i class="fa fa-check"></i><b>4.4.1</b> Using lubridate to clean dates</a></li>
<li class="chapter" data-level="4.4.2" data-path="columns.html"><a href="columns.html#fix-the-bore-hole-depth"><i class="fa fa-check"></i><b>4.4.2</b> Fix the bore hole depth</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="columns.html"><a href="columns.html#export-the-data"><i class="fa fa-check"></i><b>4.5</b> Export the data</a></li>
<li class="chapter" data-level="4.6" data-path="columns.html"><a href="columns.html#turn-in-wells"><i class="fa fa-check"></i><b>4.6</b> Turn in wells</a></li>
<li class="chapter" data-level="4.7" data-path="columns.html"><a href="columns.html#practice-assignment-clean-census-names"><i class="fa fa-check"></i><b>4.7</b> Practice assignment: Clean census names</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="transform.html"><a href="transform.html"><i class="fa fa-check"></i><b>5</b> Transform</a><ul>
<li class="chapter" data-level="5.1" data-path="transform.html"><a href="transform.html#goals-for-the-section"><i class="fa fa-check"></i><b>5.1</b> Goals for the section</a></li>
<li class="chapter" data-level="5.2" data-path="transform.html"><a href="transform.html#introducing-dplyr"><i class="fa fa-check"></i><b>5.2</b> Introducing dplyr</a></li>
<li class="chapter" data-level="5.3" data-path="transform.html"><a href="transform.html#start-a-new-r-notebook"><i class="fa fa-check"></i><b>5.3</b> Start a new R Notebook</a></li>
<li class="chapter" data-level="5.4" data-path="transform.html"><a href="transform.html#record-our-goals"><i class="fa fa-check"></i><b>5.4</b> Record our goals</a></li>
<li class="chapter" data-level="5.5" data-path="transform.html"><a href="transform.html#name-your-code-chunks"><i class="fa fa-check"></i><b>5.5</b> Name your code chunks</a></li>
<li class="chapter" data-level="5.6" data-path="transform.html"><a href="transform.html#import-our-data"><i class="fa fa-check"></i><b>5.6</b> Import our data</a></li>
<li class="chapter" data-level="5.7" data-path="transform.html"><a href="transform.html#filter"><i class="fa fa-check"></i><b>5.7</b> Filter()</a><ul>
<li class="chapter" data-level="5.7.1" data-path="transform.html"><a href="transform.html#filter-your-turn"><i class="fa fa-check"></i><b>5.7.1</b> Filter your turn</a></li>
<li class="chapter" data-level="5.7.2" data-path="transform.html"><a href="transform.html#common-mistakes-with-filter"><i class="fa fa-check"></i><b>5.7.2</b> Common mistakes with filter</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="transform.html"><a href="transform.html#combining-filters"><i class="fa fa-check"></i><b>5.8</b> Combining filters</a><ul>
<li class="chapter" data-level="5.8.1" data-path="transform.html"><a href="transform.html#your-turn-combining-filters"><i class="fa fa-check"></i><b>5.8.1</b> Your turn combining filters</a></li>
<li class="chapter" data-level="5.8.2" data-path="transform.html"><a href="transform.html#common-mistakes-with-combining-filters"><i class="fa fa-check"></i><b>5.8.2</b> Common mistakes with combining filters</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="transform.html"><a href="transform.html#arrange"><i class="fa fa-check"></i><b>5.9</b> Arrange()</a></li>
<li class="chapter" data-level="5.10" data-path="transform.html"><a href="transform.html#multi-step-operations"><i class="fa fa-check"></i><b>5.10</b> Multi-step operations</a><ul>
<li class="chapter" data-level="5.10.1" data-path="transform.html"><a href="transform.html#your-turn-to-combine-and-pipe"><i class="fa fa-check"></i><b>5.10.1</b> Your turn to combine and pipe</a></li>
</ul></li>
<li class="chapter" data-level="5.11" data-path="transform.html"><a href="transform.html#select"><i class="fa fa-check"></i><b>5.11</b> Select()</a></li>
<li class="chapter" data-level="5.12" data-path="transform.html"><a href="transform.html#mutate"><i class="fa fa-check"></i><b>5.12</b> Mutate()</a><ul>
<li class="chapter" data-level="5.12.1" data-path="transform.html"><a href="transform.html#your-turn-to-mutate"><i class="fa fa-check"></i><b>5.12.1</b> Your turn to mutate</a></li>
<li class="chapter" data-level="5.12.2" data-path="transform.html"><a href="transform.html#document-and-save-new-columns"><i class="fa fa-check"></i><b>5.12.2</b> Document and save new columns</a></li>
<li class="chapter" data-level="5.12.3" data-path="transform.html"><a href="transform.html#export-the-mutated-data"><i class="fa fa-check"></i><b>5.12.3</b> Export the mutated data</a></li>
</ul></li>
<li class="chapter" data-level="5.13" data-path="transform.html"><a href="transform.html#summarize"><i class="fa fa-check"></i><b>5.13</b> Summarize()</a><ul>
<li class="chapter" data-level="5.13.1" data-path="transform.html"><a href="transform.html#ignoring-na"><i class="fa fa-check"></i><b>5.13.1</b> ignoring na</a></li>
<li class="chapter" data-level="5.13.2" data-path="transform.html"><a href="transform.html#your-turn-with-summarise"><i class="fa fa-check"></i><b>5.13.2</b> Your turn with summarise</a></li>
</ul></li>
<li class="chapter" data-level="5.14" data-path="transform.html"><a href="transform.html#group_by"><i class="fa fa-check"></i><b>5.14</b> Group_by()</a><ul>
<li class="chapter" data-level="5.14.1" data-path="transform.html"><a href="transform.html#group-and-count"><i class="fa fa-check"></i><b>5.14.1</b> Group and count</a></li>
<li class="chapter" data-level="5.14.2" data-path="transform.html"><a href="transform.html#your-turn-to-group"><i class="fa fa-check"></i><b>5.14.2</b> Your turn to group</a></li>
<li class="chapter" data-level="5.14.3" data-path="transform.html"><a href="transform.html#counting-only"><i class="fa fa-check"></i><b>5.14.3</b> Counting only</a></li>
</ul></li>
<li class="chapter" data-level="5.15" data-path="transform.html"><a href="transform.html#transform-review"><i class="fa fa-check"></i><b>5.15</b> Transform review</a></li>
<li class="chapter" data-level="5.16" data-path="transform.html"><a href="transform.html#turn-in-your-in-class-project"><i class="fa fa-check"></i><b>5.16</b> Turn in your in-class project</a></li>
<li class="chapter" data-level="5.17" data-path="transform.html"><a href="transform.html#practice-assignment-transforms-on-census"><i class="fa fa-check"></i><b>5.17</b> Practice assignment: Transforms on census</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="cleaning.html"><a href="cleaning.html"><i class="fa fa-check"></i><b>6</b> Cleaning</a><ul>
<li class="chapter" data-level="6.1" data-path="cleaning.html"><a href="cleaning.html#goals-for-this-section-2"><i class="fa fa-check"></i><b>6.1</b> Goals for this section</a><ul>
<li class="chapter" data-level="6.1.1" data-path="cleaning.html"><a href="cleaning.html#resources"><i class="fa fa-check"></i><b>6.1.1</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="cleaning.html"><a href="cleaning.html#taking-stock-of-the-data"><i class="fa fa-check"></i><b>6.2</b> Taking stock of the data</a></li>
<li class="chapter" data-level="6.3" data-path="cleaning.html"><a href="cleaning.html#setup-and-import"><i class="fa fa-check"></i><b>6.3</b> Setup and import</a></li>
<li class="chapter" data-level="6.4" data-path="cleaning.html"><a href="cleaning.html#clean-the-proposed_use-column"><i class="fa fa-check"></i><b>6.4</b> Clean the proposed_use column</a><ul>
<li class="chapter" data-level="6.4.1" data-path="cleaning.html"><a href="cleaning.html#count-values-in-a-column"><i class="fa fa-check"></i><b>6.4.1</b> Count values in a column</a></li>
<li class="chapter" data-level="6.4.2" data-path="cleaning.html"><a href="cleaning.html#change-values-in-a-column"><i class="fa fa-check"></i><b>6.4.2</b> Change values in a column</a></li>
<li class="chapter" data-level="6.4.3" data-path="cleaning.html"><a href="cleaning.html#reassign-your-changes-back-to-the-data-frame"><i class="fa fa-check"></i><b>6.4.3</b> Reassign your changes back to the data frame</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="cleaning.html"><a href="cleaning.html#export-your-updated-data-frame"><i class="fa fa-check"></i><b>6.5</b> Export your updated data frame</a></li>
<li class="chapter" data-level="6.6" data-path="cleaning.html"><a href="cleaning.html#future-addition"><i class="fa fa-check"></i><b>6.6</b> Future addition</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="graphics.html"><a href="graphics.html"><i class="fa fa-check"></i><b>7</b> Graphics</a><ul>
<li class="chapter" data-level="7.1" data-path="graphics.html"><a href="graphics.html#goals-for-this-section-3"><i class="fa fa-check"></i><b>7.1</b> Goals for this section</a></li>
<li class="chapter" data-level="7.2" data-path="graphics.html"><a href="graphics.html#introduction-ggplot"><i class="fa fa-check"></i><b>7.2</b> Introduction ggplot</a></li>
<li class="chapter" data-level="7.3" data-path="graphics.html"><a href="graphics.html#the-basic-ggplot-template"><i class="fa fa-check"></i><b>7.3</b> The basic ggplot template</a></li>
<li class="chapter" data-level="7.4" data-path="graphics.html"><a href="graphics.html#lets-plot"><i class="fa fa-check"></i><b>7.4</b> Let’s plot!</a><ul>
<li class="chapter" data-level="7.4.1" data-path="graphics.html"><a href="graphics.html#set-up-our-notebook"><i class="fa fa-check"></i><b>7.4.1</b> Set up our Notebook</a></li>
<li class="chapter" data-level="7.4.2" data-path="graphics.html"><a href="graphics.html#scatterplot"><i class="fa fa-check"></i><b>7.4.2</b> Scatterplot</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="graphics.html"><a href="graphics.html#plotting-our-wells-data"><i class="fa fa-check"></i><b>7.5</b> Plotting our wells data</a><ul>
<li class="chapter" data-level="7.5.1" data-path="graphics.html"><a href="graphics.html#total-wells-per-county"><i class="fa fa-check"></i><b>7.5.1</b> Total wells per county</a></li>
<li class="chapter" data-level="7.5.2" data-path="graphics.html"><a href="graphics.html#add-a-layer-of-text-labels"><i class="fa fa-check"></i><b>7.5.2</b> Add a layer of text labels</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="graphics.html"><a href="graphics.html#wells-per-county-over-time"><i class="fa fa-check"></i><b>7.6</b> Wells per county over time</a><ul>
<li class="chapter" data-level="7.6.1" data-path="graphics.html"><a href="graphics.html#work-up-the-data-frame"><i class="fa fa-check"></i><b>7.6.1</b> Work up the data frame</a></li>
<li class="chapter" data-level="7.6.2" data-path="graphics.html"><a href="graphics.html#draw-the-plot"><i class="fa fa-check"></i><b>7.6.2</b> Draw the plot</a></li>
<li class="chapter" data-level="7.6.3" data-path="graphics.html"><a href="graphics.html#your-turn-add-layers"><i class="fa fa-check"></i><b>7.6.3</b> Your turn: Add layers</a></li>
<li class="chapter" data-level="7.6.4" data-path="graphics.html"><a href="graphics.html#dates-as-numbers-and-the-problems-they-cause"><i class="fa fa-check"></i><b>7.6.4</b> Dates as numbers and the problems they cause</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="graphics.html"><a href="graphics.html#your-turn-build-a-line-chart"><i class="fa fa-check"></i><b>7.7</b> Your turn: Build a line chart</a></li>
<li class="chapter" data-level="7.8" data-path="graphics.html"><a href="graphics.html#review-of-ggplot"><i class="fa fa-check"></i><b>7.8</b> Review of ggplot</a></li>
<li class="chapter" data-level="7.9" data-path="graphics.html"><a href="graphics.html#plotly-for-more-interactive-graphics"><i class="fa fa-check"></i><b>7.9</b> Plotly for more interactive graphics</a><ul>
<li class="chapter" data-level="7.9.1" data-path="graphics.html"><a href="graphics.html#ggplotly"><i class="fa fa-check"></i><b>7.9.1</b> ggplotly</a></li>
<li class="chapter" data-level="7.9.2" data-path="graphics.html"><a href="graphics.html#more-with-plot_ly-function"><i class="fa fa-check"></i><b>7.9.2</b> More with <code>plot_ly()</code> function</a></li>
<li class="chapter" data-level="7.9.3" data-path="graphics.html"><a href="graphics.html#plotlys-freemium-model"><i class="fa fa-check"></i><b>7.9.3</b> Plotly’s freemium model</a></li>
</ul></li>
<li class="chapter" data-level="7.10" data-path="graphics.html"><a href="graphics.html#resources-and-further-reading"><i class="fa fa-check"></i><b>7.10</b> Resources and further reading</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="tidy.html"><a href="tidy.html"><i class="fa fa-check"></i><b>8</b> Tidy data</a><ul>
<li class="chapter" data-level="8.1" data-path="tidy.html"><a href="tidy.html#goals-for-this-section-4"><i class="fa fa-check"></i><b>8.1</b> Goals for this section</a></li>
<li class="chapter" data-level="8.2" data-path="tidy.html"><a href="tidy.html#what-is-tidy-data"><i class="fa fa-check"></i><b>8.2</b> What is tidy data</a></li>
<li class="chapter" data-level="8.3" data-path="tidy.html"><a href="tidy.html#tidyr-package"><i class="fa fa-check"></i><b>8.3</b> Tidyr package</a></li>
<li class="chapter" data-level="8.4" data-path="tidy.html"><a href="tidy.html#the-tidyr-verbs"><i class="fa fa-check"></i><b>8.4</b> The tidyr verbs</a></li>
<li class="chapter" data-level="8.5" data-path="tidy.html"><a href="tidy.html#set-up-the-mixbev-project"><i class="fa fa-check"></i><b>8.5</b> Set up the mixbev project</a></li>
<li class="chapter" data-level="8.6" data-path="tidy.html"><a href="tidy.html#create-an-explore-notebook"><i class="fa fa-check"></i><b>8.6</b> Create an explore notebook</a><ul>
<li class="chapter" data-level="8.6.1" data-path="tidy.html"><a href="tidy.html#peruse-the-data"><i class="fa fa-check"></i><b>8.6.1</b> Peruse the data</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="tidy.html"><a href="tidy.html#what-might-we-learn-about-this-dataset"><i class="fa fa-check"></i><b>8.7</b> What might we learn about this dataset</a></li>
<li class="chapter" data-level="8.8" data-path="tidy.html"><a href="tidy.html#add-years-and-months-values"><i class="fa fa-check"></i><b>8.8</b> Add years and months values</a></li>
<li class="chapter" data-level="8.9" data-path="tidy.html"><a href="tidy.html#campus-bars"><i class="fa fa-check"></i><b>8.9</b> Campus bars</a><ul>
<li class="chapter" data-level="8.9.1" data-path="tidy.html"><a href="tidy.html#total-78705-sales-leaders-in-2018"><i class="fa fa-check"></i><b>8.9.1</b> Total 78705 sales leaders in 2018</a></li>
</ul></li>
<li class="chapter" data-level="8.10" data-path="tidy.html"><a href="tidy.html#west-campus-student-hot-spots"><i class="fa fa-check"></i><b>8.10</b> West Campus student hot spots</a></li>
<li class="chapter" data-level="8.11" data-path="tidy.html"><a href="tidy.html#campus-area-bar-sales-over-time"><i class="fa fa-check"></i><b>8.11</b> Campus-area bar sales over time</a><ul>
<li class="chapter" data-level="8.11.1" data-path="tidy.html"><a href="tidy.html#visualizing-your-visualization"><i class="fa fa-check"></i><b>8.11.1</b> Visualizing your visualization</a></li>
<li class="chapter" data-level="8.11.2" data-path="tidy.html"><a href="tidy.html#what-did-we-find"><i class="fa fa-check"></i><b>8.11.2</b> What did we find?</a></li>
</ul></li>
<li class="chapter" data-level="8.12" data-path="tidy.html"><a href="tidy.html#types-of-sales-within-student-bars"><i class="fa fa-check"></i><b>8.12</b> Types of sales within student bars</a></li>
<li class="chapter" data-level="8.13" data-path="tidy.html"><a href="tidy.html#how-gather-works"><i class="fa fa-check"></i><b>8.13</b> How gather() works</a></li>
<li class="chapter" data-level="8.14" data-path="tidy.html"><a href="tidy.html#applying-gather-to-beer-wine-and-liquor"><i class="fa fa-check"></i><b>8.14</b> Applying gather() to beer, wine and liquor</a><ul>
<li class="chapter" data-level="8.14.1" data-path="tidy.html"><a href="tidy.html#plot-sales-by-type-for-a-single-campus-area-bar"><i class="fa fa-check"></i><b>8.14.1</b> Plot sales by type for a single campus-area bar</a></li>
<li class="chapter" data-level="8.14.2" data-path="tidy.html"><a href="tidy.html#plot-sales-by-type-for-multiple-campus-area-bars"><i class="fa fa-check"></i><b>8.14.2</b> Plot sales by type for multiple campus-area bars</a></li>
<li class="chapter" data-level="8.14.3" data-path="tidy.html"><a href="tidy.html#what-did-we-learn"><i class="fa fa-check"></i><b>8.14.3</b> What did we learn?</a></li>
</ul></li>
<li class="chapter" data-level="8.15" data-path="tidy.html"><a href="tidy.html#the-spread-function"><i class="fa fa-check"></i><b>8.15</b> The spread() function</a></li>
<li class="chapter" data-level="8.16" data-path="tidy.html"><a href="tidy.html#practice-assignment-exploring-the-top-seller"><i class="fa fa-check"></i><b>8.16</b> Practice assignment: Exploring the top seller</a></li>
<li class="chapter" data-level="8.17" data-path="tidy.html"><a href="tidy.html#bonus-top-5-sellers-in-travis-county-over-three-years"><i class="fa fa-check"></i><b>8.17</b> Bonus: Top 5 sellers in Travis County over three years</a></li>
<li class="chapter" data-level="8.18" data-path="tidy.html"><a href="tidy.html#bonus-total-sales-by-county"><i class="fa fa-check"></i><b>8.18</b> Bonus: Total sales by county</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="reordering-factors.html"><a href="reordering-factors.html"><i class="fa fa-check"></i><b>9</b> Reordering factors</a><ul>
<li class="chapter" data-level="9.1" data-path="reordering-factors.html"><a href="reordering-factors.html#goals-for-this-section-5"><i class="fa fa-check"></i><b>9.1</b> Goals for this section</a></li>
<li class="chapter" data-level="9.2" data-path="reordering-factors.html"><a href="reordering-factors.html#create-our-survey-project"><i class="fa fa-check"></i><b>9.2</b> Create our survey project</a><ul>
<li class="chapter" data-level="9.2.1" data-path="reordering-factors.html"><a href="reordering-factors.html#setup"><i class="fa fa-check"></i><b>9.2.1</b> Setup</a></li>
<li class="chapter" data-level="9.2.2" data-path="reordering-factors.html"><a href="reordering-factors.html#libraries"><i class="fa fa-check"></i><b>9.2.2</b> Libraries</a></li>
<li class="chapter" data-level="9.2.3" data-path="reordering-factors.html"><a href="reordering-factors.html#import-the-data"><i class="fa fa-check"></i><b>9.2.3</b> Import the data</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="reordering-factors.html"><a href="reordering-factors.html#figuring-out-our-data-shape"><i class="fa fa-check"></i><b>9.3</b> Figuring out our data shape</a></li>
<li class="chapter" data-level="9.4" data-path="reordering-factors.html"><a href="reordering-factors.html#charting-the-popularity-of-princess"><i class="fa fa-check"></i><b>9.4</b> Charting the popularity of princess</a></li>
<li class="chapter" data-level="9.5" data-path="reordering-factors.html"><a href="reordering-factors.html#create-our-princess-plot"><i class="fa fa-check"></i><b>9.5</b> Create our princess plot</a><ul>
<li class="chapter" data-level="9.5.1" data-path="reordering-factors.html"><a href="reordering-factors.html#labels-and-titles"><i class="fa fa-check"></i><b>9.5.1</b> Labels and titles</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="reordering-factors.html"><a href="reordering-factors.html#factors"><i class="fa fa-check"></i><b>9.6</b> Factors</a></li>
<li class="chapter" data-level="9.7" data-path="reordering-factors.html"><a href="reordering-factors.html#reorder-princess"><i class="fa fa-check"></i><b>9.7</b> Reorder princess</a></li>
<li class="chapter" data-level="9.8" data-path="reordering-factors.html"><a href="reordering-factors.html#factors-recap"><i class="fa fa-check"></i><b>9.8</b> Factors recap</a></li>
<li class="chapter" data-level="9.9" data-path="reordering-factors.html"><a href="reordering-factors.html#practice-make-an-ice-cream-chart"><i class="fa fa-check"></i><b>9.9</b> Practice: Make an ice cream chart</a><ul>
<li class="chapter" data-level="9.9.1" data-path="reordering-factors.html"><a href="reordering-factors.html#turn-in-this-project"><i class="fa fa-check"></i><b>9.9.1</b> Turn in this project</a></li>
</ul></li>
<li class="chapter" data-level="9.10" data-path="reordering-factors.html"><a href="reordering-factors.html#resources-1"><i class="fa fa-check"></i><b>9.10</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="joins.html"><a href="joins.html"><i class="fa fa-check"></i><b>10</b> Joins</a><ul>
<li class="chapter" data-level="10.1" data-path="joins.html"><a href="joins.html#goals-for-this-section-6"><i class="fa fa-check"></i><b>10.1</b> Goals for this section</a></li>
<li class="chapter" data-level="10.2" data-path="joins.html"><a href="joins.html#project-setup"><i class="fa fa-check"></i><b>10.2</b> Project setup</a><ul>
<li class="chapter" data-level="10.2.1" data-path="joins.html"><a href="joins.html#download-the-data"><i class="fa fa-check"></i><b>10.2.1</b> Download the data</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="joins.html"><a href="joins.html#the-story"><i class="fa fa-check"></i><b>10.3</b> The story</a></li>
<li class="chapter" data-level="10.4" data-path="joins.html"><a href="joins.html#explore-the-data"><i class="fa fa-check"></i><b>10.4</b> Explore the data</a><ul>
<li class="chapter" data-level="10.4.1" data-path="joins.html"><a href="joins.html#third-down-conversions"><i class="fa fa-check"></i><b>10.4.1</b> Third-down conversions</a></li>
<li class="chapter" data-level="10.4.2" data-path="joins.html"><a href="joins.html#scoring"><i class="fa fa-check"></i><b>10.4.2</b> Scoring</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="joins.html"><a href="joins.html#about-joins"><i class="fa fa-check"></i><b>10.5</b> About joins</a></li>
<li class="chapter" data-level="10.6" data-path="joins.html"><a href="joins.html#build-our-scatterplot"><i class="fa fa-check"></i><b>10.6</b> Build our scatterplot</a><ul>
<li class="chapter" data-level="10.6.1" data-path="joins.html"><a href="joins.html#add-a-fit-line"><i class="fa fa-check"></i><b>10.6.1</b> Add a fit line</a></li>
<li class="chapter" data-level="10.6.2" data-path="joins.html"><a href="joins.html#run-a-correlation-test"><i class="fa fa-check"></i><b>10.6.2</b> Run a correlation test</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="joins.html"><a href="joins.html#how-does-texas-compare"><i class="fa fa-check"></i><b>10.7</b> How does Texas compare?</a></li>
<li class="chapter" data-level="10.8" data-path="joins.html"><a href="joins.html#correlaton-test-for-texas"><i class="fa fa-check"></i><b>10.8</b> Correlaton test for Texas</a></li>
<li class="chapter" data-level="10.9" data-path="joins.html"><a href="joins.html#practice-1-compare-penn-state"><i class="fa fa-check"></i><b>10.9</b> Practice 1: Compare Penn State</a></li>
<li class="chapter" data-level="10.10" data-path="joins.html"><a href="joins.html#practice-2-penalties-vs-scoring"><i class="fa fa-check"></i><b>10.10</b> Practice 2: Penalties vs scoring</a></li>
<li class="chapter" data-level="10.11" data-path="joins.html"><a href="joins.html#using-bind_rows-to-merge-data-sets"><i class="fa fa-check"></i><b>10.11</b> Using bind_rows() to merge data sets</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="census.html"><a href="census.html"><i class="fa fa-check"></i><b>11</b> Census</a><ul>
<li class="chapter" data-level="11.1" data-path="census.html"><a href="census.html#goals-of-this-section"><i class="fa fa-check"></i><b>11.1</b> Goals of this section</a></li>
<li class="chapter" data-level="11.2" data-path="census.html"><a href="census.html#census-bureau-programs"><i class="fa fa-check"></i><b>11.2</b> Census Bureau programs</a><ul>
<li class="chapter" data-level="11.2.1" data-path="census.html"><a href="census.html#decennial-census"><i class="fa fa-check"></i><b>11.2.1</b> Decennial Census</a></li>
<li class="chapter" data-level="11.2.2" data-path="census.html"><a href="census.html#american-community-survey"><i class="fa fa-check"></i><b>11.2.2</b> American Community Survey</a></li>
<li class="chapter" data-level="11.2.3" data-path="census.html"><a href="census.html#populaton-estimates-program"><i class="fa fa-check"></i><b>11.2.3</b> Populaton Estimates Program</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="census.html"><a href="census.html#using-the-new-data-portal"><i class="fa fa-check"></i><b>11.3</b> Using the new data portal</a><ul>
<li class="chapter" data-level="11.3.1" data-path="census.html"><a href="census.html#tips-about-using-downloaded-portal-data-in-r"><i class="fa fa-check"></i><b>11.3.1</b> Tips about using downloaded portal data in R</a></li>
<li class="chapter" data-level="11.3.2" data-path="census.html"><a href="census.html#importing-downloaded-data"><i class="fa fa-check"></i><b>11.3.2</b> Importing downloaded data</a></li>
<li class="chapter" data-level="11.3.3" data-path="census.html"><a href="census.html#fields-made-to-join-with-other-data"><i class="fa fa-check"></i><b>11.3.3</b> Fields made to join with other data</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="census.html"><a href="census.html#using-the-census-api-in-r"><i class="fa fa-check"></i><b>11.4</b> Using the Census API in R</a><ul>
<li class="chapter" data-level="11.4.1" data-path="census.html"><a href="census.html#setting-up-an-api-key"><i class="fa fa-check"></i><b>11.4.1</b> Setting up an API key</a></li>
<li class="chapter" data-level="11.4.2" data-path="census.html"><a href="census.html#the-censusapi-package"><i class="fa fa-check"></i><b>11.4.2</b> The censusapi package</a></li>
<li class="chapter" data-level="11.4.3" data-path="census.html"><a href="census.html#the-tidycensus-package"><i class="fa fa-check"></i><b>11.4.3</b> The tidycensus package</a></li>
<li class="chapter" data-level="11.4.4" data-path="census.html"><a href="census.html#adding-geometry-to-tidycensus"><i class="fa fa-check"></i><b>11.4.4</b> Adding geometry to tidycensus</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="census.html"><a href="census.html#interactive-maps-with-leaflet"><i class="fa fa-check"></i><b>11.5</b> Interactive maps with leaflet</a></li>
<li class="chapter" data-level="11.6" data-path="census.html"><a href="census.html#resources-2"><i class="fa fa-check"></i><b>11.6</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html"><i class="fa fa-check"></i><b>12</b> How to tackle a new dataset</a><ul>
<li class="chapter" data-level="12.1" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#start-by-listing-questions"><i class="fa fa-check"></i><b>12.1</b> Start by listing questions</a></li>
<li class="chapter" data-level="12.2" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#understand-your-data"><i class="fa fa-check"></i><b>12.2</b> Understand your data</a></li>
<li class="chapter" data-level="12.3" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#counting-and-aggregation"><i class="fa fa-check"></i><b>12.3</b> Counting and aggregation</a><ul>
<li class="chapter" data-level="12.3.1" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#counting-rows-based-on-a-column"><i class="fa fa-check"></i><b>12.3.1</b> Counting rows based on a column</a></li>
<li class="chapter" data-level="12.3.2" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#sum-mean-and-other-aggregations"><i class="fa fa-check"></i><b>12.3.2</b> Sum, mean and other aggregations</a></li>
<li class="chapter" data-level="12.3.3" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#creating-columns-to-show-difference"><i class="fa fa-check"></i><b>12.3.3</b> Creating columns to show difference</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#cleaning-up-categorical-data"><i class="fa fa-check"></i><b>12.4</b> Cleaning up categorical data</a></li>
<li class="chapter" data-level="12.5" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#time-as-a-variable"><i class="fa fa-check"></i><b>12.5</b> Time as a variable</a></li>
<li class="chapter" data-level="12.6" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#explore-the-distributions-in-your-data"><i class="fa fa-check"></i><b>12.6</b> Explore the distributions in your data</a><ul>
<li class="chapter" data-level="12.6.1" data-path="how-to-tackle-a-new-dataset.html"><a href="how-to-tackle-a-new-dataset.html#more-on-histograms"><i class="fa fa-check"></i><b>12.6.1</b> More on histograms</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="publishing-your-findings.html"><a href="publishing-your-findings.html"><i class="fa fa-check"></i><b>13</b> Publishing your findings</a><ul>
<li class="chapter" data-level="13.1" data-path="publishing-your-findings.html"><a href="publishing-your-findings.html#examples"><i class="fa fa-check"></i><b>13.1</b> Examples</a></li>
<li class="chapter" data-level="13.2" data-path="publishing-your-findings.html"><a href="publishing-your-findings.html#how-to-publish-your-projects"><i class="fa fa-check"></i><b>13.2</b> How to publish your projects</a><ul>
<li class="chapter" data-level="13.2.1" data-path="publishing-your-findings.html"><a href="publishing-your-findings.html#using-github-pages"><i class="fa fa-check"></i><b>13.2.1</b> Using Github Pages</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="publishing-your-findings.html"><a href="publishing-your-findings.html#making-branded-graphics"><i class="fa fa-check"></i><b>13.3</b> Making branded graphics</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="chart-examples.html"><a href="chart-examples.html"><i class="fa fa-check"></i><b>14</b> Chart examples</a><ul>
<li class="chapter" data-level="14.1" data-path="chart-examples.html"><a href="chart-examples.html#resources-3"><i class="fa fa-check"></i><b>14.1</b> Resources</a></li>
<li class="chapter" data-level="14.2" data-path="chart-examples.html"><a href="chart-examples.html#bar-charts"><i class="fa fa-check"></i><b>14.2</b> Bar charts</a><ul>
<li class="chapter" data-level="14.2.1" data-path="chart-examples.html"><a href="chart-examples.html#explanaton"><i class="fa fa-check"></i><b>14.2.1</b> Explanaton</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="chart-examples.html"><a href="chart-examples.html#column-chart"><i class="fa fa-check"></i><b>14.3</b> Column chart</a></li>
<li class="chapter" data-level="14.4" data-path="chart-examples.html"><a href="chart-examples.html#a-line-chart"><i class="fa fa-check"></i><b>14.4</b> A line chart</a><ul>
<li class="chapter" data-level="14.4.1" data-path="chart-examples.html"><a href="chart-examples.html#explanation"><i class="fa fa-check"></i><b>14.4.1</b> Explanation</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="chart-examples.html"><a href="chart-examples.html#scatterplot-1"><i class="fa fa-check"></i><b>14.5</b> Scatterplot</a><ul>
<li class="chapter" data-level="14.5.1" data-path="chart-examples.html"><a href="chart-examples.html#explanation-1"><i class="fa fa-check"></i><b>14.5.1</b> Explanation</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="chart-examples.html"><a href="chart-examples.html#histogram"><i class="fa fa-check"></i><b>14.6</b> Histogram</a></li>
<li class="chapter" data-level="14.7" data-path="chart-examples.html"><a href="chart-examples.html#titles-labels-and-other-cleanup"><i class="fa fa-check"></i><b>14.7</b> Titles, labels and other cleanup</a><ul>
<li class="chapter" data-level="14.7.1" data-path="chart-examples.html"><a href="chart-examples.html#title-and-axis-labels"><i class="fa fa-check"></i><b>14.7.1</b> Title and axis labels</a></li>
<li class="chapter" data-level="14.7.2" data-path="chart-examples.html"><a href="chart-examples.html#flip-the-graphic"><i class="fa fa-check"></i><b>14.7.2</b> Flip the graphic</a></li>
<li class="chapter" data-level="14.7.3" data-path="chart-examples.html"><a href="chart-examples.html#fix-exponential-numbers-on-an-axis"><i class="fa fa-check"></i><b>14.7.3</b> Fix exponential numbers on an axis</a></li>
</ul></li>
<li class="chapter" data-level="14.8" data-path="chart-examples.html"><a href="chart-examples.html#interactivity-with-plotly"><i class="fa fa-check"></i><b>14.8</b> Interactivity with plotly</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="verbs.html"><a href="verbs.html"><i class="fa fa-check"></i><b>15</b> Verbs</a><ul>
<li class="chapter" data-level="15.1" data-path="verbs.html"><a href="verbs.html#importexport"><i class="fa fa-check"></i><b>15.1</b> Import/Export</a></li>
<li class="chapter" data-level="15.2" data-path="verbs.html"><a href="verbs.html#data-manipulation"><i class="fa fa-check"></i><b>15.2</b> Data manipulation</a></li>
<li class="chapter" data-level="15.3" data-path="verbs.html"><a href="verbs.html#aggregation"><i class="fa fa-check"></i><b>15.3</b> Aggregation</a></li>
<li class="chapter" data-level="15.4" data-path="verbs.html"><a href="verbs.html#math"><i class="fa fa-check"></i><b>15.4</b> Math</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html"><i class="fa fa-check"></i>Notes about future sessions</a><ul>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#maps"><i class="fa fa-check"></i>Maps</a></li>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#joins-1"><i class="fa fa-check"></i>Joins</a></li>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#data-packages"><i class="fa fa-check"></i>Data packages</a><ul>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#twitter"><i class="fa fa-check"></i>Twitter</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#tools-for-pdfs"><i class="fa fa-check"></i>Tools for PDFs</a></li>
<li class="chapter" data-level="15.5" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#more-graphics-ideas"><i class="fa fa-check"></i><b>15.5</b> More graphics ideas</a></li>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#matt-waites-class-for-ggplot-ideas"><i class="fa fa-check"></i>Matt Waite’s class for ggplot ideas</a><ul>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#has-these"><i class="fa fa-check"></i>06 has these</a></li>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#has"><i class="fa fa-check"></i>07 has</a></li>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#has-1"><i class="fa fa-check"></i>08 has</a></li>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#section"><i class="fa fa-check"></i>09</a></li>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#waffle"><i class="fa fa-check"></i>10: waffle</a></li>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#facet-wrap"><i class="fa fa-check"></i>11 Facet wrap</a></li>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#is-animate"><i class="fa fa-check"></i>12 is animate</a></li>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#is-about-zscores"><i class="fa fa-check"></i>13 is about zscores</a></li>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#more-zscors"><i class="fa fa-check"></i>14 more zscors</a></li>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#was-soccer"><i class="fa fa-check"></i>15 was soccer</a></li>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#was-themes"><i class="fa fa-check"></i>16 was themes</a></li>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#is-residuals"><i class="fa fa-check"></i>17 is residuals</a></li>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#is-simulations"><i class="fa fa-check"></i>18 is simulations</a></li>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#is-tables-as-in-formattables"><i class="fa fa-check"></i>19 is tables as in formattables</a></li>
<li class="chapter" data-level="" data-path="notes-about-future-sessions.html"><a href="notes-about-future-sessions.html#waffle-iron-fixes"><i class="fa fa-check"></i>Waffle iron fixes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Reporting with Data in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tidy" class="section level1">
<h1><span class="header-section-number">Chapter 8</span> Tidy data</h1>
<p>Data “shape” can be important when you are trying to work with and visualize data. In this chapter we’ll discuss “tidy” data and how this style of organization helps us.</p>
<blockquote>
<p>Slides by Hadley Wickham are used with permission from the author.</p>
</blockquote>
<div id="goals-for-this-section-4" class="section level2">
<h2><span class="header-section-number">8.1</span> Goals for this section</h2>
<ul>
<li>Explore what it means to have “tidy” data.</li>
<li>Learn <code>gather()</code>, <code>spread()</code> and other <a href="https://tidyr.tidyverse.org/">tidyr</a> verbs.</li>
<li>Use Mixed Beverage Gross Receipts to explore shaping data.
<ul>
<li>We’ll introduce the RSocrata package to get the data.</li>
</ul></li>
<li>Explore and chart the alcohol data to practice our skills.</li>
</ul>
</div>
<div id="what-is-tidy-data" class="section level2">
<h2><span class="header-section-number">8.2</span> What is tidy data</h2>
<p>“Tidy” data is well formatted so each variable is in a column, each observation is in a row and each value is a cell. Our first step in working with any data is to make sure we are “tidy”.</p>
<div class="figure">
<img src="images/tidy-example.png" alt="Tidy data definition" />
<p class="caption">Tidy data definition</p>
</div>
<p>It’s easiest to see the difference through examples. The data frame below is of tuberculosis reports from the World Health Organization.</p>
<ul>
<li>Each row is a set of observations (or case) from a single country for a single year.</li>
<li>Each column describes a unique variable. The year, the number of cases and the population of the country at that time.</li>
</ul>
<div class="figure">
<img src="images/tidy-table-tidy.png" alt="A tidy table" />
<p class="caption">A tidy table</p>
</div>
<p>Table2 below isn’t tidy. The <strong>count</strong> column contains two different type of values.</p>
<div class="figure">
<img src="images/tidy-table-nottidy.png" alt="A tidy table" />
<p class="caption">A tidy table</p>
</div>
<p>When our data is tidy, it is easy to manipulate. We can use functions like <code>mutate()</code> to calculate new values for each case.</p>
<div class="figure">
<img src="images/tidy-table-manipulate.png" alt="Manipulate a tidy table" />
<p class="caption">Manipulate a tidy table</p>
</div>
</div>
<div id="tidyr-package" class="section level2">
<h2><span class="header-section-number">8.3</span> Tidyr package</h2>
<p>When our data is tidy, we can use the <a href="https://tidyr.tidyverse.org/">tidyr</a> package to reshape the layout of our data to suit our needs.</p>
<p>In the figure below, the table on the left is “wide”. There are are multiple year columns describing the same variable. It might be useful if we want to calculate the difference of the values for two different years. It’s less useful if we want plot on a graphic because we don’t have columns to map as X and Y values.</p>
<p>The table on the right is “long”, in that each column describes a single variable. It is this shape we need when we want to plot values on a chart. We can then set our “Year” column as an X axis, our “n” column on our Y axis, and group by the “Country”.</p>
<div class="figure">
<img src="images/tidy-wide-vs-long.png" alt="Wide vs long" />
<p class="caption">Wide vs long</p>
</div>
</div>
<div id="the-tidyr-verbs" class="section level2">
<h2><span class="header-section-number">8.4</span> The tidyr verbs</h2>
<p>We’ll use functions within the <a href="https://tidyr.tidyverse.org/">tidyr</a> package to manipulate data to our liking, depending on our need.</p>
<div class="figure">
<img src="images/tidy-verbs.png" alt="Tidy verbs" />
<p class="caption">Tidy verbs</p>
</div>
</div>
<div id="set-up-the-mixbev-project" class="section level2">
<h2><span class="header-section-number">8.5</span> Set up the mixbev project</h2>
<p>We’re going to work in a new project with new data for this assignment. I will try to get you up and running as quickly as possible.</p>
<ul>
<li>In RStudio, choose File &gt; New Project</li>
<li>Walk through the steps to create a New Project in a New Directory called <code>yourname-mixbev</code>.</li>
<li>Once you have your project, create a new RNotebook. Save the file and name it <code>01-mixbev-import.Rmd</code>.</li>
<li>Go to <a href="https://gist.githubusercontent.com/critmcdonald/151e1fa44c82ea5ca337b204cfc095d6/raw/c475fcce8b701cd03721dc1c753724c6e4636cd1/01-mixbev-import.Rmd">this link</a> and copy the text and replace everything in your RNotebook.</li>
</ul>
<p>There are a couple of things we need to do before you run this notebook:</p>
<ul>
<li>In the R Console, run <code>install.packages(&quot;RSocrata&quot;)</code></li>
<li>Use the Files pane to create a new folder called <code>data-raw</code> so we have a place to save our data.</li>
<li>Now use <strong>Cmd-option-R</strong> (or go to Run &gt; Run All) to run the notebook.</li>
</ul>
<p>Running that notebook will download three years of data from Travis County establishments and save it into your <code>data-raw</code> folder in your project. How that is done is all documented in that notebook, but we may spend some time in class explaining going over it.</p>
</div>
<div id="create-an-explore-notebook" class="section level2">
<h2><span class="header-section-number">8.6</span> Create an explore notebook</h2>
<p>Now that we have data we don’t have to download it again. Let’s create a new RNotebook to import and explore it (and learn Tidyr while we are at it).</p>
<ul>
<li>Create a new RNotebook. Save the file as <code>02-mixbev-explore.Rmd</code>.</li>
<li>Update the title in the metadata.</li>
<li>Remove the boilerplate below the data.</li>
<li>Add the code below, then <strong>Restart R and Run All Chunks</strong>.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
<span class="kw">library</span>(lubridate)
<span class="kw">library</span>(scales)

<span class="co"># import the data</span>
receipts &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&quot;data-raw/receipts_api.rds&quot;</span>)</code></pre></div>
<div id="peruse-the-data" class="section level3">
<h3><span class="header-section-number">8.6.1</span> Peruse the data</h3>
<p>In the environment window, click on the <strong>receipts</strong> data frame so it opens and you can look at the data. Some key things to know about the data:</p>
<ul>
<li>Columns with <strong><code>location_</code></strong> are about a specific restaurant or bar selling alcohol.</li>
<li>Columns with <strong><code>taxpayer_</code></strong> are about the owners of that establishment.</li>
<li>The monetary amounts for <strong><code>_receipts</code></strong> are total sales numbers for that establishment in that month.</li>
<li>The <strong><code>obligation_end_date</code></strong> is the last day of the month for those sales.</li>
<li>The liquor type sales like beer and wine <em>should</em> all add up to the <strong>total_receipts</strong>, but sometimes type sales are blank. I don’t trust <strong>cover_charge_receipts</strong> at all.</li>
<li>There are several other columns we won’t deal with in this lesson.</li>
</ul>
<p>So these are NOT the number of drinks sold. It’s the amount of money brought in for the total sale of each type of liquor within that month. The <strong>total_receipts</strong> is used to calculate tax paid to the state on those sales based on a formula. See the record layout on <a href="https://data.texas.gov/Government-and-Taxes/Mixed-Beverage-Gross-Receipts/naix-2893">Socrata</a> for more information.</p>
</div>
</div>
<div id="what-might-we-learn-about-this-dataset" class="section level2">
<h2><span class="header-section-number">8.7</span> What might we learn about this dataset</h2>
<p>If we look at the data set, there are a series of questions we might ask it.</p>
<ul>
<li>How have total sales changed over the past three years?</li>
<li>Who has sold the most alcohol over the past three years?</li>
<li>Which campus-area bars have sold the most, and what are their sales trends?</li>
<li>Do these campus-area bars sell more beer, wine or liquor?</li>
<li>Have the number of establishments that sell alcohol increased? If so, where?</li>
</ul>
<p>There are others for sure, but for this lesson we’ll concentrate on campus-area bars you <em>might</em> be familiar with.</p>
</div>
<div id="add-years-and-months-values" class="section level2">
<h2><span class="header-section-number">8.8</span> Add years and months values</h2>
<p>We will end up doing a lot of summaries based on year and month of the data. It will be easier to do that if we create some new columns that have those values.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">receipts &lt;-<span class="st"> </span>receipts <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(
    <span class="co"># sales_year = year(obligation_end_date_yyyymmdd),</span>
    <span class="dt">sales_year =</span> <span class="kw">year</span>(obligation_end_date_yyyymmdd) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.character</span>(),
    <span class="dt">sales_month =</span> <span class="kw">month</span>(obligation_end_date_yyyymmdd, <span class="dt">label =</span> <span class="ot">TRUE</span>)
  )</code></pre></div>
<blockquote>
<p>I specifically coerced <code>sales_year</code> into a string because the year as a continuous number was causing problems with plots later when I got an axis mark for “2016.5”. Probably not the best solution, but it worked.</p>
</blockquote>
</div>
<div id="campus-bars" class="section level2">
<h2><span class="header-section-number">8.9</span> Campus bars</h2>
<p>Let’s take a look at sales around campus. Make a data frame of just the receipts from the 78705 area.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">uni_area &lt;-<span class="st"> </span>receipts <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(
    location_zip  <span class="op">==</span><span class="st"> &#39;78705&#39;</span>
  )

<span class="co"># peek at the result</span>
uni_area <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>()</code></pre></div>
<div id="total-78705-sales-leaders-in-2018" class="section level3">
<h3><span class="header-section-number">8.9.1</span> Total 78705 sales leaders in 2018</h3>
<p>Let’s make a quick table to add <code>total_receipts</code> for 2018 so we can find the top selling bars from last year. We can do that by filtering for 2018, grouping by location and address, and then summing together the total receipts.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">uni_area <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(sales_year <span class="op">==</span><span class="st"> </span><span class="dv">2018</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(location_name, location_address) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(
    <span class="dt">total_sales =</span> <span class="kw">sum</span>(total_receipts)
  ) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(total_sales)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">head</span>(<span class="dv">10</span>)</code></pre></div>
<p>And we get this:</p>
<table>
<thead>
<tr class="header">
<th>location_name</th>
<th>location_address</th>
<th>total_sales</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>EXECUTIVE EDUCATION AND CONFERENCE CENTER</td>
<td>1900 UNIVERSITY AVE</td>
<td>1684571</td>
</tr>
<tr class="even">
<td>SPIDER HOUSE</td>
<td>2908 FRUTH ST</td>
<td>1575812</td>
</tr>
<tr class="odd">
<td>CAIN &amp; ABEL’S</td>
<td>2313 RIO GRANDE ST</td>
<td>1051230</td>
</tr>
<tr class="even">
<td>TRUDY’S TEXAS STAR CAFE</td>
<td>409 W 30TH ST</td>
<td>1012269</td>
</tr>
<tr class="odd">
<td>THE HOLE IN THE WALL</td>
<td>2538 GUADALUPE ST</td>
<td>827799</td>
</tr>
<tr class="even">
<td>HOTEL ELLA/GOODAL’S KITCHEN &amp; BAR</td>
<td>1900 RIO GRANDE ST</td>
<td>707431</td>
</tr>
<tr class="odd">
<td>DOC’S MOTORWORKS 38TH</td>
<td>1106 W 38TH ST</td>
<td>561019</td>
</tr>
<tr class="even">
<td>THE LOCAL PUB AND PATIO</td>
<td>2610 GUADALUPE ST</td>
<td>544261</td>
</tr>
<tr class="odd">
<td>VIA 313 PIZZA RESTAURANT II</td>
<td>3016 GUADALUPE ST</td>
<td>531878</td>
</tr>
<tr class="even">
<td>THE BACK LOT</td>
<td>606 MAIDEN LN</td>
<td>494638</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="west-campus-student-hot-spots" class="section level2">
<h2><span class="header-section-number">8.10</span> West Campus student hot spots</h2>
<p>Looking at the list above, let’s filter our original data to some top student hangouts that we know are still open.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">student_bars &lt;-<span class="st"> </span>receipts <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(
    location_name <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(
      <span class="st">&quot;SPIDER HOUSE&quot;</span>,
      <span class="st">&quot;CAIN &amp; ABEL&#39;S&quot;</span>,
      <span class="st">&quot;TRUDY&#39;S TEXAS STAR CAFE&quot;</span>,
      <span class="st">&quot;THE HOLE IN THE WALL&quot;</span>,
      <span class="st">&quot;THE LOCAL PUB AND PATIO&quot;</span>
    )
  )
  
<span class="co"># check the results</span>
student_bars <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">count</span>(location_name, location_address)</code></pre></div>
<p>Note the <code>filter()</code> function above. In order to feed in a list of location names into the filter, I used the <code>%in%</code> operator (instead of <code>==</code>) and I put list of locations into a <code>c()</code> function. The C stands for concatenate, FWIW.</p>
<p>After creating the <code>student_bars</code> data frame above, I used <code>count()</code> to make sure we caught all the bars and made sure each had the same number of reports. Which looks like this:</p>
<table>
<thead>
<tr class="header">
<th>location_name</th>
<th>location_address</th>
<th>n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>CAIN &amp; ABEL’S</td>
<td>2313 RIO GRANDE ST</td>
<td>36</td>
</tr>
<tr class="even">
<td>SPIDER HOUSE</td>
<td>2908 FRUTH ST</td>
<td>36</td>
</tr>
<tr class="odd">
<td>THE HOLE IN THE WALL</td>
<td>2538 GUADALUPE ST</td>
<td>36</td>
</tr>
<tr class="even">
<td>THE LOCAL PUB AND PATIO</td>
<td>2610 GUADALUPE ST</td>
<td>36</td>
</tr>
<tr class="odd">
<td>TRUDY’S TEXAS STAR CAFE</td>
<td>409 W 30TH ST</td>
<td>36</td>
</tr>
</tbody>
</table>
<p>Note I didn’t save the <code>count()</code> function back to the data frame. I just viewed that to the notebook so we could check our work.</p>
</div>
<div id="campus-area-bar-sales-over-time" class="section level2">
<h2><span class="header-section-number">8.11</span> Campus-area bar sales over time</h2>
<div id="visualizing-your-visualization" class="section level3">
<h3><span class="header-section-number">8.11.1</span> Visualizing your visualization</h3>
<p>Now, if we are interested in charting it helps to think about what we need and how to shape our data to get it.</p>
<p>Let’s start with charting <strong>how sales at each bar have changed over the past three years</strong>. Since we are looking at value over time for multiple things, a line chart will probably work best.</p>
<p>If our basic line chart works like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="op">&lt;</span>DATA<span class="op">&gt;</span>, <span class="kw">aes</span>(<span class="dt">x=</span><span class="op">&lt;</span>COL_VALUE<span class="op">&gt;</span>, <span class="dt">y=</span><span class="op">&lt;</span>COL_VALUE<span class="op">&gt;</span>, <span class="dt">group=</span><span class="op">&lt;</span>COL_VALUE<span class="op">&gt;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>()</code></pre></div>
<p>We need to figure out how to configure our data to fit the chart.</p>
<ul>
<li>For the “X” value (horizontal) we have the <code>sales_year</code> field to track over time.</li>
<li>For the “Y” value (vertical) we want the total sales of each bar for that year. We’ll need to do a summary to get that.</li>
<li>We want a line for each campus bar, which means we need a column for <code>location_name</code> for our “group”, too.</li>
</ul>
<p>We create this data frame by using our <code>group_by()</code> on <code>location_name</code> and <code>sales_year</code> and then <code>summarize()</code> to get our total sales by our grouping:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">student_bars_grouped &lt;-<span class="st"> </span>student_bars <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(location_name, sales_year) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(
    <span class="dt">total_sales =</span> <span class="kw">sum</span>(total_receipts)
  )
  
<span class="co"># peek at the results</span>
student_bars_grouped <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>()</code></pre></div>
<p>Which ends up looking this this:</p>
<table>
<thead>
<tr class="header">
<th>location_name</th>
<th>sales_year</th>
<th align="right">total_sales</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>CAIN &amp; ABEL’S</td>
<td>2016</td>
<td align="right">896114</td>
</tr>
<tr class="even">
<td>CAIN &amp; ABEL’S</td>
<td>2017</td>
<td align="right">990631</td>
</tr>
<tr class="odd">
<td>CAIN &amp; ABEL’S</td>
<td>2018</td>
<td align="right">1051230</td>
</tr>
<tr class="even">
<td>SPIDER HOUSE</td>
<td>2016</td>
<td align="right">1797800</td>
</tr>
<tr class="odd">
<td>SPIDER HOUSE</td>
<td>2017</td>
<td align="right">1721580</td>
</tr>
<tr class="even">
<td>SPIDER HOUSE</td>
<td>2018</td>
<td align="right">1575812</td>
</tr>
</tbody>
</table>
<p>Now we can plug in our columns to get our chart:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(student_bars_grouped, <span class="kw">aes</span>(<span class="dt">x=</span>sales_year, <span class="dt">y=</span>total_sales, <span class="dt">group=</span>location_name)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">color=</span>location_name)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels=</span>comma)</code></pre></div>
<div class="figure">
<img src="images/tidy-campus-bars-over-time.png" alt="Campus bar sales over time" />
<p class="caption">Campus bar sales over time</p>
</div>
<p>We’ve added a couple of do-dads to our line chart to make it prettier, like adding a color aesthetic the <code>geom_line()</code> function to color the lines and give us a legend, and a scale with labels to make the Y numbers pretty.</p>
</div>
<div id="what-did-we-find" class="section level3">
<h3><span class="header-section-number">8.11.2</span> What did we find?</h3>
<p>Looking at the chart, we can see that Cain &amp; Abel’s is the only top campus-area bar with an increase in alcohol sales over each of the past three years. The Hole in the Wall did have a good 2018, reversing a downward trend. Everywhere else dropped sales each year.</p>
</div>
</div>
<div id="types-of-sales-within-student-bars" class="section level2">
<h2><span class="header-section-number">8.12</span> Types of sales within student bars</h2>
<p>If we want to see how beer, liquor and wine sales differ at an establishment, we could use a very similar chart, but we would want each line to be the type of alcohol: beer, wine or liquor.</p>
<p>But this is how our columns look right now. Beer, wine and liquor are separate columns.</p>
<div class="figure">
<img src="images/tidy-receipt-cols.png" alt="Sales columns" />
<p class="caption">Sales columns</p>
</div>
<p>This is where we introduce <code>gather()</code> from tidyr so we can shape our data to meet our needs.</p>
</div>
<div id="how-gather-works" class="section level2">
<h2><span class="header-section-number">8.13</span> How gather() works</h2>
<p>The <a href="https://tidyr.tidyverse.org/reference/gather.html"><code>gather()</code></a> function is what we use to change wide data into long data. We are “gathering” all the extra columns into two: one for the value and one to describe it. In the example below, a <strong>key</strong> column is created called “Year” and a <strong>value</strong> column called “n” is created to hold the values from each of the yearly columns. For each value, a new row is created, and the column name is used for the “key” and the data is use for the “value”.</p>
<div class="figure">
<img src="images/tidy-gather-show.png" alt="Show how gather works" />
<p class="caption">Show how gather works</p>
</div>
<p>We can see how this works by tracking a single value from one shape to the other:</p>
<div class="figure">
<img src="images/tidy-wide-vs-long.png" alt="Show gather with single value" />
<p class="caption">Show gather with single value</p>
</div>
<p>Now, how do we define this in code?</p>
<div class="figure">
<img src="images/tidy-gather-function.png" alt="Gather as a function" />
<p class="caption">Gather as a function</p>
</div>
<p>We are, of course, starting with the data frame and then piping it into the <code>gather()</code> function. The first value we have to give the function is to name our <strong>key</strong> column.</p>
<div class="figure">
<img src="images/tidy-name-key.png" alt="Name the key column" />
<p class="caption">Name the key column</p>
</div>
<p>And the next value we give it is name of the <strong>value</strong> column.</p>
<div class="figure">
<img src="images/tidy-name-value.png" alt="Name the value column" />
<p class="caption">Name the value column</p>
</div>
<p>Then we have to give it the <strong>range of columns</strong> that we want to gather. You can define those in different ways.</p>
<p>The first method is a number range of the columns, starting in order of the columns in the data frame. So, for our example above, we want the second, third and fourth column, so we use the range <code>2:4</code>.</p>
<div class="figure">
<img src="images/tidy-name-range.png" alt="Name the range" />
<p class="caption">Name the range</p>
</div>
<p>Or, we could supply those columns in other ways, like by their column names:</p>
<div class="figure">
<img src="images/tidy-name-namerange.png" alt="Range as column names" />
<p class="caption">Range as column names</p>
</div>
<p>Or by specifying which columns we <em>don’t</em> want to gather:</p>
<div class="figure">
<img src="images/tidy-name-deselect.png" alt="Range through deselect" />
<p class="caption">Range through deselect</p>
</div>
</div>
<div id="applying-gather-to-beer-wine-and-liquor" class="section level2">
<h2><span class="header-section-number">8.14</span> Applying gather() to beer, wine and liquor</h2>
<p>Let’s start by making a new data frame with just the columns we need to work with. We are starting with the <code>student_bars</code> data frame we created that has the three years of receipts from just our five campus-area bars:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">student_sales &lt;-<span class="st"> </span>student_bars <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(location_name, sales_year, beer_receipts, wine_receipts, liquor_receipts) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">rename</span>(
    <span class="dt">beer =</span> beer_receipts,
    <span class="dt">wine =</span> wine_receipts,
    <span class="dt">liquor =</span> liquor_receipts
  )
student_sales <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>() <span class="co"># to show our results</span></code></pre></div>
<p>We get a result like this:</p>
<table>
<thead>
<tr class="header">
<th>location_name</th>
<th>sales_year</th>
<th>beer</th>
<th>wine</th>
<th>liquor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>THE LOCAL PUB AND PATIO</td>
<td>2018</td>
<td>24832</td>
<td>163</td>
<td>14202</td>
</tr>
<tr class="even">
<td>THE LOCAL PUB AND PATIO</td>
<td>2017</td>
<td>27702</td>
<td>470</td>
<td>16086</td>
</tr>
<tr class="odd">
<td>THE HOLE IN THE WALL</td>
<td>2018</td>
<td>30374</td>
<td>370</td>
<td>32533</td>
</tr>
<tr class="even">
<td>THE HOLE IN THE WALL</td>
<td>2017</td>
<td>34232</td>
<td>174</td>
<td>32789</td>
</tr>
<tr class="odd">
<td>THE HOLE IN THE WALL</td>
<td>2018</td>
<td>49320</td>
<td>252</td>
<td>42080</td>
</tr>
<tr class="even">
<td>CAIN &amp; ABEL’S</td>
<td>2016</td>
<td>34239</td>
<td>456</td>
<td>42543</td>
</tr>
</tbody>
</table>
<p>Now, if we can “gather” the beer, wine and liquor columns into two new columns – alcohol type and sales amount – then we could group and sum by the year and type.</p>
<p>The code below builds the new data frame we’ll use for our chart (<code>student_sales_grouped</code>) but you skip the beginning data frame assignment and walk through it line by line to see how it gets built, starting with the <code>student_sales</code> data frame. Once you have it, then assign it back to <code>student_sales_group</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">student_sales_grouped &lt;-<span class="st"> </span>student_sales <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">gather</span>(alcohol_type, sales_by_type, <span class="dv">3</span><span class="op">:</span><span class="dv">5</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(location_name, sales_year, alcohol_type) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(
    <span class="dt">sales_sum_year =</span> <span class="kw">sum</span>(sales_by_type)
  )
  
<span class="co"># peek at the result</span>
student_sales_grouped <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>() </code></pre></div>
<ul>
<li>We start with the <code>student_sales</code> data frame, where each row has the sales for each month of the year in multiple columns.</li>
<li><code>gather()</code> names our fields “alcohol_type” and “sales_by_type” and gathers our beer, wine and liquor columns. At this point, each row of data has the individual sale of a type of alcohol for each month of each year.</li>
<li><code>group_by()</code> collects our data by the name, year and type. This prepares us to:</li>
<li><code>summarize()</code> adds together all the beer sales for each month are summed up into one row for each year.</li>
</ul>
<div id="plot-sales-by-type-for-a-single-campus-area-bar" class="section level3">
<h3><span class="header-section-number">8.14.1</span> Plot sales by type for a single campus-area bar</h3>
<p>Let’s figure out the line chart with one establishment first:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cain &lt;-<span class="st"> </span>student_sales_grouped <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(location_name <span class="op">==</span><span class="st"> &quot;CAIN &amp; ABEL&#39;S&quot;</span>)

<span class="kw">ggplot</span>(cain, <span class="kw">aes</span>(<span class="dt">x=</span>sales_year, <span class="dt">y=</span>sales_sum_year, <span class="dt">group=</span>alcohol_type, <span class="dt">color=</span>alcohol_type)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>()</code></pre></div>
<p>We get our chart like this:</p>
<div class="figure">
<img src="images/tidy-cain-chart.png" alt="Cain &amp; Abel’s alcohol sales" />
<p class="caption">Cain &amp; Abel’s alcohol sales</p>
</div>
</div>
<div id="plot-sales-by-type-for-multiple-campus-area-bars" class="section level3">
<h3><span class="header-section-number">8.14.2</span> Plot sales by type for multiple campus-area bars</h3>
<p>For this chart, we are going to duplicate what we did for the graphic above, and then instead of applying to the <code>cain</code> data frame, we’ll substitute in our our <code>student_sales_grouped</code> data frame so have all the West Campus bars.</p>
<p>And now we can introduce the <code>facet_wrap()</code>, which allows you to duplicate a graphic based on one of the categories in the data. We feed the <code>facet_wrap()</code> function with the variable (the column name) we want to duplicate. Weirdly, it has to start with a tilde, like this: <code>facet_wrap(~location_name)</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(student_sales_grouped, <span class="kw">aes</span>(<span class="dt">x=</span>sales_year, <span class="dt">y=</span>sales_sum_year, <span class="dt">group=</span>alcohol_type, <span class="dt">color=</span>alcohol_type)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>location_name) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">label=</span>comma)</code></pre></div>
<div class="figure">
<img src="images/tidy-student-bars-wrapped.png" alt="Student bars as a facet wrap" />
<p class="caption">Student bars as a facet wrap</p>
</div>
</div>
<div id="what-did-we-learn" class="section level3">
<h3><span class="header-section-number">8.14.3</span> What did we learn?</h3>
<p>Liquor sales are what is driving Cain &amp; Abel’s increase in revenue. Wine sales are pretty low everywhere and Trudy’s really sells a lot of liquor. It’s those Mexican Martinis and Margaritas, I imagine.</p>
</div>
</div>
<div id="the-spread-function" class="section level2">
<h2><span class="header-section-number">8.15</span> The spread() function</h2>
<p>There is another tidyr function called <a href="https://tidyr.tidyverse.org/reference/spread.html"><code>spread()</code></a> that does the opposite of <code>gather()</code>. We won’t do an example with this lesson, but this is how it generally works.</p>
<div class="figure">
<img src="images/tidy-spread-function.png" alt="The spread() function" />
<p class="caption">The spread() function</p>
</div>
<div class="figure">
<img src="images/tidy-spread-example.png" alt="A spread() example" />
<p class="caption">A spread() example</p>
</div>
</div>
<div id="practice-assignment-exploring-the-top-seller" class="section level2">
<h2><span class="header-section-number">8.16</span> Practice assignment: Exploring the top seller</h2>
<p>This assignment looks a little further into some specific establishments from the Mixed Beverage Data. Here are the directions, with lots of hints thrown in.</p>
<ul>
<li>Create a new notebook called “03-practice.Rmd”. Use the same libraries and data as the in-class assignment.</li>
<li>Find the establishment with highest total receipts in last three years. See the first Bonus section below for the the code.</li>
<li>For the top establishment found, <strong>create a bar chart with sales by year</strong>. Here are some hints:
<ul>
<li>Start with <code>receipts</code>, then filter by the <code>location_name</code> and the <code>location_address</code>. (You have to include <code>location_address</code> because there is more than one location in Ausitn for this chain.) Assign that to a data frame that you can use going forward.</li>
<li>Group by <code>sales_year</code>, then summarize to get the <code>sum(total_receipts)</code>. Review <a href="https://utdata.github.io/rwd-class/transform.html#summarize">Summarize</a> if needed. Save the result into a new data frame.</li>
<li>Use <code>ggplot()</code> with <code>geom_bar(stat=&quot;identity&quot;)</code>. Review the less verbose <a href="https://utdata.github.io/rwd-class/graphics.html#plot-our-wells-by-county">wells by county</a> for an example of how to write the plot.</li>
</ul></li>
<li>For that top establishment, <strong>create a bar chart with total_receipts each month</strong>. Some hints:
<ul>
<li>Don’t over think this. You already have a filtered data set, and you can plot the x axis on the <code>obligation_end_date_yyyymmdd</code>.</li>
</ul></li>
<li>Because the chart shows trends but it’s hard to see the values for the top months, <strong>create a table showing the top monthly total sales by month</strong>. Some hints:
<ul>
<li>Select the <code>oblibgation_end_date_yyyymmdd</code> and arrange the <code>total_receipts</code> in descending order. Show just the top by piping into <code>head()</code></li>
</ul></li>
<li>For that establishment, <strong>create a line chart with sales by alcohol type by year</strong>. This one is more challenging, but you have everything you need in the chapter when we did this for Cain &amp; Abel’s. Here are some hints:
<ul>
<li>You can start from the the filtered data that you did with the previous chart.</li>
<li>Create a new data frame with just the columns you need: select name, sales_year, beer, wine, liquor</li>
<li>Use <code>gather()</code> to collect the beer, wine, liquor columns as <code>alcohol_type</code> and <code>sales_by_type</code>. This is the same as we did in class.</li>
<li>Group by <code>sales_year</code>, <code>alcohol_type</code>.</li>
<li>Summarize to get the <code>sales_sum_year</code>.</li>
<li>Plot as a geom_line chart with x=sales_year, y=sales_sum_year, group and color as alcohol_type.</li>
</ul></li>
<li>Lastly, to show that once you have code you can re-purpose it, <strong>create a line chart of sales by alcohol type by year for the Circuit of the Americas</strong>. Your hint:
<ul>
<li>Create a new data frame with just the Circuit of the Americas data.</li>
<li>Copy the steps from the last chart, and change out the data frame name.</li>
</ul></li>
</ul>
</div>
<div id="bonus-top-5-sellers-in-travis-county-over-three-years" class="section level2">
<h2><span class="header-section-number">8.17</span> Bonus: Top 5 sellers in Travis County over three years</h2>
<p>Because some chains might have that same <code>location_name</code> but more than one location, we need to group by both the <code>location_name</code> and the <code>location_address</code> fields. Then we can summarize their total sales.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">receipts <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(location_name, location_address) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(
    <span class="dt">total_sales =</span> <span class="kw">sum</span>(total_receipts)
  ) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(total_sales)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">head</span>(<span class="dv">5</span>)</code></pre></div>
<p>Which gives you something like this:</p>
<table>
<thead>
<tr class="header">
<th>location_name</th>
<th>location_address</th>
<th align="right">total_sales</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>WLS BEVERAGE CO</td>
<td>110 E 2ND ST</td>
<td align="right">35878211</td>
</tr>
<tr class="even">
<td>RYAN SANDERS SPORTS</td>
<td>9201 CIRCUIT OF THE AMERICAS BLVD</td>
<td align="right">20714630</td>
</tr>
<tr class="odd">
<td>W HOTEL AUSTIN</td>
<td>200 LAVACA ST</td>
<td align="right">15435458</td>
</tr>
<tr class="even">
<td>ROSE ROOM/ 77 DEGREE</td>
<td>11500 ROCK ROSE AVE</td>
<td align="right">14726420</td>
</tr>
<tr class="odd">
<td>THE DOGWOOD DOMAIN</td>
<td>11420 ROCK ROSE AVE STE 700</td>
<td align="right">14231072</td>
</tr>
</tbody>
</table>
<p>What exactly is that top location? (Google it). It looks like that location (hint: a hotel) has sold more that twice the amount as the next hotel.</p>
<p>What is the second location? That could be pretty interesting to look further into as well.</p>
</div>
<div id="bonus-total-sales-by-county" class="section level2">
<h2><span class="header-section-number">8.18</span> Bonus: Total sales by county</h2>
<p>So, are alcohol sales going up in Travis County? We can use our new <code>sales_year</code> column to group the data and summarize by the sum of <code>total_sales</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">receipts <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(sales_year) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(
    <span class="dt">total_sales =</span> <span class="kw">sum</span>(total_receipts)
  )</code></pre></div>
<p>If you want to <em>see</em> the result, we can plot as a bar chart. I’m repeating our code above, but then shoving it into a new data frame, which we use to plot.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">receipts_group_all &lt;-<span class="st"> </span>receipts <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(sales_year) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(
    <span class="dt">total_sales =</span> <span class="kw">sum</span>(total_receipts)
  )

<span class="kw">ggplot</span>(receipts_group_all, <span class="kw">aes</span>(<span class="dt">x=</span>sales_year, <span class="dt">y=</span>total_sales)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels=</span>comma)</code></pre></div>
<p>The last line in the plot comes from the <a href="https://www.rdocumentation.org/packages/scales/versions/0.4.1">scales</a> package and it gives us pretty numbers on the Y axis.</p>
<p>If you are writing a story about alcohol sales in Travis County over the last three years, you can say that sales have risen over each year. You might go further and compare the sales to the population over the same time period, but we’ll skip that for now.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="graphics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="reordering-factors.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/08-tidy.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Reporting with Data in R - 10&nbsp; Plotting for answers</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./group-dates.html" rel="next">
<link href="./bind-join.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./answers.html"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Plotting for answers</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Reporting with Data in R</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About this book</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./install.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Install Party</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introduction to R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./counts-import.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Summarize: count - import</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./counts-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Summarize: count - analysis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sums-import.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Summarize: math - import</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sums-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Summarize: math - analysis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./plots.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Data Viz - Intro to ggplot</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tidy-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Tidy data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bind-join.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Bind and join</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./answers.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Plotting for answers</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./group-dates.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Grouping by dates</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">R Functions</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./troubleshooting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Troubleshooting</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./explore.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Exploring a new dataset</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./charts-tips.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Chart production tips</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#goals-of-this-chapter" id="toc-goals-of-this-chapter" class="nav-link active" data-scroll-target="#goals-of-this-chapter"><span class="header-section-number">10.1</span> Goals of this chapter</a></li>
  <li><a href="#project-setup" id="toc-project-setup" class="nav-link" data-scroll-target="#project-setup"><span class="header-section-number">10.2</span> Project setup</a></li>
  <li><a href="#import-cleaned-data" id="toc-import-cleaned-data" class="nav-link" data-scroll-target="#import-cleaned-data"><span class="header-section-number">10.3</span> Import cleaned data</a></li>
  <li><a href="#make-a-searchable-table" id="toc-make-a-searchable-table" class="nav-link" data-scroll-target="#make-a-searchable-table"><span class="header-section-number">10.4</span> Make a searchable table</a>
  <ul class="collapse">
  <li><a href="#pivot-wider" id="toc-pivot-wider" class="nav-link" data-scroll-target="#pivot-wider"><span class="header-section-number">10.4.1</span> Pivot wider</a></li>
  <li><a href="#make-a-datatable" id="toc-make-a-datatable" class="nav-link" data-scroll-target="#make-a-datatable"><span class="header-section-number">10.4.2</span> Make a datatable</a></li>
  </ul></li>
  <li><a href="#choosing-a-chart-to-display-data" id="toc-choosing-a-chart-to-display-data" class="nav-link" data-scroll-target="#choosing-a-chart-to-display-data"><span class="header-section-number">10.5</span> Choosing a chart to display data</a></li>
  <li><a href="#plot-yearly-student-percentage" id="toc-plot-yearly-student-percentage" class="nav-link" data-scroll-target="#plot-yearly-student-percentage"><span class="header-section-number">10.6</span> Plot yearly student percentage</a>
  <ul class="collapse">
  <li><a href="#build-the-statewide-percentage-by-year-data" id="toc-build-the-statewide-percentage-by-year-data" class="nav-link" data-scroll-target="#build-the-statewide-percentage-by-year-data"><span class="header-section-number">10.6.1</span> Build the statewide percentage by year data</a></li>
  <li><a href="#build-the-statewide-percentage-chart" id="toc-build-the-statewide-percentage-chart" class="nav-link" data-scroll-target="#build-the-statewide-percentage-chart"><span class="header-section-number">10.6.2</span> Build the statewide percentage chart</a></li>
  </ul></li>
  <li><a href="#districts-by-benchmark-and-year" id="toc-districts-by-benchmark-and-year" class="nav-link" data-scroll-target="#districts-by-benchmark-and-year"><span class="header-section-number">10.7</span> Districts by benchmark and year</a>
  <ul class="collapse">
  <li><a href="#build-the-audit-flag-data" id="toc-build-the-audit-flag-data" class="nav-link" data-scroll-target="#build-the-audit-flag-data"><span class="header-section-number">10.7.1</span> Build the audit flag data</a></li>
  <li><a href="#build-the-audit-flag-chart" id="toc-build-the-audit-flag-chart" class="nav-link" data-scroll-target="#build-the-audit-flag-chart"><span class="header-section-number">10.7.2</span> Build the audit flag chart</a></li>
  <li><a href="#which-chart-is-best" id="toc-which-chart-is-best" class="nav-link" data-scroll-target="#which-chart-is-best"><span class="header-section-number">10.7.3</span> Which chart is best?</a></li>
  </ul></li>
  <li><a href="#local-districts" id="toc-local-districts" class="nav-link" data-scroll-target="#local-districts"><span class="header-section-number">10.8</span> Local districts</a></li>
  <li><a href="#the-assignments" id="toc-the-assignments" class="nav-link" data-scroll-target="#the-assignments"><span class="header-section-number">10.9</span> The assignments</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="answers" class="quarto-section-identifier"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Plotting for answers</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Not yet updated for Quarto - Need to remove datatable</p>
</div>
</div>
<p>This is the second of of a two-chapter project. Now that we have assembled and cleaned our data, we need to answer these questions in our followup to the <a href="https://www.houstonchronicle.com/denied/">Denied</a> series:</p>
<ul>
<li>Has the percentage of special education students in Texas changed since the benchmarking policy was dropped??</li>
<li>How many districts were above that arbitrary 8.5% benchmark before and after the changes?</li>
<li>How have local districts changed?</li>
</ul>
<p>The idea here is to answer those questions through plotting. We’ll use this chapter to walk through the process of using plots to explore and find answers in your data.</p>
<section id="goals-of-this-chapter" class="level2" data-number="10.1">
<h2 data-number="10.1" class="anchored" data-anchor-id="goals-of-this-chapter"><span class="header-section-number">10.1</span> Goals of this chapter</h2>
<ul>
<li>Introduce <code>datatables()</code> from the <a href="https://rstudio.github.io/DT/">DT package</a></li>
<li>Practice pivots to prepare data for plotting</li>
<li>Practice plots to reveal insights in data</li>
<li>There are wrap-up assignments that include writing, charts and this analysis</li>
</ul>
<p>When a new concept is introduced, it’s shown and explained here. However, there are also <strong>on your own</strong> parts where you apply concepts you have learned in previous chapters or assignments.</p>
</section>
<section id="project-setup" class="level2" data-number="10.2">
<h2 data-number="10.2" class="anchored" data-anchor-id="project-setup"><span class="header-section-number">10.2</span> Project setup</h2>
<ol type="1">
<li>Within the same project you’ve been working, create a new R Notebook. You might call it <code>02-analysis</code>.</li>
<li>We will be using a new package so you’ll need to install it. <strong>Use your Console</strong> to run <code>install.packages("DT")</code>.</li>
<li>Include the libraries below and run them.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="import-cleaned-data" class="level2" data-number="10.3">
<h2 data-number="10.3" class="anchored" data-anchor-id="import-cleaned-data"><span class="header-section-number">10.3</span> Import cleaned data</h2>
<ol type="1">
<li>Create a section for your import</li>
<li>Import your cleaned data and call it <code>sped</code> if you want to follow along here.</li>
</ol>
<p>You should know how to do all that and I don’t know what you called your export file anyway.</p>
<p>But to recap, the data should look like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>sped <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
  district distname  cntyname year  all_count sped_count sped_percent audit_flag
  &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt; &lt;chr&gt;     
1 001902   CAYUGA I… ANDERSON 2013        595         73         12.3 ABOVE     
2 001902   CAYUGA I… ANDERSON 2014        553         76         13.7 ABOVE     
3 001902   CAYUGA I… ANDERSON 2015        577         76         13.2 ABOVE     
4 001902   CAYUGA I… ANDERSON 2016        568         78         13.7 ABOVE     
5 001902   CAYUGA I… ANDERSON 2017        576         82         14.2 ABOVE     
6 001902   CAYUGA I… ANDERSON 2018        575         83         14.4 ABOVE     </code></pre>
</div>
</div>
</section>
<section id="make-a-searchable-table" class="level2" data-number="10.4">
<h2 data-number="10.4" class="anchored" data-anchor-id="make-a-searchable-table"><span class="header-section-number">10.4</span> Make a searchable table</h2>
<p>Wouldn’t it be nice to be able to see the percentage of special education students for each district for each year? The way our data is formatted now, that’s pretty hard to see with our “long” data here.</p>
<p>We could use something more like this? (But with all the years)</p>
<table class="table">
<thead>
<tr class="header">
<th>distname</th>
<th>cntyname</th>
<th style="text-align: right;">2013</th>
<th style="text-align: right;">2014</th>
<th style="text-align: right;">2015</th>
<th>etc</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>CAYUGA ISD</td>
<td>ANDERSON</td>
<td style="text-align: right;">12.3</td>
<td style="text-align: right;">13.7</td>
<td style="text-align: right;">13.2</td>
<td>…</td>
</tr>
<tr class="even">
<td>ELKHART ISD</td>
<td>ANDERSON</td>
<td style="text-align: right;">9.1</td>
<td style="text-align: right;">8.9</td>
<td style="text-align: right;">10.4</td>
<td>…</td>
</tr>
<tr class="odd">
<td>FRANKSTON ISD</td>
<td>ANDERSON</td>
<td style="text-align: right;">10.8</td>
<td style="text-align: right;">9.7</td>
<td style="text-align: right;">9.7</td>
<td>…</td>
</tr>
<tr class="even">
<td>NECHES ISD</td>
<td>ANDERSON</td>
<td style="text-align: right;">11.1</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">11.1</td>
<td>…</td>
</tr>
<tr class="odd">
<td>PALESTINE ISD</td>
<td>ANDERSON</td>
<td style="text-align: right;">7.7</td>
<td style="text-align: right;">7.8</td>
<td style="text-align: right;">8.7</td>
<td>…</td>
</tr>
<tr class="even">
<td>WESTWOOD ISD</td>
<td>ANDERSON</td>
<td style="text-align: right;">9.3</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">9.3</td>
<td>…</td>
</tr>
</tbody>
</table>
<p>And what if you could make that table searchable to find a district by name or county? That would be magic, right?</p>
<p>We can do this by first reshaping our data using <code>pivot_wider()</code> and then applying a function called <code>datatable()</code>.</p>
<section id="pivot-wider" class="level3" data-number="10.4.1">
<h3 data-number="10.4.1" class="anchored" data-anchor-id="pivot-wider"><span class="header-section-number">10.4.1</span> Pivot wider</h3>
<p>You used <a href="https://tidyr.tidyverse.org/reference/pivot_wider.html"><code>pivot_wider()</code></a> with the candy data <a href="https://utdata.github.io/rwdir/tidy-data.html#pivot-wider">in Chapter 9</a>, so you can look back at how that was done, but here are some hints:</p>
<ol type="1">
<li>Create a new section that notes you are creating a table of district percents.</li>
<li>First use <code>select()</code> to get just the columns you need: <code>distname</code>, <code>cntyname</code>, <code>year</code> and <code>sped_percent.</code></li>
<li>Then use <code>pivot_wider()</code>to make a tibble like the one above. Remember that the <code>names_from =</code> argument wants to know which column you want to use to create the names of the new columns. The <code>values_from =</code> argument wants to know which column to pull the cell values from.</li>
<li>Save the result into a new tibble and call it <code>district_percents_data</code></li>
</ol>
<details>
<summary>
You won’t need this because I believe in you
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>district_percents_data <span class="ot">&lt;-</span> sped <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(distname, cntyname, year, sped_percent) <span class="sc">|&gt;</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> year, <span class="at">values_from =</span> sped_percent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
</section>
<section id="make-a-datatable" class="level3" data-number="10.4.2">
<h3 data-number="10.4.2" class="anchored" data-anchor-id="make-a-datatable"><span class="header-section-number">10.4.2</span> Make a datatable</h3>
<p>Now comes the magic.</p>
<ol type="1">
<li>In a new R chunk take your <code>district_percents_data</code> and then pipe it into a function called <code>datatable()</code></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>district_percents_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,022 × 12
   distname     cntyname `2013` `2014` `2015` `2016` `2017` `2018` `2019` `2020`
   &lt;chr&gt;        &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
 1 CAYUGA ISD   ANDERSON   12.3   13.7   13.2   13.7   14.2   14.4   14.9   14.7
 2 ELKHART ISD  ANDERSON    9.1    8.9   10.4   11.6   11     10.5   10.7   11.8
 3 FRANKSTON I… ANDERSON   10.8    9.7    9.7    8.2    8.9   10.1   11.5   11.6
 4 NECHES ISD   ANDERSON   11.1    9     11.1   11      9.8    9.7    8.7    7.1
 5 PALESTINE I… ANDERSON    7.7    7.8    8.7    8.5    8.8    9.2   10.7   11.6
 6 WESTWOOD ISD ANDERSON    9.3   10      9.3    9.9   10.6   10.8   12.3   14  
 7 SLOCUM ISD   ANDERSON   10.9   11.9   12.3   13     12.7   12.5   12.3   13.4
 8 ANDREWS ISD  ANDREWS     6.9    6.6    6.4    6.5    7.1    7.2    8      8.5
 9 HUDSON ISD   ANGELINA    7.2    6.2    7.1    7.6    7.5    8.4    8.6    9  
10 LUFKIN ISD   ANGELINA   10.6   10.5   10.5   10.5   10.3   10.4   10.8   11.6
# ℹ 1,012 more rows
# ℹ 2 more variables: `2021` &lt;dbl&gt;, `2022` &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># |&gt; </span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">#   datatable()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>That’s kinda brilliant, isn’t it? You know can search by any value in the table.</p>
<p>Quick, tell me what was the percentage for Austin ISD in 2020?</p>
<p>That will be useful tool for you when you are writing about specific districts.</p>
</section>
</section>
<section id="choosing-a-chart-to-display-data" class="level2" data-number="10.5">
<h2 data-number="10.5" class="anchored" data-anchor-id="choosing-a-chart-to-display-data"><span class="header-section-number">10.5</span> Choosing a chart to display data</h2>
<p>Our first question about this data was this: <strong>Has the percentage of special education students in Texas changed since the benchmarking policy was dropped?</strong></p>
<p>Given the data we have, can we answer this?</p>
<p>Let’s think about the charts that might be able to show two related variables like that. Choosing the chart type to display that takes experimentation and exploration. Chapter 4 of Nathan Yau’s <em>Data Points</em> book is an excellent look at which chart types help show different data.</p>
<p>This decision tree option might also help you think through it.</p>
<p><img src="images/choosing-a-chart.png" class="img-fluid"></p>
<p>Lastly, another resource to consider this is the <a href="https://github.com/rstudio/cheatsheets/blob/main/data-visualization-2.1.pdf">ggplot cheatsheet</a>, where it includes possible chart types based on the type of data we are comparing.</p>
</section>
<section id="plot-yearly-student-percentage" class="level2" data-number="10.6">
<h2 data-number="10.6" class="anchored" data-anchor-id="plot-yearly-student-percentage"><span class="header-section-number">10.6</span> Plot yearly student percentage</h2>
<p>I’ll often do a hand drawing of a chart that might help me understand or communicate data. This helps me think about how to summarize and shape my data to get to that point.</p>
<p>For this question <strong>Has the percentage of special education students in Texas changed since the benchmarking policy was dropped?</strong>, we could show the percentage of special education students for each year. If we are to chart this, the x axis would be the year and the y axis would be the percentage for that year. Perhaps like this:</p>
<p><img src="images/chart-example.png" class="img-fluid"></p>
<p>We have the percent of students in special education for each district in each year. We <em>could</em> get an average of those percentages for each year, but that won’t take into account the size of each district. Some districts have a single-digit number of students while others have hundreds of thousands of students.</p>
<p>But we also have the number of all students in a district with <code>all_count</code> and the number of special education students <code>sped_count</code>. With these, we can build a more accurate percentage across <em>all</em> the districts. This allows us to calculate our student groups by year.</p>
<section id="build-the-statewide-percentage-by-year-data" class="level3" data-number="10.6.1">
<h3 data-number="10.6.1" class="anchored" data-anchor-id="build-the-statewide-percentage-by-year-data"><span class="header-section-number">10.6.1</span> Build the statewide percentage by year data</h3>
<p>So, let’s summarize our data. This is a “simple” group_by and summarize to get yearly totals, then a mutate to build our percentage. I’ll supply the logic so you can try writing it yourself.</p>
<ol type="1">
<li>Start a new notebook section and note you are getting yearly percentages</li>
<li>In an R chunk, start with your <code>sped</code> data.</li>
<li>Group by the <code>year</code> variable.</li>
<li>In summarize, create a <code>sum()</code> of the <code>all_count</code> variable. Call this <code>total_students</code>.</li>
<li>In the same summarize, create a sum() of the <code>sped_count</code> variable. You might call this <code>total_sped</code>.</li>
<li>Check your results at this point … make sure it makes sense.</li>
<li>Next use <code>mutate()</code> to create a percentage called <code>sped_percent</code> from your <code>total_students</code> and <code>total_sped</code> summaries. The math for percentage is: (part / whole) * 100. You might want to round that resulting value to tenths as well.</li>
<li>I suggest you save all that into a new tibble called <code>yearly_percent</code> (because that’s what I’m gonna do).</li>
</ol>
<details>
<summary>
My version
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>yearly_percent <span class="ot">&lt;-</span> sped <span class="sc">|&gt;</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">|&gt;</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_students =</span> <span class="fu">sum</span>(all_count),</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_sped =</span> <span class="fu">sum</span>(sped_count)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sped_percent =</span> ((total_sped <span class="sc">/</span> total_students) <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">|&gt;</span> <span class="fu">round</span>(<span class="dv">1</span>))</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>yearly_percent</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
   year  total_students total_sped sped_percent
   &lt;chr&gt;          &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;
 1 2013         4870038     418360          8.6
 2 2014         4929867     420847          8.5
 3 2015         4984714     427377          8.6
 4 2016         5034274     437487          8.7
 5 2017         5070664     449303          8.9
 6 2018         5088351     468097          9.2
 7 2019         5099385     499240          9.8
 8 2020         5142334     551718         10.7
 9 2021         4993274     566484         11.3
10 2022         5025780     592457         11.8</code></pre>
</div>
</div>
</details>
</section>
<section id="build-the-statewide-percentage-chart" class="level3" data-number="10.6.2">
<h3 data-number="10.6.2" class="anchored" data-anchor-id="build-the-statewide-percentage-chart"><span class="header-section-number">10.6.2</span> Build the statewide percentage chart</h3>
<p>And with that table, you can plot your chart using the <code>year</code> and <code>sped_percent</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>yearly_percent <span class="sc">|&gt;</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> sped_percent)) <span class="sc">+</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> sped_percent, <span class="at">vjust =</span> <span class="sc">-</span>.<span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="answers_files/figure-html/yearly-percent-plot-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This definitely shows us that the percentage of students in special education (in traditional public schools) has increased each year since 2017 when the benchmark was dropped and then outlawed by the legislature.</p>
<p>I would be careful about saying the increase is <em>because</em> of the changes (though that is likely true), but you can certainly say with authority that it has gone up, and interview other people to pontificate on the reasons why.</p>
<p>BTW, if you wanted to make that chart in <a href="https://academy.datawrapper.de/article/20-how-to-create-a-column-chart">datawrapper</a>, you could use the same tibble, select just the <code>year</code> and <code>sped_percent</code> columns and then use the <code>clipr::write_clip()</code> function to copy your data.</p>
</section>
</section>
<section id="districts-by-benchmark-and-year" class="level2" data-number="10.7">
<h2 data-number="10.7" class="anchored" data-anchor-id="districts-by-benchmark-and-year"><span class="header-section-number">10.7</span> Districts by benchmark and year</h2>
<p>Our second question is this: <strong>How many districts were above that arbitrary 8.5% benchmark before and after the changes?</strong></p>
<p>It was in anticipation for this that we built the <code>audit_flag</code> field in our data. With that we can count how many rows have the “ABOVE” or “BELOW” value. (In reality, it’s probably at this point we would discover it useful to create, instead of at the data cleaning phase, but I wanted to get that part out of the way so we can concentrate on the charts.)</p>
<p>To decide on which chart to build, we can go back to our chart decision workflow or consult the ggplot cheetsheet. Given we have the discrete values of <code>audit_flag</code> and <code>years</code>, and we want to plot how many districts are counted (which is a continuous value), we’re looking at a stacked or grouped column/bar chart or a line chart.</p>
<section id="build-the-audit-flag-data" class="level3" data-number="10.7.1">
<h3 data-number="10.7.1" class="anchored" data-anchor-id="build-the-audit-flag-data"><span class="header-section-number">10.7.1</span> Build the audit flag data</h3>
<p>Before we can build the chart, we need to summarize our data. The logic is this: We need to group our data by both the <code>year</code> and the <code>audit_flag</code>, and then count the number of rows for those values.</p>
<ol type="1">
<li>Start a new Markdown section and note you are counting districts by the audit flag.</li>
<li>Start with your original <code>sped</code> data.</li>
<li>Group your data by both <code>year</code> and <code>audit_flag</code>.</li>
<li>Summarize your data by counting <code>n()</code> the results. Name the variable <code>count_districts</code>.</li>
<li>Save the resulting data into a tibble called <code>flag_count_districts</code>. You might print that result out so you can refer to it.</li>
</ol>
<details>
<summary>
Use GSA or the <code>count()</code> shortcut
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I used the count() shortcut instead of GSA</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>flag_count_districts <span class="ot">&lt;-</span> sped <span class="sc">|&gt;</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(year, audit_flag, <span class="at">name =</span> <span class="st">"count_districts"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<p><br> The data should look like this:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 3
   year  audit_flag count_districts
   &lt;chr&gt; &lt;chr&gt;                &lt;int&gt;
 1 2013  ABOVE                  591
 2 2013  BELOW                  429
 3 2014  ABOVE                  571
 4 2014  BELOW                  449
 5 2015  ABOVE                  579
 6 2015  BELOW                  441
 7 2016  ABOVE                  578
 8 2016  BELOW                  442
 9 2017  ABOVE                  629
10 2017  BELOW                  391
11 2018  ABOVE                  688
12 2018  BELOW                  332
13 2019  ABOVE                  765
14 2019  BELOW                  255
15 2020  ABOVE                  865
16 2020  BELOW                  156
17 2021  ABOVE                  909
18 2021  BELOW                  112
19 2022  ABOVE                  945
20 2022  BELOW                   77</code></pre>
</div>
</div>
</section>
<section id="build-the-audit-flag-chart" class="level3" data-number="10.7.2">
<h3 data-number="10.7.2" class="anchored" data-anchor-id="build-the-audit-flag-chart"><span class="header-section-number">10.7.2</span> Build the audit flag chart</h3>
<p>Now that we have the data, we can build the ggplot column chart. The key new thing here is we are using a new aesthetic <code>fill</code> to apply colors based on the <code>audit_flag</code> column.</p>
<ol type="1">
<li>Add some notes you are buliding the first exploratory chart</li>
<li>Add an R chunk with the following:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>flag_count_districts <span class="sc">|&gt;</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> count_districts, <span class="at">fill =</span> audit_flag)) <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="answers_files/figure-html/audit-col-stacked-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This is actually not a bad look because it does clearly show the number of districts below the 8.5% audit benchmark is dropping year by year, and the number of districts above is growing.</p>
<p>Leave that chart there for reference, but let’s build a new one that is almost the same, but we’ll adjust it to be a grouped column chart instead of stacked. The key difference is we are adding <code>position = "dodge"</code> to the column geom.</p>
<ol type="1">
<li>Note in Markdown text you are building the grouped column version</li>
<li>Add a new chunk and start with exactly what you have above.</li>
<li>Update the column geom to this: <code>geom_col(position = "dodge")</code></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>flag_count_districts <span class="sc">|&gt;</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> count_districts, <span class="at">fill =</span> audit_flag)) <span class="sc">+</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="answers_files/figure-html/audit-col-grouped-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>That’s not bad at all … it might be the winner.</p>
<p>Lastly, let’s chart this data as a line chart to see if that looks any better or is easier to comprehend.</p>
<ol type="1">
<li>Note you are visualizing as a line</li>
<li>Add the chunk below.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>flag_count_districts <span class="sc">|&gt;</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> count_districts, <span class="at">group =</span> audit_flag)) <span class="sc">+</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> audit_flag)) <span class="sc">+</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="dv">1000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="answers_files/figure-html/audit-line-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The chart above has <code>ylim()</code> added because the default didn’t start the y axis at zero. <code>ylim</code> is a shortcut for <code>scale_y_continuous(limits = c(0,1000))</code>.</p>
</section>
<section id="which-chart-is-best" class="level3" data-number="10.7.3">
<h3 data-number="10.7.3" class="anchored" data-anchor-id="which-chart-is-best"><span class="header-section-number">10.7.3</span> Which chart is best?</h3>
<p>Remember, this is the question you are trying to answer: <strong>How many districts were above that arbitrary 8.5% benchmark before and after the changes?</strong></p>
<p>I would say the grouped bar chart (the bars next to each other) is probably best to explain this concept.</p>
</section>
</section>
<section id="local-districts" class="level2" data-number="10.8">
<h2 data-number="10.8" class="anchored" data-anchor-id="local-districts"><span class="header-section-number">10.8</span> Local districts</h2>
<p>We have one last question: <strong>How have local districts changed?</strong> i.e., what are the percentages for districts in Bastrop, Hays, Travis and Williamson counties? We want to make sure none of these buck the overall trend.</p>
<p>You can certainly use the searchable table we made to get an idea of the number of districts and how the numbers have changed, but you can’t <strong><em>see</em></strong> them there. Searching there does reveal there are too many districts to visualize them all at once. Maybe we can chart one county at a time.</p>
<p>Looking at the chart suggestions workflow, we are doing a comparison over time of many categories … so our trusty line chart is the horse to hitch.</p>
<p>To make that line chart we think about our axes and groups: We need our x axis of <code>year</code>, y axis of the <code>sped_percent</code> and we need to group the lines by their district. Since we need a column that has each year, the <em>long</em> data we started with should suffice:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>sped <span class="sc">|&gt;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
  district distname  cntyname year  all_count sped_count sped_percent audit_flag
  &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt; &lt;chr&gt;     
1 001902   CAYUGA I… ANDERSON 2013        595         73         12.3 ABOVE     
2 001902   CAYUGA I… ANDERSON 2014        553         76         13.7 ABOVE     
3 001902   CAYUGA I… ANDERSON 2015        577         76         13.2 ABOVE     
4 001902   CAYUGA I… ANDERSON 2016        568         78         13.7 ABOVE     
5 001902   CAYUGA I… ANDERSON 2017        576         82         14.2 ABOVE     
6 001902   CAYUGA I… ANDERSON 2018        575         83         14.4 ABOVE     </code></pre>
</div>
</div>
<p>We just need to filter that down to a single county <code>cntyname == "BASTROP"</code> to show this. We can even do this all in one code block. Let’s see if you can follow this logic and build Bastrop county for yourself.</p>
<ol type="1">
<li>Start a new section that you are looking at local districts</li>
<li>Start a new chunk with your original <code>sped</code> data</li>
<li>Filter it to have just rows for <strong>BASTROP</strong> county</li>
<li>Pipe that result into the <code>ggplot()</code> function</li>
<li>For the x axis, you are using <code>year</code>, for the y use <code>sped_percent</code> and for group use <code>distname</code></li>
<li>Inside your <code>geom_line()</code> set the the color to the district: <code>aes(color = distname)</code>.</li>
</ol>
<p>It should look like this:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="answers_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol type="1">
<li>Now do the same for the other three counties, each in their own code chunk: Hays, Travis and Williamson.</li>
</ol>
<p>These charts give you some reference for the local districts. You’ll see the more districts there are within a county, the less effective the line chart becomes. But at least it gives you an idea of which districts are following the trend.</p>
</section>
<section id="the-assignments" class="level2" data-number="10.9">
<h2 data-number="10.9" class="anchored" data-anchor-id="the-assignments"><span class="header-section-number">10.9</span> The assignments</h2>
<p>Now that you have looked at this data, you should be able to describe what has happened to the share of special education students across the state. You’ll do this in three parts: a written piece, a published Datawrapper chart, and you’ll turn in this analysis.</p>
<p>See Canvas for details on each of these.</p>
<p>– 30 –</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./bind-join.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Bind and join</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./group-dates.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Grouping by dates</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>